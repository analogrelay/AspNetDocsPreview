

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Adding Validation &mdash; ASP.NET  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/custom.css?v=6" type="text/css" />
  

  
    <link rel="top" title="ASP.NET  documentation" href="../../index.html"/>
        <link rel="up" title="Building your first ASP.NET Core MVC app with Visual Studio" href="index.html"/>
        <link rel="next" title="Examining the Details and Delete methods" href="details.html"/>
        <link rel="prev" title="Adding a New Field" href="new-field.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> ASP.NET
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.asp.net/projects/api">API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../your-first-mac-aspnet.html">Your First ASP.NET Core Application on a Mac Using Visual Studio Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../first-web-api.html">Building Your First Web API with ASP.NET Core MVC and Visual Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../publish-to-azure-webapp-using-vs.html">Deploy an ASP.NET Core web app to Azure using Visual Studio</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Building your first ASP.NET Core MVC app with Visual Studio</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="start-mvc.html">Getting started with ASP.NET Core MVC and Visual Studio</a></li>
<li class="toctree-l3"><a class="reference internal" href="adding-controller.html">Adding a controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="adding-view.html">Adding a view</a></li>
<li class="toctree-l3"><a class="reference internal" href="adding-model.html">Adding a model</a></li>
<li class="toctree-l3"><a class="reference internal" href="working-with-sql.html">Working with SQL Server LocalDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="controller-methods-views.html">Controller methods and views</a></li>
<li class="toctree-l3"><a class="reference internal" href="search.html">Adding Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="new-field.html">Adding a New Field</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Adding Validation</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="details.html">Examining the Details and Delete methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../nano-server.html">ASP.NET Core on Nano Server</a></li>
<li class="toctree-l2"><a class="reference external" href="https://azure.microsoft.com/en-us/documentation/articles/service-fabric-add-a-web-frontend/">ASP.NET Core and Azure Service Fabric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mobile/native-mobile-backend.html">ðŸ”§ Creating Backend Services for Native Mobile Applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../conceptual-overview/index.html">Conceptual Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fundamentals/index.html">Fundamentals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mvc/index.html">MVC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/index.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data/index.html">Working with Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../client-side/index.html">Client-Side Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mobile/index.html">Mobile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../publishing/index.html">Publishing and Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hosting/index.html">Guidance for Hosting Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../performance/index.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration/index.html">Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ASP.NET</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Tutorials</a> &raquo;</li>
      
          <li><a href="index.html">Building your first ASP.NET Core MVC app with Visual Studio</a> &raquo;</li>
      
    <li>Adding Validation</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/tutorials/first-mvc-app/validation.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
  <div class="section" id="adding-validation">
<h1>Adding Validation<a class="headerlink" href="#adding-validation" title="Permalink to this headline">Â¶</a></h1>
<p>By <a class="reference external" href="https://twitter.com/RickAndMSFT">Rick Anderson</a></p>
<p>In this this section you&#8217;ll add validation logic to the <code class="docutils literal"><span class="pre">Movie</span></code> model, and you&#8217;ll ensure that the validation rules are enforced any time a user attempts to create or edit a movie.</p>
<div class="section" id="keeping-things-dry">
<h2>Keeping things DRY<a class="headerlink" href="#keeping-things-dry" title="Permalink to this headline">Â¶</a></h2>
<p>One of the design tenets of MVC is <a class="reference external" href="http://en.wikipedia.org/wiki/Don't_repeat_yourself">DRY</a> (&#8220;Don&#8217;t Repeat Yourself&#8221;). ASP.NET MVC encourages you to specify functionality or behavior only once, and then have it be reflected everywhere in an app. This reduces the amount of code you need to write and makes the code you do write less error prone, easier to test, and easier to maintain.</p>
<p>The validation support provided by MVC and Entity Framework Core Code First is a great example of the DRY principle in action. You can declaratively specify validation rules in one place (in the model class) and the rules are enforced everywhere in the app.</p>
<p>Let&#8217;s look at how you can take advantage of this validation support in the movie app.</p>
</div>
<div class="section" id="adding-validation-rules-to-the-movie-model">
<h2>Adding validation rules to the movie model<a class="headerlink" href="#adding-validation-rules-to-the-movie-model" title="Permalink to this headline">Â¶</a></h2>
<p>Open the <em>Movie.cs</em> file. DataAnnotations provides a built-in set of validation attributes that you apply declaratively to any class or property. (It also contains formatting attributes like <code class="docutils literal"><span class="pre">DataType</span></code> that help with formatting and don&#8217;t provide any validation.)</p>
<p>Update the <code class="docutils literal"><span class="pre">Movie</span></code> class to take advantage of the built-in <code class="docutils literal"><span class="pre">Required</span></code>, <code class="docutils literal"><span class="pre">StringLength</span></code>, <code class="docutils literal"><span class="pre">RegularExpression</span></code>, and <code class="docutils literal"><span class="pre">Range</span></code> validation attributes.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>public class Movie
{
    public int ID { get; set; }

<span class="hll">    [StringLength(60, MinimumLength = 3)]
</span>    public string Title { get; set; }

    [Display(Name = &quot;Release Date&quot;)]
    [DataType(DataType.Date)]
    public DateTime ReleaseDate { get; set; }

<span class="hll">    [RegularExpression(@&quot;^[A-Z]+[a-zA-Z&#39;&#39;-&#39;\s]*$&quot;)]
</span><span class="hll">    [Required]
</span><span class="hll">    [StringLength(30)]
</span>    public string Genre { get; set; }

<span class="hll">    [Range(1, 100)]
</span><span class="hll">    [DataType(DataType.Currency)]
</span>    public decimal Price { get; set; }

<span class="hll">    [RegularExpression(@&quot;^[A-Z]+[a-zA-Z&#39;&#39;-&#39;\s]*$&quot;)]
</span><span class="hll">    [StringLength(5)]
</span>    public string Rating { get; set; }
}
</pre></div>
</div>
<p>The validation attributes specify behavior that you want to enforce on the model properties they are applied to. The <code class="docutils literal"><span class="pre">Required</span></code> and <code class="docutils literal"><span class="pre">MinimumLength</span></code> attributes indicates that a property must have a value; but nothing prevents a user from entering white space to satisfy this validation. The <code class="docutils literal"><span class="pre">RegularExpression</span></code> attribute is used to limit what characters can be input. In the code above, <code class="docutils literal"><span class="pre">Genre</span></code> and <code class="docutils literal"><span class="pre">Rating</span></code> must use only letters (white space, numbers and special characters are not allowed). The <code class="docutils literal"><span class="pre">Range</span></code> attribute constrains a value to within a specified range. The <code class="docutils literal"><span class="pre">StringLength</span></code> attribute lets you set the maximum length of a string property, and optionally its minimum length. Value types (such as <code class="docutils literal"><span class="pre">decimal</span></code>, <code class="docutils literal"><span class="pre">int</span></code>, <code class="docutils literal"><span class="pre">float</span></code>, <code class="docutils literal"><span class="pre">DateTime</span></code>) are inherently required and don&#8217;t need the <code class="docutils literal"><span class="pre">[Required]</span></code> attribute.</p>
<p>Having validation rules automatically enforced by ASP.NET helps make your app more robust. It also ensures that you can&#8217;t forget to validate something and inadvertently let bad data into the database.</p>
</div>
<div class="section" id="validation-error-ui-in-mvc">
<h2>Validation Error UI in MVC<a class="headerlink" href="#validation-error-ui-in-mvc" title="Permalink to this headline">Â¶</a></h2>
<p>Run the app and navigate to the Movies controller.</p>
<p>Tap the <strong>Create New</strong> link to add a new movie. Fill out the form with some invalid values. As soon as jQuery client side validation detects the error, it displays an error message.</p>
<img alt="../../_images/val1.png" src="../../_images/val1.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may not be able to enter decimal points or commas in the <code class="docutils literal"><span class="pre">Price</span></code> field. To support <a class="reference external" href="http://jqueryvalidation.org/">jQuery validation</a> for non-English locales that use a comma (&#8221;,&#8221;) for a decimal point, and non US-English date formats, you must take steps to globalize your app. See <a class="reference internal" href="#additional-resources">Additional resources</a> for more information. For now, just enter whole numbers like 10.</p>
</div>
<p>Notice how the form has automatically rendered an appropriate validation error message in each field containing an invalid value. The errors are enforced both client-side (using JavaScript and jQuery) and server-side (in case a user has JavaScript disabled).</p>
<p>A significant benefit is that you didn&#8217;t need to change a single line of code in the <code class="docutils literal"><span class="pre">MoviesController</span></code> class or in the <em>Create.cshtml</em> view in order to enable this validation UI. The controller and views you created earlier in this tutorial automatically picked up the validation rules that you specified by using validation attributes on the properties of the <code class="docutils literal"><span class="pre">Movie</span></code> model class. Test validation using the <code class="docutils literal"><span class="pre">Edit</span></code> action method, and the same validation is applied.</p>
<p>The form data is not sent to the server until there are no client side validation errors. You can verify this by putting a break point in the <code class="docutils literal"><span class="pre">HTTP</span> <span class="pre">Post</span></code> method, by using the <a class="reference external" href="http://www.telerik.com/fiddler">Fiddler tool</a> , or the <a class="reference external" href="https://dev.windows.com/en-us/microsoft-edge/platform/documentation/f12-devtools-guide/">F12 Developer tools</a>.</p>
</div>
<div class="section" id="how-validation-occurs-in-the-create-view-and-create-action-method">
<h2>How Validation Occurs in the Create View and Create Action Method<a class="headerlink" href="#how-validation-occurs-in-the-create-view-and-create-action-method" title="Permalink to this headline">Â¶</a></h2>
<p>You might wonder how the validation UI was generated without any updates to the code in the controller or views. The next listing shows the two <code class="docutils literal"><span class="pre">Create</span></code> methods.</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="c1">// GET: Movies/Create</span>
<span class="k">public</span> <span class="n">IActionResult</span> <span class="nf">Create</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nf">View</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// POST: Movies/Create</span>
<span class="c1">// To protect from overposting attacks, please enable the specific properties you want to bind to, for </span>
<span class="c1">// more details see http://go.microsoft.com/fwlink/?LinkId=317598.</span>
<span class="na">[HttpPost]</span>
<span class="na">[ValidateAntiForgeryToken]</span>
<span class="k">public</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">IActionResult</span><span class="p">&gt;</span> <span class="n">Create</span><span class="p">([</span><span class="n">Bind</span><span class="p">(</span><span class="s">&quot;ID,Genre,Price,ReleaseDate,Title,Rating&quot;</span><span class="p">)]</span> <span class="n">Movie</span> <span class="n">movie</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ModelState</span><span class="p">.</span><span class="n">IsValid</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_context</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">movie</span><span class="p">);</span>
        <span class="k">await</span> <span class="n">_context</span><span class="p">.</span><span class="n">SaveChangesAsync</span><span class="p">();</span>
        <span class="k">return</span> <span class="nf">RedirectToAction</span><span class="p">(</span><span class="s">&quot;Index&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nf">View</span><span class="p">(</span><span class="n">movie</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The first (HTTP GET) <code class="docutils literal"><span class="pre">Create</span></code> action method displays the initial Create form. The second (<code class="docutils literal"><span class="pre">[HttpPost]</span></code>) version handles the form post. The second <code class="docutils literal"><span class="pre">Create</span></code> method (The HttpPost version) calls <code class="docutils literal"><span class="pre">ModelState.IsValid</span></code> to check whether the movie has any validation errors. Calling this method evaluates any validation attributes that have been applied to the object. If the object has validation errors, the <code class="docutils literal"><span class="pre">Create</span></code> method re-displays the form. If there are no errors, the method saves the new movie in the database. In our movie example, the form is not posted to the server when there are validation errors detected on the client side; the second <code class="docutils literal"><span class="pre">Create</span></code> method is never called when there are client side validation errors. If you disable JavaScript in your browser, client validation is disabled and you can test the HTTP POST <code class="docutils literal"><span class="pre">Create</span></code> method <code class="docutils literal"><span class="pre">ModelState.IsValid</span></code> detecting any validation errors.</p>
<p>You can set a break point in the <code class="docutils literal"><span class="pre">[HttpPost]</span> <span class="pre">Create</span></code> method and verify the method is never called, client side validation will not submit the form data when validation errors are detected. If you disable JavaScript in your browser, then submit the form with errors, the break point will be hit. You still get full validation without JavaScript. The following image shows how to disable JavaScript in Internet Explorer.</p>
<img alt="../../_images/p8_IE9_disableJavaScript.png" src="../../_images/p8_IE9_disableJavaScript.png" />
<p>The following image shows how to disable JavaScript in the FireFox browser.</p>
<img alt="../../_images/ff.png" src="../../_images/ff.png" />
<p>The following image shows how to disable JavaScript in the Chrome browser.</p>
<img alt="../../_images/chrome.png" src="../../_images/chrome.png" />
<p>After you disable JavaScript, post invalid data and step through the debugger.</p>
<img alt="../../_images/ms.png" src="../../_images/ms.png" />
<p>Below is portion of the <em>Create.cshtml</em> view template that you scaffolded earlier in the tutorial. It&#8217;s used by the action methods shown above both to display the initial form and to redisplay it in the event of an error.</p>
<div class="highlight-HTML"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">asp-action</span><span class="o">=</span><span class="s">&quot;Create&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-horizontal&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span>Movie<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">asp-validation-summary</span><span class="o">=</span><span class="s">&quot;ModelOnly&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-danger&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">asp-for</span><span class="o">=</span><span class="s">&quot;Genre&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-md-2 control-label&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-md-10&quot;</span><span class="p">&gt;</span>
<span class="hll">                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">asp-for</span><span class="o">=</span><span class="s">&quot;Genre&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span> <span class="p">/&gt;</span>
</span><span class="hll">                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">asp-validation-for</span><span class="o">=</span><span class="s">&quot;Genre&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-danger&quot;</span> <span class="p">/&gt;</span>
</span>            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="hll">        @*Markup removed for brevity.*@
</span>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">asp-for</span><span class="o">=</span><span class="s">&quot;Rating&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-md-2 control-label&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-md-10&quot;</span><span class="p">&gt;</span>
<span class="hll">                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">asp-for</span><span class="o">=</span><span class="s">&quot;Rating&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span> <span class="p">/&gt;</span>
</span><span class="hll">                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">asp-validation-for</span><span class="o">=</span><span class="s">&quot;Rating&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-danger&quot;</span> <span class="p">/&gt;</span>
</span>            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-md-offset-2 col-md-10&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Create&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-default&quot;</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../../mvc/views/working-with-forms.html"><span class="doc">Input Tag Helper</span></a> consumes the <a class="reference external" href="http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.aspx">DataAnnotations</a> attributes and produces HTML attributes needed for jQuery Validation on the client side. The <a class="reference internal" href="../../mvc/views/working-with-forms.html"><span class="doc">Validation Tag Helper</span></a> displays a validation errors. See <a class="reference internal" href="../../mvc/models/validation.html"><span class="doc">Validation</span></a>.</p>
<p>What&#8217;s really nice about this approach is that neither the controller nor the <code class="docutils literal"><span class="pre">Create</span></code> view template knows anything about the actual validation rules being enforced or about the specific error messages displayed. The validation rules and the error strings are specified only in the <code class="docutils literal"><span class="pre">Movie</span></code> class. These same validation rules are automatically applied to the <code class="docutils literal"><span class="pre">Edit</span></code> view and any other views templates you might create that edit your model.</p>
<p>When you need to change validation logic, you can do so in exactly one place by adding validation attributes to the model (in this example, the <code class="docutils literal"><span class="pre">Movie</span></code> class). You won&#8217;t have to worry about different parts of the application being inconsistent with how the rules are enforced â€” all validation logic will be defined in one place and used everywhere. This keeps the code very clean, and makes it easy to maintain and evolve. And it means that that you&#8217;ll be fully honoring the DRY principle.</p>
</div>
<div class="section" id="using-datatype-attributes">
<h2>Using DataType Attributes<a class="headerlink" href="#using-datatype-attributes" title="Permalink to this headline">Â¶</a></h2>
<p>Open the <em>Movie.cs</em> file and examine the <code class="docutils literal"><span class="pre">Movie</span></code> class. The <code class="docutils literal"><span class="pre">System.ComponentModel.DataAnnotations</span></code> namespace provides formatting attributes in addition to the built-in set of validation attributes. We&#8217;ve already applied a <code class="docutils literal"><span class="pre">DataType</span></code> enumeration value to the release date and to the price fields. The following code shows the <code class="docutils literal"><span class="pre">ReleaseDate</span></code> and <code class="docutils literal"><span class="pre">Price</span></code> properties with the appropriate <code class="docutils literal"><span class="pre">DataType</span></code> attribute.</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="na">[Display(Name = &quot;Release Date&quot;)]</span>
<span class="hll"><span class="na">[DataType(DataType.Date)]</span>
</span><span class="k">public</span> <span class="n">DateTime</span> <span class="n">ReleaseDate</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

<span class="na">[Range(1, 100)]</span>
<span class="hll"><span class="na">[DataType(DataType.Currency)]</span>
</span><span class="k">public</span> <span class="kt">decimal</span> <span class="n">Price</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">DataType</span></code> attributes only provide hints for the view engine to format the data (and supply attributes such as <code class="docutils literal"><span class="pre">&lt;a&gt;</span></code> for URL&#8217;s and <code class="docutils literal"><span class="pre">&lt;a</span> <span class="pre">href=&quot;mailto:EmailAddress.com&quot;&gt;</span></code> for email. You can use the <code class="docutils literal"><span class="pre">RegularExpression</span></code> attribute to validate the format of the data. The <code class="docutils literal"><span class="pre">DataType</span></code> attribute is used to specify a data type that is more specific than the database intrinsic type, they are not validation attributes. In this case we only want to keep track of the date, not the time. The <code class="docutils literal"><span class="pre">DataType</span></code> Enumeration provides for many data types, such as Date, Time, PhoneNumber, Currency, EmailAddress and more. The <code class="docutils literal"><span class="pre">DataType</span></code> attribute can also enable the application to automatically provide type-specific features. For example, a <code class="docutils literal"><span class="pre">mailto:</span></code> link can be created for <code class="docutils literal"><span class="pre">DataType.EmailAddress</span></code>, and a date selector can be provided for <code class="docutils literal"><span class="pre">DataType.Date</span></code> in browsers that support HTML5. The <code class="docutils literal"><span class="pre">DataType</span></code> attributes emits HTML 5 <code class="docutils literal"><span class="pre">data-</span></code> (pronounced data dash) attributes that HTML 5 browsers can understand. The <code class="docutils literal"><span class="pre">DataType</span></code> attributes do <strong>not</strong> provide any validation.</p>
<p><code class="docutils literal"><span class="pre">DataType.Date</span></code> does not specify the format of the date that is displayed. By default, the data field is displayed according to the default formats based on the server&#8217;s <code class="docutils literal"><span class="pre">CultureInfo</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">DisplayFormat</span></code> attribute is used to explicitly specify the date format:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="na">[DisplayFormat(DataFormatString = &quot;{0:yyyy-MM-dd}&quot;, ApplyFormatInEditMode = true)]</span>
<span class="k">public</span> <span class="n">DateTime</span> <span class="n">ReleaseDate</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">ApplyFormatInEditMode</span></code> setting specifies that the formatting should also be applied when the value is displayed in a text box for editing. (You might not want that for some fields â€” for example, for currency values, you probably do not want the currency symbol in the text box for editing.)</p>
<p>You can use the <code class="docutils literal"><span class="pre">DisplayFormat</span></code> attribute by itself, but it&#8217;s generally a good idea to use the <code class="docutils literal"><span class="pre">DataType</span></code> attribute. The <code class="docutils literal"><span class="pre">DataType</span></code> attribute conveys the semantics of the data as opposed to how to render it on a screen, and provides the following benefits that you don&#8217;t get with DisplayFormat:</p>
<ul class="simple">
<li>The browser can enable HTML5 features (for example to show a calendar control, the locale-appropriate currency symbol, email links, etc.)</li>
<li>By default, the browser will render data using the correct format based on your <a class="reference external" href="http://msdn.microsoft.com/en-us/library/vstudio/wyzd2bce.aspx">locale</a></li>
<li>The <code class="docutils literal"><span class="pre">DataType</span></code> attribute can enable MVC to choose the right field template to render the data (the <code class="docutils literal"><span class="pre">DisplayFormat</span></code> if used by itself uses the string template). For more information, see Brad Wilson&#8217;s <a class="reference external" href="http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html">ASP.NET MVC 2 Templates</a>. (Though written for MVC 2, this article still applies to the current version of ASP.NET MVC.)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">jQuery validation does not work with the <code class="docutils literal"><span class="pre">Range</span></code> attribute and <code class="docutils literal"><span class="pre">DateTime</span></code>. For example, the following code will always display a client side validation error, even when the date is in the specified range:</p>
</div>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="na">[Range(typeof(DateTime), &quot;1/1/1966&quot;, &quot;1/1/2020&quot;)]</span>
</pre></div>
</div>
<p>You will need to disable jQuery date validation to use the <code class="docutils literal"><span class="pre">Range</span></code> attribute with <code class="docutils literal"><span class="pre">DateTime</span></code>. It&#8217;s generally not a good practice to compile hard dates in your models, so using the <code class="docutils literal"><span class="pre">Range</span></code> attribute and <code class="docutils literal"><span class="pre">DateTime</span></code> is discouraged.</p>
<p>The following code shows combining attributes on one line:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>public class Movie
{
    public int ID { get; set; }

<span class="hll">    [StringLength(60, MinimumLength = 3)]
</span>    public string Title { get; set; }

<span class="hll">    [Display(Name = &quot;Release Date&quot;), DataType(DataType.Date)]
</span>    public DateTime ReleaseDate { get; set; }

<span class="hll">    [RegularExpression(@&quot;^[A-Z]+[a-zA-Z&#39;&#39;-&#39;\s]*$&quot;), Required, StringLength(30)]
</span>    public string Genre { get; set; }

<span class="hll">    [Range(1, 100), DataType(DataType.Currency)]
</span>    public decimal Price { get; set; }

<span class="hll">    [RegularExpression(@&quot;^[A-Z]+[a-zA-Z&#39;&#39;-&#39;\s]*$&quot;), StringLength(5)]
</span>    public string Rating { get; set; }
}
</pre></div>
</div>
<p>In the next part of the series, we&#8217;ll review the application and make some improvements to the automatically generated <code class="docutils literal"><span class="pre">Details</span></code> and <code class="docutils literal"><span class="pre">Delete</span></code> methods.</p>
</div>
<div class="section" id="additional-resources">
<h2>Additional resources<a class="headerlink" href="#additional-resources" title="Permalink to this headline">Â¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../../mvc/views/working-with-forms.html"><span class="doc">Working with Forms</span></a></li>
<li><a class="reference internal" href="../../fundamentals/localization.html"><span class="doc">Globalization and localization</span></a></li>
<li><a class="reference internal" href="../../mvc/views/tag-helpers/intro.html"><span class="doc">Introduction to Tag Helpers</span></a></li>
<li><a class="reference internal" href="../../mvc/views/tag-helpers/authoring.html"><span class="doc">Authoring Tag Helpers</span></a></li>
</ul>
</div>
</div>



  
  <!-- Helpfulness -->
  <div id="helpful-position"></div>
  <div id="helpful" class="helpfulness-container" style="display:none;">
    <div class="helpfulness">
      <div class="helpfulness-form">
        <h2>Is this page helpful?</h2>
        <a id="helpfulness-btn-yes" href="javascript:;" class="common-btn first">Yes</a>
        <a id="helpfulness-btn-no" href="javascript:;" class="common-btn">No</a>
      </div>
      <div class="helpfulness-form-no" style="display:none;">
        <h2>Is this page helpful?</h2>
        Sorry this wasn't helpful.
        <input type="text" id="txt-helpfulness" placeholder="Please let us know why this wasn't helpful">
        <span id="helpfulness-characters-left">characters remaining</span>
        <a id="helpfulness-btn-submit" href="javascript:;" class="common-btn">Submit</a>
        <a id="helpfulness-btn-skip" href="javascript:;" class="common-btn secondary">Skip this</a>
      </div>
      <a href="javascript:;" class="helpfulness-close">âœ–</a>
      <div class="messages processing" style="display:none;">
        Sending feedback...
      </div>
      <div class="messages success" style="display:none;">
        Thank you for your feedback!
      </div>
      <div class="messages helpfulness-error" style="display:none;">
        Error during submission!
      </div>
    </div>
  </div>
  

  <!-- wedc -->
  <noscript>
    <img alt="" width="1" height="1" src="https://c.microsoft.com/trans_pixel.aspx"/>
  </noscript>

  
    <!-- disqus -->
    <button id="showComments" type="button" class="btn btn-neutral"><i class="fa fa-comment"></i> Show comments</button>
    <div id="disqus_thread"></div>
    <hr/>
  
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="details.html" class="btn btn-neutral float-right" title="Examining the Details and Delete methods" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="new-field.html" class="btn btn-neutral" title="Adding a New Field" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Microsoft.
      Last updated on Jun 21, 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  Documentation licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>.


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/helpfulness.js?v=6"></script>
      <script type="text/javascript" src="../../_static/disqus.js?v=6"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>