

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Authoring Tag Helpers &mdash; ASP.NET  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/custom.css?v=6" type="text/css" />
  

  
    <link rel="top" title="ASP.NET  documentation" href="../../../index.html"/>
        <link rel="up" title="Tag Helpers" href="index.html"/>
        <link rel="next" title="Partial Views" href="../partial.html"/>
        <link rel="prev" title="Introduction to Tag Helpers" href="intro.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> ASP.NET
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.asp.net/projects/api">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../conceptual-overview/index.html">Conceptual Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fundamentals/index.html">Fundamentals</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">MVC</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../overview.html">ðŸ”§ Overview of ASP.NET MVC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../models/index.html">Models</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Views</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../razor.html">ðŸ”§ Razor Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../layout.html">Layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dynamic-vs-static.html">ðŸ”§ Dynamic vs Strongly Typed Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../working-with-forms.html">Working with Forms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../html-helpers.html">ðŸ”§ HTML Helpers</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Tag Helpers</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="intro.html">Introduction to Tag Helpers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../working-with-forms.html">Working with Forms</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Authoring Tag Helpers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../partial.html">Partial Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dependency-injection.html">Injecting Services Into Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../view-components.html">View Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../custom-view-engine.html">ðŸ”§ Creating a Custom View Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mobile.html">ðŸ”§ Building Mobile Specific Views</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../controllers/index.html">Controllers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../testing/index.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../data/index.html">Working with Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../client-side/index.html">Client-Side Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mobile/index.html">Mobile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../publishing/index.html">Publishing and Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hosting/index.html">Guidance for Hosting Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../performance/index.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../migration/index.html">Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">ASP.NET</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">MVC</a> &raquo;</li>
      
          <li><a href="../index.html">Views</a> &raquo;</li>
      
          <li><a href="index.html">Tag Helpers</a> &raquo;</li>
      
    <li>Authoring Tag Helpers</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/mvc/views/tag-helpers/authoring.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
  <div class="section" id="authoring-tag-helpers">
<h1>Authoring Tag Helpers<a class="headerlink" href="#authoring-tag-helpers" title="Permalink to this headline">Â¶</a></h1>
<p>By <a class="reference external" href="https://twitter.com/RickAndMSFT">Rick Anderson</a></p>
<div class="contents local topic" id="sections">
<p class="topic-title first">Sections:</p>
<ul class="simple">
<li><a class="reference internal" href="#getting-started-with-tag-helpers" id="id2">Getting started with Tag Helpers</a></li>
<li><a class="reference internal" href="#starting-the-email-tag-helper" id="id3">Starting the email Tag Helper</a></li>
<li><a class="reference internal" href="#a-working-email-tag-helper" id="id4">A working email Tag Helper</a></li>
<li><a class="reference internal" href="#the-bold-tag-helper" id="id5">The bold Tag Helper</a></li>
<li><a class="reference internal" href="#web-site-information-tag-helper" id="id6">Web site information Tag Helper</a></li>
<li><a class="reference internal" href="#condition-tag-helper" id="id7">Condition Tag Helper</a></li>
<li><a class="reference internal" href="#inspecting-and-retrieving-child-content" id="id8">Inspecting and retrieving child content</a></li>
</ul>
</div>
<p><a class="reference external" href="https://github.com/aspnet/Docs/tree/master/aspnet/mvc/views/tag-helpers/authoring/sample">View or download sample code</a></p>
<div class="section" id="getting-started-with-tag-helpers">
<h2><a class="toc-backref" href="#id2">Getting started with Tag Helpers</a><a class="headerlink" href="#getting-started-with-tag-helpers" title="Permalink to this headline">Â¶</a></h2>
<p>This tutorial provides an introduction to programming Tag Helpers. <a class="reference internal" href="intro.html"><span class="doc">Introduction to Tag Helpers</span></a> describes the benefits that Tag Helpers provide.</p>
<p>A tag helper is any class that implements the <code class="docutils literal"><span class="pre">ITagHelper</span></code> interface. However, when you author a tag helper, you generally derive from <code class="docutils literal"><span class="pre">TagHelper</span></code>, doing so gives you access to the <code class="docutils literal"><span class="pre">Process</span></code> method. We will introduce the <code class="docutils literal"><span class="pre">TagHelper</span></code> methods and properties as we use them in this tutorial.</p>
<ol class="arabic simple">
<li>Create a new ASP.NET Core project called <strong>AuthoringTagHelpers</strong>. You won&#8217;t need authentication for this project.</li>
<li>Create a folder to hold the Tag Helpers called <em>TagHelpers</em>. The <em>TagHelpers</em> folder is <em>not</em> required, but it is a reasonable convention. Now let&#8217;s get started writing some simple tag helpers.</li>
</ol>
</div>
<div class="section" id="starting-the-email-tag-helper">
<h2><a class="toc-backref" href="#id3">Starting the email Tag Helper</a><a class="headerlink" href="#starting-the-email-tag-helper" title="Permalink to this headline">Â¶</a></h2>
<p>In this section we will write a tag helper that updates an email tag. For example:</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">email</span><span class="p">&gt;</span>Support<span class="p">&lt;/</span><span class="nt">email</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The server will use our email tag helper to convert that markup into the following:</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;mailto:Support@contoso.com&quot;</span><span class="p">&gt;</span>Support@contoso.com<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>That is, an anchor tag that makes this an email link. You might want to do this if you are writing a blog engine and need it to send email for marketing, support, and other contacts, all to the same domain.</p>
<ol class="arabic simple">
<li>Add the following <code class="docutils literal"><span class="pre">EmailTagHelper</span></code> class to the <em>TagHelpers</em> folder.</li>
</ol>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">Microsoft.AspNetCore.Razor.TagHelpers</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">AuthoringTagHelpers.TagHelpers</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">EmailTagHelper</span> <span class="p">:</span> <span class="n">TagHelper</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Process</span><span class="p">(</span><span class="n">TagHelperContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">TagHelperOutput</span> <span class="n">output</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">output</span><span class="p">.</span><span class="n">TagName</span> <span class="p">=</span> <span class="s">&quot;a&quot;</span><span class="p">;</span>    <span class="c1">// Replaces &lt;email&gt; with &lt;a&gt; tag</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Notes:</strong></p>
<ul class="simple">
<li>Tag helpers use a naming convention that targets elements of the root class name (minus the <em>TagHelper</em> portion of the class name). In this example, the root name of <strong>Email</strong>TagHelper is <em>email</em>, so the <code class="docutils literal"><span class="pre">&lt;email&gt;</span></code> tag will be targeted. This naming convention should work for most tag helpers, later on I&#8217;ll show how to override it.</li>
<li>The <code class="docutils literal"><span class="pre">EmailTagHelper</span></code> class derives from <code class="docutils literal"><span class="pre">TagHelper</span></code>. The <code class="docutils literal"><span class="pre">TagHelper</span></code> class provides methods and properties for writing Tag Helpers.</li>
<li>The  overridden <code class="docutils literal"><span class="pre">Process</span></code> method controls what the tag helper does when executed. The <code class="docutils literal"><span class="pre">TagHelper</span></code> class also provides an asynchronous version (<code class="docutils literal"><span class="pre">ProcessAsync</span></code>) with the same parameters.</li>
<li>The context parameter to <code class="docutils literal"><span class="pre">Process</span></code> (and <code class="docutils literal"><span class="pre">ProcessAsync</span></code>) contains information associated with the execution of the current HTML tag.</li>
<li>The output parameter to <code class="docutils literal"><span class="pre">Process</span></code> (and <code class="docutils literal"><span class="pre">ProcessAsync</span></code>) contains a stateful HTML element representative of the original source used to generate an HTML tag and content.</li>
<li>Our class name has a suffix of <strong>TagHelper</strong>, which is <em>not</em> required, but it&#8217;s considered a best practice convention. You could declare the class as:</li>
</ul>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">class</span> <span class="nc">Email</span> <span class="p">:</span> <span class="n">TagHelper</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>To make the <code class="docutils literal"><span class="pre">EmailTagHelper</span></code> class available to all our Razor views, we will add the <code class="docutils literal"><span class="pre">addTagHelper</span></code> directive to the <em>Views/_ViewImports.cshtml</em> file:</li>
</ol>
<div class="highlight-html"><div class="highlight"><pre><span></span>@using AuthoringTagHelpers
<span class="hll">@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
</span><span class="hll">@addTagHelper &quot;AuthoringTagHelpers.TagHelpers.EmailTagHelper, AuthoringTagHelpers&quot;
</span></pre></div>
</div>
<p>The code above uses the wildcard syntax to specify all the tag helpers in our assembly will be available. The first string after <code class="docutils literal"><span class="pre">&#64;addTagHelper</span></code> specifies the tag helper to load (we are using &#8220;*&#8221; for all tag helpers), and the second string &#8220;AuthoringTagHelpers&#8221; specifies the assembly the tag helper is in. Also, note that the second line brings in the ASP.NET Core MVC tag helpers using the wildcard syntax (those helpers are discussed in <a class="reference internal" href="intro.html"><span class="doc">Introduction to Tag Helpers</span></a>.) It&#8217;s the <code class="docutils literal"><span class="pre">&#64;addTagHelper</span></code> directive that makes the tag helper available to the Razor view. Alternatively, you can provide the fully qualified name (FQN) of a tag helper as shown below:</p>
<div class="highlight-html"><div class="highlight"><pre><span></span>@using AuthoringTagHelpers
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
<span class="hll">@addTagHelper &quot;AuthoringTagHelpers.TagHelpers3.EmailTagHelper, AuthoringTagHelpers&quot;
</span></pre></div>
</div>
<p>To add a tag helper to a view using a FQN, you first add the FQN (<code class="docutils literal"><span class="pre">AuthoringTagHelpers.TagHelpers.EmailTagHelper</span></code>), and then the assembly name (<em>AuthoringTagHelpers</em>). Most developers will prefer to use the wildcard syntax. <a class="reference internal" href="intro.html"><span class="doc">Introduction to Tag Helpers</span></a> goes into detail on tag helper adding, removing, hierarchy, and wildcard syntax.</p>
<ol class="arabic simple" start="3">
<li>Update the markup in the <em>Views/Home/Contact.cshtml</em> file with these changes:</li>
</ol>
<div class="highlight-html"><div class="highlight"><pre><span></span>@{
    ViewData[&quot;Title&quot;] = &quot;Contact&quot;;
}
<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>@ViewData[&quot;Title&quot;].<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>@ViewData[&quot;Message&quot;]<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">address</span><span class="p">&gt;</span>
    One Microsoft Way<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    Redmond, WA 98052<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">abbr</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Phone&quot;</span><span class="p">&gt;</span>P:<span class="p">&lt;/</span><span class="nt">abbr</span><span class="p">&gt;</span>
    425.555.0100
<span class="p">&lt;/</span><span class="nt">address</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">address</span><span class="p">&gt;</span>
<span class="hll">    <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Support:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">email</span><span class="p">&gt;</span>Support<span class="p">&lt;/</span><span class="nt">email</span><span class="p">&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
</span><span class="hll">    <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Marketing:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">email</span><span class="p">&gt;</span>Marketing<span class="p">&lt;/</span><span class="nt">email</span><span class="p">&gt;</span>
</span><span class="p">&lt;/</span><span class="nt">address</span><span class="p">&gt;</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>Run the app and use your favorite browser to view the HTML source so you can verify that the email tags are replaced with anchor markup (For example, <code class="docutils literal"><span class="pre">&lt;a&gt;Support&lt;/a&gt;</span></code>). <em>Support</em> and <em>Marketing</em> are rendered as a links, but they don&#8217;t have an <code class="docutils literal"><span class="pre">href</span></code> attribute to make them functional. We&#8217;ll fix that in the next section.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Like <a class="reference external" href="http://www.w3.org/TR/html-markup/documents.html#case-insensitivity">HTML tags and attributes</a>, tags, class names and attributes in Razor, and C# are not case-sensitive.</p>
</div>
</div>
<div class="section" id="a-working-email-tag-helper">
<h2><a class="toc-backref" href="#id4">A working email Tag Helper</a><a class="headerlink" href="#a-working-email-tag-helper" title="Permalink to this headline">Â¶</a></h2>
<p>In this section, we&#8217;ll update the <code class="docutils literal"><span class="pre">EmailTagHelper</span></code> so that it will create a valid anchor tag for email. We&#8217;ll update it to take information from a Razor view (in the form of a <code class="docutils literal"><span class="pre">mail-to</span></code> attribute) and use that in generating the anchor.</p>
<p>Update the <code class="docutils literal"><span class="pre">EmailTagHelper</span></code> class with the following:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">class</span> <span class="nc">EmailTagHelper</span> <span class="p">:</span> <span class="n">TagHelper</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">const</span> <span class="kt">string</span> <span class="n">EmailDomain</span> <span class="p">=</span> <span class="s">&quot;contoso.com&quot;</span><span class="p">;</span>

    <span class="c1">// Can be passed via &lt;email mail-to=&quot;...&quot; /&gt;. </span>
    <span class="c1">// Pascal case gets translated into lower-kebab-case.</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">MailTo</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Process</span><span class="p">(</span><span class="n">TagHelperContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">TagHelperOutput</span> <span class="n">output</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">output</span><span class="p">.</span><span class="n">TagName</span> <span class="p">=</span> <span class="s">&quot;a&quot;</span><span class="p">;</span>    <span class="c1">// Replaces &lt;email&gt; with &lt;a&gt; tag</span>

        <span class="kt">var</span> <span class="n">address</span> <span class="p">=</span> <span class="n">MailTo</span> <span class="p">+</span> <span class="s">&quot;@&quot;</span> <span class="p">+</span> <span class="n">EmailDomain</span><span class="p">;</span>
        <span class="n">output</span><span class="p">.</span><span class="n">Attributes</span><span class="p">.</span><span class="n">SetAttribute</span><span class="p">(</span><span class="s">&quot;href&quot;</span><span class="p">,</span> <span class="s">&quot;mailto:&quot;</span> <span class="p">+</span> <span class="n">address</span><span class="p">);</span>
        <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">SetContent</span><span class="p">(</span><span class="n">address</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Notes:</strong></p>
<ul class="simple">
<li>Pascal-cased class and property names for tag helpers are translated into their <a class="reference external" href="http://stackoverflow.com/questions/11273282/whats-the-name-for-dash-separated-case/12273101#12273101">lower kebab case</a>. Therefore, to use the <code class="docutils literal"><span class="pre">MailTo</span></code> attribute, you&#8217;ll use <code class="docutils literal"><span class="pre">&lt;email</span> <span class="pre">mail-to=&quot;value&quot;/&gt;</span></code> equivalent.</li>
<li>The last line sets the completed content for our minimally functional tag helper.</li>
<li>The highlighted line shows the syntax for adding attributes:</li>
</ul>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Process</span><span class="p">(</span><span class="n">TagHelperContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">TagHelperOutput</span> <span class="n">output</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">output</span><span class="p">.</span><span class="n">TagName</span> <span class="p">=</span> <span class="s">&quot;a&quot;</span><span class="p">;</span>    <span class="c1">// Replaces &lt;email&gt; with &lt;a&gt; tag</span>

    <span class="kt">var</span> <span class="n">address</span> <span class="p">=</span> <span class="n">MailTo</span> <span class="p">+</span> <span class="s">&quot;@&quot;</span> <span class="p">+</span> <span class="n">EmailDomain</span><span class="p">;</span>
<span class="hll">    <span class="n">output</span><span class="p">.</span><span class="n">Attributes</span><span class="p">.</span><span class="n">SetAttribute</span><span class="p">(</span><span class="s">&quot;href&quot;</span><span class="p">,</span> <span class="s">&quot;mailto:&quot;</span> <span class="p">+</span> <span class="n">address</span><span class="p">);</span>
</span>    <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">SetContent</span><span class="p">(</span><span class="n">address</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>That approach works for the attribute &#8220;href&#8221; as long as it doesn&#8217;t currently exist in the attributes collection. You can also use the <code class="docutils literal"><span class="pre">output.Attributes.Add</span></code> method to add a tag helper attribute to the end of the collection of tag attributes.</p>
<ol class="arabic simple" start="3">
<li>Update the markup in the <em>Views/Home/Contact.cshtml</em> file with these changes:</li>
</ol>
<div class="highlight-html"><div class="highlight"><pre><span></span>@{
    ViewData[&quot;Title&quot;] = &quot;Contact Copy&quot;;
}
<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>@ViewData[&quot;Title&quot;].<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>@ViewData[&quot;Message&quot;]<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">address</span><span class="p">&gt;</span>
    One Microsoft Way Copy Version <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    Redmond, WA 98052-6399<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">abbr</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Phone&quot;</span><span class="p">&gt;</span>P:<span class="p">&lt;/</span><span class="nt">abbr</span><span class="p">&gt;</span>
    425.555.0100
<span class="p">&lt;/</span><span class="nt">address</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">address</span><span class="p">&gt;</span>
<span class="hll">    <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Support:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">email</span> <span class="na">mail-to</span><span class="o">=</span><span class="s">&quot;Support&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">email</span><span class="p">&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
</span><span class="hll">    <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Marketing:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">email</span> <span class="na">mail-to</span><span class="o">=</span><span class="s">&quot;Marketing&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">email</span><span class="p">&gt;</span>
</span><span class="p">&lt;/</span><span class="nt">address</span><span class="p">&gt;</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>Run the app and verify that it generates the correct links.</li>
</ol>
<p><strong>Note:</strong> If you were to write the email tag self-closing (<code class="docutils literal"><span class="pre">&lt;email</span> <span class="pre">mail-to=&quot;Rick&quot;</span> <span class="pre">/&gt;</span></code>), the final output would also be self-closing. To enable the ability to write the tag with only a start tag (<code class="docutils literal"><span class="pre">&lt;email</span> <span class="pre">mail-to=&quot;Rick&quot;&gt;</span></code>) you must decorate the class with the following:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="hll"><span class="na">[HtmlTargetElement(&quot;email&quot;, TagStructure = TagStructure.WithoutEndTag)]</span> 
</span><span class="k">public</span> <span class="k">class</span> <span class="nc">EmailVoidTagHelper</span> <span class="p">:</span> <span class="n">TagHelper</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">const</span> <span class="kt">string</span> <span class="n">EmailDomain</span> <span class="p">=</span> <span class="s">&quot;contoso.com&quot;</span><span class="p">;</span>
    <span class="c1">// Code removed for brevity</span>
</pre></div>
</div>
<p>With a self-closing email tag helper, the output would be <code class="docutils literal"><span class="pre">&lt;a</span> <span class="pre">href=&quot;mailto:Rick&#64;contoso.com&quot;</span> <span class="pre">/&gt;</span></code>. Self-closing anchor tags are not valid HTML, so you wouldn&#8217;t want to create one, but you might want to create a tag helper that is self-closing. Tag helpers set the type of the <code class="docutils literal"><span class="pre">TagMode</span></code> property after reading a tag.</p>
<div class="section" id="an-asynchronous-email-helper">
<h3>An asynchronous email helper<a class="headerlink" href="#an-asynchronous-email-helper" title="Permalink to this headline">Â¶</a></h3>
<p>In this section we&#8217;ll write an asynchronous email helper.</p>
<ol class="arabic simple">
<li>Replace the <code class="docutils literal"><span class="pre">EmailTagHelper</span></code> class with the following code:</li>
</ol>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">class</span> <span class="nc">EmailTagHelper</span> <span class="p">:</span> <span class="n">TagHelper</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">const</span> <span class="kt">string</span> <span class="n">EmailDomain</span> <span class="p">=</span> <span class="s">&quot;contoso.com&quot;</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">ProcessAsync</span><span class="p">(</span><span class="n">TagHelperContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">TagHelperOutput</span> <span class="n">output</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">output</span><span class="p">.</span><span class="n">TagName</span> <span class="p">=</span> <span class="s">&quot;a&quot;</span><span class="p">;</span>                                 <span class="c1">// Replaces &lt;email&gt; with &lt;a&gt; tag</span>
        <span class="kt">var</span> <span class="n">content</span> <span class="p">=</span> <span class="k">await</span> <span class="n">output</span><span class="p">.</span><span class="n">GetChildContentAsync</span><span class="p">();</span>
        <span class="kt">var</span> <span class="n">target</span> <span class="p">=</span> <span class="n">content</span><span class="p">.</span><span class="n">GetContent</span><span class="p">()</span> <span class="p">+</span> <span class="s">&quot;@&quot;</span> <span class="p">+</span> <span class="n">EmailDomain</span><span class="p">;</span>
        <span class="n">output</span><span class="p">.</span><span class="n">Attributes</span><span class="p">.</span><span class="n">SetAttribute</span><span class="p">(</span><span class="s">&quot;href&quot;</span><span class="p">,</span> <span class="s">&quot;mailto:&quot;</span> <span class="p">+</span> <span class="n">target</span><span class="p">);</span>
        <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">SetContent</span><span class="p">(</span><span class="n">target</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Notes:</strong></p>
<ul class="simple">
<li>This version uses the asynchronous <code class="docutils literal"><span class="pre">ProcessAsync</span></code> method. The asynchronous <code class="docutils literal"><span class="pre">GetChildContentAsync</span></code> returns a <code class="docutils literal"><span class="pre">Task</span></code> containing the <code class="docutils literal"><span class="pre">TagHelperContent</span></code>.</li>
<li>We use the <code class="docutils literal"><span class="pre">output</span></code> parameter to get contents of the HTML element.</li>
</ul>
<ol class="arabic simple" start="2">
<li>Make the following change to the <em>Views/Home/Contact.cshtml</em> file so the tag helper can get the target email.</li>
</ol>
<div class="highlight-html"><div class="highlight"><pre><span></span>@{
    ViewData[&quot;Title&quot;] = &quot;Contact&quot;;
}
<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>@ViewData[&quot;Title&quot;].<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>@ViewData[&quot;Message&quot;]<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">address</span><span class="p">&gt;</span>
    One Microsoft Way<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    Redmond, WA 98052<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">abbr</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Phone&quot;</span><span class="p">&gt;</span>P:<span class="p">&lt;/</span><span class="nt">abbr</span><span class="p">&gt;</span>
    425.555.0100
<span class="p">&lt;/</span><span class="nt">address</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">address</span><span class="p">&gt;</span>
<span class="hll">    <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Support:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">email</span><span class="p">&gt;</span>Support<span class="p">&lt;/</span><span class="nt">email</span><span class="p">&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
</span><span class="hll">    <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Marketing:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">email</span><span class="p">&gt;</span>Marketing<span class="p">&lt;/</span><span class="nt">email</span><span class="p">&gt;</span>
</span><span class="p">&lt;/</span><span class="nt">address</span><span class="p">&gt;</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Run the app and verify that it generates valid email links.</li>
</ol>
</div>
</div>
<div class="section" id="the-bold-tag-helper">
<h2><a class="toc-backref" href="#id5">The bold Tag Helper</a><a class="headerlink" href="#the-bold-tag-helper" title="Permalink to this headline">Â¶</a></h2>
<ol class="arabic simple">
<li>Add the following <code class="docutils literal"><span class="pre">BoldTagHelper</span></code> class to the <em>TagHelpers</em> folder.</li>
</ol>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">Microsoft.AspNetCore.Razor.TagHelpers</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">AuthoringTagHelpers.TagHelpers</span>
<span class="p">{</span>
<span class="na">    [HtmlTargetElement(Attributes = &quot;bold&quot;)]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">BoldTagHelper</span> <span class="p">:</span> <span class="n">TagHelper</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Process</span><span class="p">(</span><span class="n">TagHelperContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">TagHelperOutput</span> <span class="n">output</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">output</span><span class="p">.</span><span class="n">Attributes</span><span class="p">.</span><span class="n">RemoveAll</span><span class="p">(</span><span class="s">&quot;bold&quot;</span><span class="p">);</span>
            <span class="n">output</span><span class="p">.</span><span class="n">PreContent</span><span class="p">.</span><span class="n">SetHtmlContent</span><span class="p">(</span><span class="s">&quot;&lt;strong&gt;&quot;</span><span class="p">);</span>
            <span class="n">output</span><span class="p">.</span><span class="n">PostContent</span><span class="p">.</span><span class="n">SetHtmlContent</span><span class="p">(</span><span class="s">&quot;&lt;/strong&gt;&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * public IActionResult About()</span>
<span class="cm">{</span>
<span class="cm">    ViewData[&quot;Message&quot;] = &quot;Your application description page.&quot;;</span>
<span class="cm">    return View(&quot;AboutBoldOnly&quot;);</span>
<span class="cm">    // return View();</span>
<span class="cm">}</span>
<span class="cm">*/</span>
</pre></div>
</div>
<p><strong>Notes:</strong></p>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">[HtmlTargetElement]</span></code> attribute passes an attribute parameter that specifies that any HTML element that contains an HTML attribute named &#8220;bold&#8221; will match, and the <code class="docutils literal"><span class="pre">Process</span></code> override method in the class will run. In our sample, the <code class="docutils literal"><span class="pre">Process</span></code>  method removes the &#8220;bold&#8221; attribute and surrounds the containing markup with <code class="docutils literal"><span class="pre">&lt;strong&gt;&lt;/strong&gt;</span></code>.</li>
<li>Because we don&#8217;t want to replace the existing tag content, we must write the opening <code class="docutils literal"><span class="pre">&lt;strong&gt;</span></code> tag with the <code class="docutils literal"><span class="pre">PreContent.SetHtmlContent</span></code> method and the closing <code class="docutils literal"><span class="pre">&lt;/strong&gt;</span></code> tag with the <code class="docutils literal"><span class="pre">PostContent.SetHtmlContent</span></code> method.</li>
</ul>
<ol class="arabic simple" start="2">
<li>Modify the <em>About.cshtml</em> view to contain a <code class="docutils literal"><span class="pre">bold</span></code> attribute value. The completed code is shown below.</li>
</ol>
<div class="highlight-html"><div class="highlight"><pre><span></span>@{
    ViewData[&quot;Title&quot;] = &quot;About&quot;;
}
<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>@ViewData[&quot;Title&quot;].<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>@ViewData[&quot;Message&quot;]<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>

<span class="hll"><span class="p">&lt;</span><span class="nt">p</span> <span class="na">bold</span><span class="p">&gt;</span>Use this area to provide additional information.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span>
<span class="p">&lt;</span><span class="nt">bold</span><span class="p">&gt;</span> Is this bold?<span class="p">&lt;/</span><span class="nt">bold</span><span class="p">&gt;</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Run the app. You can use your favorite browser to inspect the source and verify the markup.</li>
</ol>
<p>The <code class="docutils literal"><span class="pre">[HtmlTargetElement]</span></code> attribute above only targets HTML markup that provides an attribute name of &#8220;bold&#8221;. The <code class="docutils literal"><span class="pre">&lt;bold&gt;</span></code> element was not modified by the tag helper.</p>
<ol class="arabic simple" start="4">
<li>Comment out the <code class="docutils literal"><span class="pre">[HtmlTargetElement]</span></code> attribute line and it will default to targeting <code class="docutils literal"><span class="pre">&lt;bold&gt;</span></code> tags, that is, HTML markup of the form <code class="docutils literal"><span class="pre">&lt;bold&gt;</span></code>. Remember, the default naming convention will match the class name <strong>Bold</strong>TagHelper to <code class="docutils literal"><span class="pre">&lt;bold&gt;</span></code> tags.</li>
<li>Run the app and verify that the <code class="docutils literal"><span class="pre">&lt;bold&gt;</span></code> tag is processed by the tag helper.</li>
</ol>
<p>Decorating a class with multiple <code class="docutils literal"><span class="pre">[HtmlTargetElement]</span></code> attributes results in a logical-OR of the targets. For example, using the code below, a bold tag or a bold attribute will match.</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="hll"><span class="na">[HtmlTargetElement(&quot;bold&quot;)]</span>
</span><span class="hll"><span class="na">[HtmlTargetElement(Attributes = &quot;bold&quot;)]</span>
</span><span class="k">public</span> <span class="k">class</span> <span class="nc">BoldTagHelper</span> <span class="p">:</span> <span class="n">TagHelper</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Process</span><span class="p">(</span><span class="n">TagHelperContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">TagHelperOutput</span> <span class="n">output</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">output</span><span class="p">.</span><span class="n">Attributes</span><span class="p">.</span><span class="n">RemoveAll</span><span class="p">(</span><span class="s">&quot;bold&quot;</span><span class="p">);</span>
        <span class="n">output</span><span class="p">.</span><span class="n">PreContent</span><span class="p">.</span><span class="n">SetHtmlContent</span><span class="p">(</span><span class="s">&quot;&lt;strong&gt;&quot;</span><span class="p">);</span>
        <span class="n">output</span><span class="p">.</span><span class="n">PostContent</span><span class="p">.</span><span class="n">SetHtmlContent</span><span class="p">(</span><span class="s">&quot;&lt;/strong&gt;&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When multiple attributes are added to the same statement, the runtime treats them as a logical-AND. For example, in the code below, an HTML element must be named &#8220;bold&#8221; with an attribute named &#8220;bold&#8221; ( &lt;bold bold /&gt; ) to match.</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="na">[HtmlTargetElement(&quot;bold&quot;, Attributes = &quot;bold&quot;)]</span>
</pre></div>
</div>
<p>You can also use the <code class="docutils literal"><span class="pre">[HtmlTargetElement]</span></code> to change the name of the targeted element. For example if you wanted the <code class="docutils literal"><span class="pre">BoldTagHelper</span></code> to target <code class="docutils literal"><span class="pre">&lt;MyBold&gt;</span></code> tags, you would use the following attribute:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="na">[HtmlTargetElement(&quot;MyBold&quot;)]</span>
</pre></div>
</div>
</div>
<div class="section" id="web-site-information-tag-helper">
<h2><a class="toc-backref" href="#id6">Web site information Tag Helper</a><a class="headerlink" href="#web-site-information-tag-helper" title="Permalink to this headline">Â¶</a></h2>
<ol class="arabic simple">
<li>Add a <em>Models</em> folder.</li>
<li>Add the following <code class="docutils literal"><span class="pre">WebsiteContext</span></code> class to the <em>Models</em> folder:</li>
</ol>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">AuthoringTagHelpers.Models</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">WebsiteContext</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">Version</span> <span class="n">Version</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">CopyrightYear</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="kt">bool</span> <span class="n">Approved</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">TagsToShow</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Add the following <code class="docutils literal"><span class="pre">WebsiteInformationTagHelper</span></code> class to the <em>TagHelpers</em> folder.</li>
</ol>
<div class="highlight-none"><div class="highlight"><pre><span></span>using System;
using AuthoringTagHelpers.Models;
using Microsoft.AspNetCore.Razor.TagHelpers;

namespace AuthoringTagHelpers.TagHelpers
{
    public class WebsiteInformationTagHelper : TagHelper
    {
        public WebsiteContext Info { get; set; }

      public override void Process(TagHelperContext context, TagHelperOutput output)
      {
         output.TagName = &quot;section&quot;;
         output.Content.SetHtmlContent(
$@&quot;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Version:&lt;/strong&gt; {Info.Version}&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Copyright Year:&lt;/strong&gt; {Info.CopyrightYear}&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Approved:&lt;/strong&gt; {Info.Approved}&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Number of tags to show:&lt;/strong&gt; {Info.TagsToShow}&lt;/li&gt;&lt;/ul&gt;&quot;);
         output.TagMode = TagMode.StartTagAndEndTag;
      }
   }
}
</pre></div>
</div>
<p><strong>Notes:</strong></p>
<ul class="simple">
<li>As mentioned previously, tag helpers translates Pascal-cased C# class names and properties for tag helpers into <a class="reference external" href="http://c2.com/cgi/wiki?KebabCase">lower kebab case</a>. Therefore, to use the <code class="docutils literal"><span class="pre">WebsiteInformationTagHelper</span></code> in Razor, you&#8217;ll write <code class="docutils literal"><span class="pre">&lt;website-information</span> <span class="pre">/&gt;</span></code>.</li>
<li>We are not explicitly identifying the target element with the <code class="docutils literal"><span class="pre">[HtmlTargetElement]</span></code> attribute, so the default of <code class="docutils literal"><span class="pre">website-information</span></code> will be targeted. If you applied the following attribute (note it&#8217;s not kebab case but matches the class name):</li>
</ul>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="na">[HtmlTargetElement(&quot;WebsiteInformation&quot;)]</span>
</pre></div>
</div>
<p>The lower kebab case tag <code class="docutils literal"><span class="pre">&lt;website-information</span> <span class="pre">/&gt;</span></code> would not match. If you want use the <code class="docutils literal"><span class="pre">[HtmlTargetElement]</span></code> attribute, you would use kebab case as shown below:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="na">[HtmlTargetElement(&quot;Website-Information&quot;)]</span>
</pre></div>
</div>
<ul class="simple">
<li>Elements that are self-closing have no content. For this example, the Razor markup will use a self-closing tag, but the tag helper will be creating a <a class="reference external" href="http://www.w3.org/TR/html5/sections.html#the-section-element">section</a> element (which is not self-closing and we are writing content inside the <code class="docutils literal"><span class="pre">section</span></code> element). Therefore, we need to set <code class="docutils literal"><span class="pre">TagMode</span></code> to <code class="docutils literal"><span class="pre">StartTagAndEndTag</span></code> to write output. Alternatively, you can comment out the line setting <code class="docutils literal"><span class="pre">TagMode</span></code> and write markup with a closing tag. (Example markup is provided later in this tutorial.)</li>
<li>The <code class="docutils literal"><span class="pre">$</span></code> (dollar sign) in the following line uses an <a class="reference external" href="https://msdn.microsoft.com/en-us/library/Dn961160.aspx">interpolated string</a>:</li>
</ul>
<div class="highlight-html"><div class="highlight"><pre><span></span>$@&quot;<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Version:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> {Info.Version}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li>Add the following markup to the <em>About.cshtml</em> view. The highlighted markup displays the web site information.</li>
</ol>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="hll">@using AuthoringTagHelpers.Models
</span>@{
    ViewData[&quot;Title&quot;] = &quot;About&quot;;
}
<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>@ViewData[&quot;Title&quot;].<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>@ViewData[&quot;Message&quot;]<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">p</span> <span class="na">bold</span><span class="p">&gt;</span>Use this area to provide additional information.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">bold</span><span class="p">&gt;</span> Is this bold?<span class="p">&lt;/</span><span class="nt">bold</span><span class="p">&gt;</span>

<span class="hll"><span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span> web site info <span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span><span class="hll"><span class="p">&lt;</span><span class="nt">website-information</span> <span class="na">info</span><span class="o">=</span><span class="s">&quot;new WebsiteContext {</span>
</span><span class="hll"><span class="s">                                    Version = new Version(1, 3),</span>
</span><span class="hll"><span class="s">                                    CopyrightYear = 1638,</span>
</span><span class="hll"><span class="s">                                    Approved = true,</span>
</span><span class="hll"><span class="s">                                    TagsToShow = 131 }&quot;</span> <span class="p">/&gt;</span>
</span></pre></div>
</div>
<p><strong>Note:</strong> In the Razor markup shown below:</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">website-information</span> <span class="na">info</span><span class="o">=</span><span class="s">&quot;new WebsiteContext {</span>
<span class="s">                                    Version = new Version(1, 3),</span>
<span class="s">                                    CopyrightYear = 1638,</span>
<span class="s">                                    Approved = true,</span>
<span class="s">                                    TagsToShow = 131 }&quot;</span> <span class="p">/&gt;</span>
</pre></div>
</div>
<p>Razor knows the <code class="docutils literal"><span class="pre">info</span></code> attribute is a class, not a string, and you want to write C# code. Any non-string tag helper attribute should be written without the <code class="docutils literal"><span class="pre">&#64;</span></code> character.</p>
<ol class="arabic simple" start="6">
<li>Run the app, and navigate to the About view to see the web site information.</li>
</ol>
<p><strong>Note:</strong></p>
<ul class="simple">
<li>You can use the following markup with a closing tag and remove the line with <code class="docutils literal"><span class="pre">TagMode.StartTagAndEndTag</span></code> in the tag helper:</li>
</ul>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">website-information</span> <span class="na">info</span><span class="o">=</span><span class="s">&quot;new WebsiteContext {</span>
<span class="s">                                    Version = new Version(1, 3),</span>
<span class="s">                                    CopyrightYear = 1638,</span>
<span class="s">                                    Approved = true,</span>
<span class="s">                                    TagsToShow = 131 }&quot;</span> <span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">website-information</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="condition-tag-helper">
<h2><a class="toc-backref" href="#id7">Condition Tag Helper</a><a class="headerlink" href="#condition-tag-helper" title="Permalink to this headline">Â¶</a></h2>
<p>The condition tag helper renders output when passed a true value.</p>
<ol class="arabic simple">
<li>Add the following <code class="docutils literal"><span class="pre">ConditionTagHelper</span></code> class to the <em>TagHelpers</em> folder.</li>
</ol>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">Microsoft.AspNetCore.Razor.TagHelpers</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">AuthoringTagHelpers.TagHelpers</span>
<span class="p">{</span>
<span class="na">    [HtmlTargetElement(Attributes = nameof(Condition))]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">ConditionTagHelper</span> <span class="p">:</span> <span class="n">TagHelper</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">bool</span> <span class="n">Condition</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Process</span><span class="p">(</span><span class="n">TagHelperContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">TagHelperOutput</span> <span class="n">output</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(!</span><span class="n">Condition</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">output</span><span class="p">.</span><span class="n">SuppressOutput</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Replace the contents of the <em>Views/Home/Index.cshtml</em> file with the following markup:</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@using</span> <span class="n">AuthoringTagHelpers</span><span class="o">.</span><span class="n">Models</span>
<span class="nd">@model</span> <span class="n">WebsiteContext</span>

<span class="o">@</span><span class="p">{</span>
    <span class="n">ViewData</span><span class="p">[</span><span class="s2">&quot;Title&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Home Page&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">h3</span><span class="o">&gt;</span><span class="n">Information</span> <span class="n">about</span> <span class="n">our</span> <span class="n">website</span> <span class="p">(</span><span class="n">outdated</span><span class="p">):</span><span class="o">&lt;/</span><span class="n">h3</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">Website</span><span class="o">-</span><span class="n">InforMation</span> <span class="n">info</span><span class="o">=</span><span class="n">Model</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">condition</span><span class="o">=</span><span class="s2">&quot;Model.Approved&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
            <span class="n">This</span> <span class="n">website</span> <span class="n">has</span> <span class="o">&lt;</span><span class="n">strong</span> <span class="n">surround</span><span class="o">=</span><span class="s2">&quot;em&quot;</span><span class="o">&gt;</span> <span class="nd">@Model</span><span class="o">.</span><span class="n">Approved</span> <span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;</span> <span class="n">been</span> <span class="n">approved</span> <span class="n">yet</span><span class="o">.</span>
            <span class="n">Visit</span> <span class="n">www</span><span class="o">.</span><span class="n">contoso</span><span class="o">.</span><span class="n">com</span> <span class="k">for</span> <span class="n">more</span> <span class="n">information</span><span class="o">.</span>
        <span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Replace the <code class="docutils literal"><span class="pre">Index</span></code> method in the <code class="docutils literal"><span class="pre">Home</span></code> controller with the following code:</li>
</ol>
<div class="highlight-c#"><div class="highlight"><pre><span></span>  <span class="k">public</span> <span class="n">IActionResult</span> <span class="nf">Index</span><span class="p">(</span><span class="kt">bool</span> <span class="n">approved</span> <span class="p">=</span> <span class="k">false</span><span class="p">)</span>
  <span class="p">{</span>
      <span class="k">return</span> <span class="nf">View</span><span class="p">(</span><span class="k">new</span> <span class="n">WebsiteContext</span>
      <span class="p">{</span>
          <span class="n">Approved</span> <span class="p">=</span> <span class="n">approved</span><span class="p">,</span>
          <span class="n">CopyrightYear</span> <span class="p">=</span> <span class="m">2015</span><span class="p">,</span>
          <span class="n">Version</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Version</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">7</span><span class="p">),</span>
          <span class="n">TagsToShow</span> <span class="p">=</span> <span class="m">20</span>
      <span class="p">});</span>
  <span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>Run the app and browse to the home page. The markup in the conditional <code class="docutils literal"><span class="pre">div</span></code> will not be rendered. Append the query string <code class="docutils literal"><span class="pre">?approved=true</span></code> to the URL (for example, http://localhost:1235/Home/Index?approved=true). <code class="docutils literal"><span class="pre">approved</span></code> is set to true and the conditional markup will be displayed.</li>
</ol>
<p><strong>Note:</strong> We use the <a class="reference external" href="https://msdn.microsoft.com/en-us/library/dn986596.aspx">nameof</a> operator to specify the attribute to target rather than specifying a string as we did with the bold tag helper:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="hll"><span class="na">[HtmlTargetElement(Attributes = nameof(Condition))]</span>
</span><span class="hll"> <span class="c1">//   [HtmlTargetElement(Attributes = &quot;condition&quot;)]</span>
</span> <span class="k">public</span> <span class="k">class</span> <span class="nc">ConditionTagHelper</span> <span class="p">:</span> <span class="n">TagHelper</span>
<span class="p">{</span>
<span class="hll">   <span class="k">public</span> <span class="kt">bool</span> <span class="n">Condition</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span>
   <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Process</span><span class="p">(</span><span class="n">TagHelperContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">TagHelperOutput</span> <span class="n">output</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="k">if</span> <span class="p">(!</span><span class="n">Condition</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">output</span><span class="p">.</span><span class="n">SuppressOutput</span><span class="p">();</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <a class="reference external" href="https://msdn.microsoft.com/en-us/library/dn986596.aspx">nameof</a> operator will protect the code should it ever be refactored (we might want to change the name to <code class="docutils literal"><span class="pre">RedCondition</span></code>).</p>
<div class="section" id="avoiding-tag-helper-conflicts">
<h3>Avoiding Tag Helper conflicts<a class="headerlink" href="#avoiding-tag-helper-conflicts" title="Permalink to this headline">Â¶</a></h3>
<p>In this section, we will write a pair of auto-linking tag helpers. The first will replace markup containing a URL starting with HTTP to an HTML anchor tag containing the same URL (and thus yielding a link to the URL). The second will do the same for a URL starting with WWW.</p>
<p>Because these two helpers are closely related and we may refactor them in the future, we&#8217;ll keep them in the same file.</p>
<ol class="arabic simple">
<li>Add the following <code class="docutils literal"><span class="pre">AutoLinker</span></code> class to the <em>TagHelpers</em> folder.</li>
</ol>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="na">[HtmlTargetElement(&quot;p&quot;)]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">AutoLinkerHttpTagHelper</span> <span class="p">:</span> <span class="n">TagHelper</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">ProcessAsync</span><span class="p">(</span><span class="n">TagHelperContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">TagHelperOutput</span> <span class="n">output</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">childContent</span> <span class="p">=</span> <span class="k">await</span> <span class="n">output</span><span class="p">.</span><span class="n">GetChildContentAsync</span><span class="p">();</span>
        <span class="c1">// Find Urls in the content and replace them with their anchor tag equivalent.</span>
        <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">SetHtmlContent</span><span class="p">(</span><span class="n">Regex</span><span class="p">.</span><span class="n">Replace</span><span class="p">(</span>
             <span class="n">childContent</span><span class="p">.</span><span class="n">GetContent</span><span class="p">(),</span>
             <span class="s">@&quot;\b(?:https?://)(\S+)\b&quot;</span><span class="p">,</span>
              <span class="s">&quot;&lt;a target=\&quot;_blank\&quot; href=\&quot;$0\&quot;&gt;$0&lt;/a&gt;&quot;</span><span class="p">));</span>  <span class="c1">// http link version}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Notes:</strong> The <code class="docutils literal"><span class="pre">AutoLinkerHttpTagHelper</span></code> class targets <code class="docutils literal"><span class="pre">p</span></code> elements and uses <a class="reference external" href="https://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx">Regex</a> to create the anchor.</p>
<ol class="arabic simple" start="2">
<li>Add the following markup to the end of the <em>Views/Home/Contact.cshtml</em> file:</li>
</ol>
<div class="highlight-html"><div class="highlight"><pre><span></span>@{
    ViewData[&quot;Title&quot;] = &quot;Contact&quot;;
}
<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>@ViewData[&quot;Title&quot;].<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>@ViewData[&quot;Message&quot;]<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">address</span><span class="p">&gt;</span>
    One Microsoft Way<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    Redmond, WA 98052<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">abbr</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Phone&quot;</span><span class="p">&gt;</span>P:<span class="p">&lt;/</span><span class="nt">abbr</span><span class="p">&gt;</span>
    425.555.0100
<span class="p">&lt;/</span><span class="nt">address</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">address</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Support:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">email</span><span class="p">&gt;</span>Support<span class="p">&lt;/</span><span class="nt">email</span><span class="p">&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Marketing:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;</span><span class="nt">email</span><span class="p">&gt;</span>Marketing<span class="p">&lt;/</span><span class="nt">email</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">address</span><span class="p">&gt;</span>

<span class="hll"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Visit us at http://docs.asp.net or at www.microsoft.com<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Run the app and verify that the tag helper renders the anchor correctly.</li>
<li>Update the <code class="docutils literal"><span class="pre">AutoLinker</span></code> class to include the <code class="docutils literal"><span class="pre">AutoLinkerWwwTagHelper</span></code> which will convert www text to an anchor tag that also contains the original www text. The updated code is highlighted below:</li>
</ol>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="na">[HtmlTargetElement(&quot;p&quot;)]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">AutoLinkerHttpTagHelper</span> <span class="p">:</span> <span class="n">TagHelper</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">ProcessAsync</span><span class="p">(</span><span class="n">TagHelperContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">TagHelperOutput</span> <span class="n">output</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">childContent</span> <span class="p">=</span> <span class="k">await</span> <span class="n">output</span><span class="p">.</span><span class="n">GetChildContentAsync</span><span class="p">();</span>
        <span class="c1">// Find Urls in the content and replace them with their anchor tag equivalent.</span>
        <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">SetHtmlContent</span><span class="p">(</span><span class="n">Regex</span><span class="p">.</span><span class="n">Replace</span><span class="p">(</span>
             <span class="n">childContent</span><span class="p">.</span><span class="n">GetContent</span><span class="p">(),</span>
             <span class="s">@&quot;\b(?:https?://)(\S+)\b&quot;</span><span class="p">,</span>
              <span class="s">&quot;&lt;a target=\&quot;_blank\&quot; href=\&quot;$0\&quot;&gt;$0&lt;/a&gt;&quot;</span><span class="p">));</span>  <span class="c1">// http link version}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="hll"><span class="na">[HtmlTargetElement(&quot;p&quot;)]</span>
</span><span class="hll"><span class="k">public</span> <span class="k">class</span> <span class="nc">AutoLinkerWwwTagHelper</span> <span class="p">:</span> <span class="n">TagHelper</span>
</span><span class="hll"><span class="p">{</span>
</span><span class="hll">    <span class="k">public</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">ProcessAsync</span><span class="p">(</span><span class="n">TagHelperContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">TagHelperOutput</span> <span class="n">output</span><span class="p">)</span>
</span><span class="hll">    <span class="p">{</span>
</span><span class="hll">        <span class="kt">var</span> <span class="n">childContent</span> <span class="p">=</span> <span class="k">await</span> <span class="n">output</span><span class="p">.</span><span class="n">GetChildContentAsync</span><span class="p">();</span>
</span><span class="hll">        <span class="c1">// Find Urls in the content and replace them with their anchor tag equivalent.</span>
</span><span class="hll">        <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">SetHtmlContent</span><span class="p">(</span><span class="n">Regex</span><span class="p">.</span><span class="n">Replace</span><span class="p">(</span>
</span><span class="hll">            <span class="n">childContent</span><span class="p">.</span><span class="n">GetContent</span><span class="p">(),</span>
</span><span class="hll">             <span class="s">@&quot;\b(www\.)(\S+)\b&quot;</span><span class="p">,</span>
</span><span class="hll">             <span class="s">&quot;&lt;a target=\&quot;_blank\&quot; href=\&quot;http://$0\&quot;&gt;$0&lt;/a&gt;&quot;</span><span class="p">));</span>  <span class="c1">// www version</span>
</span><span class="hll">    <span class="p">}</span>
</span><span class="hll"><span class="p">}</span>
</span></pre></div>
</div>
<ol class="arabic simple" start="5">
<li>Run the app. Notice the www text is rendered as a link but the HTTP text is not. If you put a break point in both classes, you can see that the HTTP tag helper class runs first. The problem is that the tag helper output is cached, and when the WWW tag helper is run, it overwrites the cached output from the HTTP tag helper. Later in the tutorial we&#8217;ll see how to control the order that tag helpers run in. We&#8217;ll fix the code with the following:</li>
</ol>
<div class="highlight-c#"><div class="highlight"><pre><span></span>    <span class="k">public</span> <span class="k">class</span> <span class="nc">AutoLinkerHttpTagHelper</span> <span class="p">:</span> <span class="n">TagHelper</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">ProcessAsync</span><span class="p">(</span><span class="n">TagHelperContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">TagHelperOutput</span> <span class="n">output</span><span class="p">)</span>
        <span class="p">{</span>
<span class="hll">            <span class="kt">var</span> <span class="n">childContent</span> <span class="p">=</span> <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">IsModified</span> <span class="p">?</span> <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">GetContent</span><span class="p">()</span> <span class="p">:</span>
</span><span class="hll">                <span class="p">(</span><span class="k">await</span> <span class="n">output</span><span class="p">.</span><span class="n">GetChildContentAsync</span><span class="p">()).</span><span class="n">GetContent</span><span class="p">();</span>
</span>
            <span class="c1">// Find Urls in the content and replace them with their anchor tag equivalent.</span>
            <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">SetHtmlContent</span><span class="p">(</span><span class="n">Regex</span><span class="p">.</span><span class="n">Replace</span><span class="p">(</span>
<span class="hll">                 <span class="n">childContent</span><span class="p">,</span>
</span>                 <span class="s">@&quot;\b(?:https?://)(\S+)\b&quot;</span><span class="p">,</span>
                  <span class="s">&quot;&lt;a target=\&quot;_blank\&quot; href=\&quot;$0\&quot;&gt;$0&lt;/a&gt;&quot;</span><span class="p">));</span>  <span class="c1">// http link version}</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="na">    [HtmlTargetElement(&quot;p&quot;)]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">AutoLinkerWwwTagHelper</span> <span class="p">:</span> <span class="n">TagHelper</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">ProcessAsync</span><span class="p">(</span><span class="n">TagHelperContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">TagHelperOutput</span> <span class="n">output</span><span class="p">)</span>
        <span class="p">{</span>
<span class="hll">            <span class="kt">var</span> <span class="n">childContent</span> <span class="p">=</span> <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">IsModified</span> <span class="p">?</span> <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">GetContent</span><span class="p">()</span> <span class="p">:</span> 
</span><span class="hll">                <span class="p">(</span><span class="k">await</span> <span class="n">output</span><span class="p">.</span><span class="n">GetChildContentAsync</span><span class="p">()).</span><span class="n">GetContent</span><span class="p">();</span>
</span>  
            <span class="c1">// Find Urls in the content and replace them with their anchor tag equivalent.</span>
            <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">SetHtmlContent</span><span class="p">(</span><span class="n">Regex</span><span class="p">.</span><span class="n">Replace</span><span class="p">(</span>
<span class="hll">                 <span class="n">childContent</span><span class="p">,</span>
</span>                 <span class="s">@&quot;\b(www\.)(\S+)\b&quot;</span><span class="p">,</span>
                 <span class="s">&quot;&lt;a target=\&quot;_blank\&quot; href=\&quot;http://$0\&quot;&gt;$0&lt;/a&gt;&quot;</span><span class="p">));</span>  <span class="c1">// www version</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Note:</strong> In the first edition of the auto-linking tag helpers, we got the content of the target with the following code:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="kt">var</span> <span class="n">childContent</span> <span class="p">=</span> <span class="k">await</span> <span class="n">output</span><span class="p">.</span><span class="n">GetChildContentAsync</span><span class="p">();</span>
</pre></div>
</div>
<p>That is, we call <code class="docutils literal"><span class="pre">GetChildContentAsync</span></code> using the <code class="docutils literal"><span class="pre">TagHelperOutput</span></code> passed into the <code class="docutils literal"><span class="pre">ProcessAsync</span></code> method. As mentioned previously, because the output is cached, the last tag helper to run wins. We fixed that problem with the following code:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="kt">var</span> <span class="n">childContent</span> <span class="p">=</span> <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">IsModified</span> <span class="p">?</span> <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">GetContent</span><span class="p">()</span> <span class="p">:</span>
    <span class="p">(</span><span class="k">await</span> <span class="n">output</span><span class="p">.</span><span class="n">GetChildContentAsync</span><span class="p">()).</span><span class="n">GetContent</span><span class="p">();</span>
</pre></div>
</div>
<p>The code above checks to see if the content has been modified, and if it has, it gets the content from the output buffer.</p>
<ol class="arabic simple" start="7">
<li>Run the app and verify that the two links work as expected. While it might appear our auto linker tag helper is correct and complete, it has a subtle problem. If the WWW tag helper runs first, the www links will not be correct. Update the code by adding the <code class="docutils literal"><span class="pre">Order</span></code> overload to control the order that the tag runs in. The <code class="docutils literal"><span class="pre">Order</span></code> property determines the execution order relative to other tag helpers targeting the same element. The default order value is zero and instances with lower values are executed first.</li>
</ol>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">class</span> <span class="nc">AutoLinkerHttpTagHelper</span> <span class="p">:</span> <span class="n">TagHelper</span>
<span class="p">{</span>
    <span class="c1">// This filter must run before the AutoLinkerWwwTagHelper as it searches and replaces http and </span>
    <span class="c1">// the AutoLinkerWwwTagHelper adds http to the markup.</span>
<span class="hll">    <span class="k">public</span> <span class="k">override</span> <span class="kt">int</span> <span class="n">Order</span>
</span><span class="hll">    <span class="p">{</span>
</span><span class="hll">        <span class="k">get</span>  <span class="p">{</span>  <span class="k">return</span> <span class="kt">int</span><span class="p">.</span><span class="n">MinValue</span><span class="p">;</span>   <span class="p">}</span>
</span><span class="hll">    <span class="p">}</span>
</span></pre></div>
</div>
<p>The above code will guarantee that the HTTP tag helper runs before the WWW tag helper. Change <code class="docutils literal"><span class="pre">Order</span></code> to <code class="docutils literal"><span class="pre">MaxValue</span></code> and verify that the markup generated for the  WWW tag is incorrect.</p>
</div>
</div>
<div class="section" id="inspecting-and-retrieving-child-content">
<h2><a class="toc-backref" href="#id8">Inspecting and retrieving child content</a><a class="headerlink" href="#inspecting-and-retrieving-child-content" title="Permalink to this headline">Â¶</a></h2>
<p>The tag-helpers provide several properties to retrieve content.</p>
<ul class="simple">
<li>The result of <code class="docutils literal"><span class="pre">GetChildContentAsync</span></code> can be appended to <code class="docutils literal"><span class="pre">output.Content</span></code>.</li>
<li>You can inspect the result of <code class="docutils literal"><span class="pre">GetChildContentAsync</span></code> with <code class="docutils literal"><span class="pre">GetContent</span></code>.</li>
<li>If you modify <code class="docutils literal"><span class="pre">output.Content</span></code>, the TagHelper body will not be executed or rendered unless you call <code class="docutils literal"><span class="pre">GetChildContentAsync</span></code> as in our auto-linker sample:</li>
</ul>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">class</span> <span class="nc">AutoLinkerHttpTagHelper</span> <span class="p">:</span> <span class="n">TagHelper</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">ProcessAsync</span><span class="p">(</span><span class="n">TagHelperContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">TagHelperOutput</span> <span class="n">output</span><span class="p">)</span>
    <span class="p">{</span>
<span class="hll">        <span class="kt">var</span> <span class="n">childContent</span> <span class="p">=</span> <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">IsModified</span> <span class="p">?</span> <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">GetContent</span><span class="p">()</span> <span class="p">:</span>
</span><span class="hll">            <span class="p">(</span><span class="k">await</span> <span class="n">output</span><span class="p">.</span><span class="n">GetChildContentAsync</span><span class="p">()).</span><span class="n">GetContent</span><span class="p">();</span>
</span>
        <span class="c1">// Find Urls in the content and replace them with their anchor tag equivalent.</span>
        <span class="n">output</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">SetHtmlContent</span><span class="p">(</span><span class="n">Regex</span><span class="p">.</span><span class="n">Replace</span><span class="p">(</span>
<span class="hll">             <span class="n">childContent</span><span class="p">,</span>
</span>             <span class="s">@&quot;\b(?:https?://)(\S+)\b&quot;</span><span class="p">,</span>
              <span class="s">&quot;&lt;a target=\&quot;_blank\&quot; href=\&quot;$0\&quot;&gt;$0&lt;/a&gt;&quot;</span><span class="p">));</span>  <span class="c1">// http link version}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>Multiple calls to <code class="docutils literal"><span class="pre">GetChildContentAsync</span></code> will return the same value and will not re-execute the <code class="docutils literal"><span class="pre">TagHelper</span></code> body unless you pass in a false parameter indicating  not use the cached result.</li>
</ul>
</div>
</div>



  
  <!-- Helpfulness -->
  <div id="helpful-position"></div>
  <div id="helpful" class="helpfulness-container" style="display:none;">
    <div class="helpfulness">
      <div class="helpfulness-form">
        <h2>Is this page helpful?</h2>
        <a id="helpfulness-btn-yes" href="javascript:;" class="common-btn first">Yes</a>
        <a id="helpfulness-btn-no" href="javascript:;" class="common-btn">No</a>
      </div>
      <div class="helpfulness-form-no" style="display:none;">
        <h2>Is this page helpful?</h2>
        Sorry this wasn't helpful.
        <input type="text" id="txt-helpfulness" placeholder="Please let us know why this wasn't helpful">
        <span id="helpfulness-characters-left">characters remaining</span>
        <a id="helpfulness-btn-submit" href="javascript:;" class="common-btn">Submit</a>
        <a id="helpfulness-btn-skip" href="javascript:;" class="common-btn secondary">Skip this</a>
      </div>
      <a href="javascript:;" class="helpfulness-close">âœ–</a>
      <div class="messages processing" style="display:none;">
        Sending feedback...
      </div>
      <div class="messages success" style="display:none;">
        Thank you for your feedback!
      </div>
      <div class="messages helpfulness-error" style="display:none;">
        Error during submission!
      </div>
    </div>
  </div>
  

  <!-- wedc -->
  <noscript>
    <img alt="" width="1" height="1" src="https://c.microsoft.com/trans_pixel.aspx"/>
  </noscript>

  
    <!-- disqus -->
    <button id="showComments" type="button" class="btn btn-neutral"><i class="fa fa-comment"></i> Show comments</button>
    <div id="disqus_thread"></div>
    <hr/>
  
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../partial.html" class="btn btn-neutral float-right" title="Partial Views" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="intro.html" class="btn btn-neutral" title="Introduction to Tag Helpers" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Microsoft.
      Last updated on Jun 21, 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  Documentation licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>.


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/helpfulness.js?v=6"></script>
      <script type="text/javascript" src="../../../_static/disqus.js?v=6"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>