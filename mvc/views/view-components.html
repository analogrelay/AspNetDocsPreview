

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>View Components &mdash; ASP.NET  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/custom.css?v=6" type="text/css" />
  

  
    <link rel="top" title="ASP.NET  documentation" href="../../index.html"/>
        <link rel="up" title="Views" href="index.html"/>
        <link rel="next" title="ðŸ”§ Creating a Custom View Engine" href="custom-view-engine.html"/>
        <link rel="prev" title="Injecting Services Into Views" href="dependency-injection.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> ASP.NET
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.asp.net/projects/api">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../conceptual-overview/index.html">Conceptual Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fundamentals/index.html">Fundamentals</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">MVC</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview.html">ðŸ”§ Overview of ASP.NET MVC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/index.html">Models</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Views</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="razor.html">ðŸ”§ Razor Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="layout.html">Layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic-vs-static.html">ðŸ”§ Dynamic vs Strongly Typed Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="working-with-forms.html">Working with Forms</a></li>
<li class="toctree-l3"><a class="reference internal" href="html-helpers.html">ðŸ”§ HTML Helpers</a></li>
<li class="toctree-l3"><a class="reference internal" href="tag-helpers/index.html">Tag Helpers</a></li>
<li class="toctree-l3"><a class="reference internal" href="partial.html">Partial Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="dependency-injection.html">Injecting Services Into Views</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">View Components</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="custom-view-engine.html">ðŸ”§ Creating a Custom View Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="mobile.html">ðŸ”§ Building Mobile Specific Views</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/index.html">Controllers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/index.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data/index.html">Working with Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../client-side/index.html">Client-Side Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mobile/index.html">Mobile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../publishing/index.html">Publishing and Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hosting/index.html">Guidance for Hosting Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../performance/index.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration/index.html">Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ASP.NET</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">MVC</a> &raquo;</li>
      
          <li><a href="index.html">Views</a> &raquo;</li>
      
    <li>View Components</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/mvc/views/view-components.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
  <div class="section" id="view-components">
<h1>View Components<a class="headerlink" href="#view-components" title="Permalink to this headline">Â¶</a></h1>
<p>By <a class="reference external" href="https://twitter.com/RickAndMSFT">Rick Anderson</a></p>
<div class="contents local topic" id="sections">
<p class="topic-title first">Sections:</p>
<ul class="simple">
<li><a class="reference internal" href="#introducing-view-components" id="id1">Introducing view components</a></li>
<li><a class="reference internal" href="#creating-a-view-component" id="id2">Creating a view component</a></li>
<li><a class="reference internal" href="#invoking-a-view-component" id="id3">Invoking a view component</a></li>
<li><a class="reference internal" href="#walkthrough-creating-a-simple-view-component" id="id4">Walkthrough: Creating a simple view component</a></li>
<li><a class="reference internal" href="#additional-resources" id="id5">Additional Resources</a></li>
</ul>
</div>
<p><a class="reference external" href="https://github.com/aspnet/Docs/tree/master/aspnet/mvc/views/view-components/sample">View or download sample code</a></p>
<div class="section" id="introducing-view-components">
<h2><a class="toc-backref" href="#id1">Introducing view components</a><a class="headerlink" href="#introducing-view-components" title="Permalink to this headline">Â¶</a></h2>
<p>New to ASP.NET Core MVC, view components are similar to partial views, but they are much more powerful. View components donâ€™t use model binding, and only depend on the data you provide when calling into it. A view component:</p>
<ul class="simple">
<li>Renders a chunk rather than a whole response</li>
<li>Includes the same separation-of-concerns and testability benefits found between a controller and view</li>
<li>Can have parameters and business logic</li>
<li>Is typically invoked from a layout page</li>
</ul>
<p>View Components are intended anywhere you have reusable rendering logic that is too complex for a partial view, such as:</p>
<ul class="simple">
<li>Dynamic navigation menus</li>
<li>Tag cloud (where it queries the database)</li>
<li>Login panel</li>
<li>Shopping cart</li>
<li>Recently published articles</li>
<li>Sidebar content on a typical blog</li>
<li>A login panel that would be rendered on every page and show either the links to log out or log in, depending on the log in state of the user</li>
</ul>
<p>A <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Mvc/ViewComponent/index.html">view component</a> consists of two parts, the class (typically derived from  <code class="docutils literal"><span class="pre">ViewComponent</span></code>) and the result it returns (typically a view). Like controllers, a view component can be a POCO, but most developers will want to take advantage of the methods and properties available by deriving from <code class="docutils literal"><span class="pre">ViewComponent</span></code>.</p>
</div>
<div class="section" id="creating-a-view-component">
<h2><a class="toc-backref" href="#id2">Creating a view component</a><a class="headerlink" href="#creating-a-view-component" title="Permalink to this headline">Â¶</a></h2>
<p>This section contains the high level requirements to create a view component. Later in the article we&#8217;ll examine each step in detail and create a view component.</p>
<div class="section" id="the-view-component-class">
<h3>The view component class<a class="headerlink" href="#the-view-component-class" title="Permalink to this headline">Â¶</a></h3>
<p>A view component class can be created by any of the following:</p>
<ul class="simple">
<li>Deriving from <cite>ViewComponent</cite></li>
<li>Decorating a class with the <code class="docutils literal"><span class="pre">[ViewComponent]</span></code> attribute, or deriving from a class with the <code class="docutils literal"><span class="pre">[ViewComponent]</span></code> attribute</li>
<li>Creating a class where the name ends with the suffix <em>ViewComponent</em></li>
</ul>
<p>Like controllers, view components must be public, non-nested, and non-abstract classes. The view component name is the class name with the &#8220;ViewComponent&#8221; suffix removed. It can also be explicitly specified using the <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Mvc/ViewComponentAttribute/index.html#prop-Microsoft.AspNetCore.Mvc.ViewComponentAttribute.Name">ViewComponentAttribute.Name</a> property.</p>
<p>A view component class:</p>
<ul class="simple">
<li>Fully supports constructor <a class="reference internal" href="../../fundamentals/dependency-injection.html"><span class="doc">dependency injection</span></a></li>
<li>Does not take part in the controller lifecycle, which means you can&#8217;t use <a class="reference internal" href="../controllers/filters.html"><span class="doc">filters</span></a> in a view component</li>
</ul>
</div>
<div class="section" id="view-component-methods">
<h3>View component methods<a class="headerlink" href="#view-component-methods" title="Permalink to this headline">Â¶</a></h3>
<p>A view component defines its logic in an <code class="docutils literal"><span class="pre">InvokeAsync</span></code> method that returns an <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Mvc/IViewComponentResult/index.html">IViewComponentResult</a>. Parameters come directly from invocation of the view component, not from model binding. A view component never directly handles a request. Typically a view component initializes a model and passes it to a view by calling the <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Mvc/ViewComponent/index.html">View</a> method. In summary, view component methods:</p>
<ul class="simple">
<li>Define an <cite>InvokeAsync`</cite> method that returns an <code class="docutils literal"><span class="pre">IViewComponentResult</span></code></li>
<li>Typically initializes a model and passes it to a view by calling the <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Mvc/ViewComponent/index.html">ViewComponent</a>  <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Mvc/ViewResult/index.html">View</a> method</li>
<li>Parameters come from the calling method, not HTTP, there is no model binding</li>
<li>Are not reachable directly as an HTTP endpoint, they are invoked from your code (usually in a view). A view component never handles a request</li>
<li>Are overloaded on the signature rather than any details from the current HTTP request</li>
</ul>
</div>
<div class="section" id="view-search-path">
<h3>View search path<a class="headerlink" href="#view-search-path" title="Permalink to this headline">Â¶</a></h3>
<p>The runtime searches for the view in the following paths:</p>
<blockquote>
<div><ul class="simple">
<li>Views/&lt;controller_name&gt;/Components/&lt;view_component_name&gt;/&lt;view_name&gt;</li>
<li>Views/Shared/Components/&lt;view_component_name&gt;/&lt;view_name&gt;</li>
</ul>
</div></blockquote>
<p>The default view name for a view component is <em>Default</em>, which means your view file will typically be named <em>Default.cshtml</em>. You can specify a different view name when creating the view component result or when calling the <code class="docutils literal"><span class="pre">View</span></code> method.</p>
<p>We recommend you name the view file <em>Default.cshtml</em> and use the <em>Views/Shared/Components/&lt;view_component_name&gt;/&lt;view_name&gt;</em> path. The <code class="docutils literal"><span class="pre">PriorityList</span></code> view component used in this sample uses <em>Views/Shared/Components/PriorityList/Default.cshtml</em> for the view component view.</p>
</div>
</div>
<div class="section" id="invoking-a-view-component">
<h2><a class="toc-backref" href="#id3">Invoking a view component</a><a class="headerlink" href="#invoking-a-view-component" title="Permalink to this headline">Â¶</a></h2>
<p>To use the view component, call <code class="docutils literal"><span class="pre">&#64;Component.InvokeAsync(&quot;Name</span> <span class="pre">of</span> <span class="pre">view</span> <span class="pre">component&quot;,</span> <span class="pre">&lt;parameters&gt;)</span></code> from a view. The parameters will be passed to the <code class="docutils literal"><span class="pre">InvokeAsync</span></code> method.  The <code class="docutils literal"><span class="pre">PriorityList</span></code> view component developed in the article is invoked from the <em>Views/Todo/Index.cshtml</em> view file. In the following, the <code class="docutils literal"><span class="pre">InvokeAsync</span></code> method is called with two parameters:</p>
<div class="highlight-HTML"><div class="highlight"><pre><span></span>@await Component.InvokeAsync(&quot;PriorityList&quot;, 2, false)
</pre></div>
</div>
<div class="section" id="invoking-a-view-component-directly-from-a-controller">
<h3>Invoking a view component directly from a controller<a class="headerlink" href="#invoking-a-view-component-directly-from-a-controller" title="Permalink to this headline">Â¶</a></h3>
<p>View components are typically invoked from a view, but you can invoke them directly from a controller method. While view components do not define endpoints like controllers, you can easily implement a controller action that returns the content of a <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Mvc/ViewComponentResult/index.html">ViewComponentResult</a>.</p>
<p>In this example, the view component is called directly from the controller:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span>  <span class="k">public</span> <span class="n">IActionResult</span> <span class="nf">IndexVC</span><span class="p">()</span>
  <span class="p">{</span>
      <span class="k">return</span> <span class="nf">ViewComponent</span><span class="p">(</span><span class="s">&quot;PriorityList&quot;</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
  <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="walkthrough-creating-a-simple-view-component">
<h2><a class="toc-backref" href="#id4">Walkthrough: Creating a simple view component</a><a class="headerlink" href="#walkthrough-creating-a-simple-view-component" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://github.com/aspnet/Docs/tree/master/aspnet/mvc/views/view-components/sample">Download</a>, build and test the starter code. It&#8217;s a simple project with a <code class="docutils literal"><span class="pre">Todo</span></code> controller that displays a list of <em>Todo</em> items.</p>
<img alt="../../_images/2dos.png" src="../../_images/2dos.png" />
<div class="section" id="add-a-viewcomponent-class">
<h3>Add a ViewComponent class<a class="headerlink" href="#add-a-viewcomponent-class" title="Permalink to this headline">Â¶</a></h3>
<p>Create a <em>ViewComponents</em> folder and add the following <code class="docutils literal"><span class="pre">PriorityListViewComponent</span></code> class.</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">Microsoft.AspNet.Mvc</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.Data.Entity</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">ViewComponentSample.Models</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ViewComponentSample.ViewComponents</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">PriorityListViewComponent</span> <span class="p">:</span> <span class="n">ViewComponent</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">ToDoContext</span> <span class="n">db</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">PriorityListViewComponent</span><span class="p">(</span><span class="n">ToDoContext</span> <span class="n">context</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">db</span> <span class="p">=</span> <span class="n">context</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">IViewComponentResult</span><span class="p">&gt;</span> <span class="n">InvokeAsync</span><span class="p">(</span>
        <span class="kt">int</span> <span class="n">maxPriority</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">isDone</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">items</span> <span class="p">=</span> <span class="k">await</span> <span class="n">GetItemsAsync</span><span class="p">(</span><span class="n">maxPriority</span><span class="p">,</span> <span class="n">isDone</span><span class="p">);</span>
            <span class="k">return</span> <span class="nf">View</span><span class="p">(</span><span class="n">items</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">private</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="n">TodoItem</span><span class="p">&gt;&gt;</span> <span class="n">GetItemsAsync</span><span class="p">(</span><span class="kt">int</span> <span class="n">maxPriority</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">isDone</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">db</span><span class="p">.</span><span class="n">ToDo</span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">IsDone</span> <span class="p">==</span> <span class="n">isDone</span> <span class="p">&amp;&amp;</span>
                                 <span class="n">x</span><span class="p">.</span><span class="n">Priority</span> <span class="p">&lt;=</span> <span class="n">maxPriority</span><span class="p">).</span><span class="n">ToListAsync</span><span class="p">();</span>
        <span class="p">}</span>       
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Notes on the code:</p>
<ul>
<li><p class="first">View component classes can be contained in <strong>any</strong> folder in the project.</p>
</li>
<li><p class="first">Because the class name <code class="docutils literal"><span class="pre">PriorityListViewComponent</span></code> ends with the suffix <strong>ViewComponent</strong>, the runtime will use the string &#8220;PriorityList&#8221; when referencing the class component from a view. I&#8217;ll explain that in more detail later.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">[ViewComponent]</span></code> attribute can change the name used to reference a view component. For example, we could have named the class <code class="docutils literal"><span class="pre">XYZ</span></code>,  and  applied the  <code class="docutils literal"><span class="pre">ViewComponent</span></code> attribute:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="na">[ViewComponent(Name = &quot;PriorityList&quot;)]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">XYZ</span> <span class="p">:</span> <span class="n">ViewComponent</span>
</pre></div>
</div>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">[ViewComponent]</span></code> attribute above tells the view component selector to use the name <code class="docutils literal"><span class="pre">PriorityList</span></code> when looking for the views associated with the component, and to use the string &#8220;PriorityList&#8221; when referencing the class component from a view. I&#8217;ll explain that in more detail later.</p>
</li>
<li><p class="first">The component uses <a class="reference internal" href="../../fundamentals/dependency-injection.html"><span class="doc">dependency injection</span></a> to make the data context available.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">InvokeAsync</span></code> exposes a method which can be called from a view, and it can take an arbitrary number of arguments.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">InvokeAsync</span></code> method returns the set of <code class="docutils literal"><span class="pre">ToDo</span></code> items that are not completed and have priority lower than or equal to <code class="docutils literal"><span class="pre">maxPriority</span></code>.</p>
</li>
</ul>
</div>
<div class="section" id="create-the-view-component-razor-view">
<h3>Create the view component Razor view<a class="headerlink" href="#create-the-view-component-razor-view" title="Permalink to this headline">Â¶</a></h3>
<ol class="arabic simple">
<li>Create the <em>Views/Shared/Components</em> folder. This folder <strong>must</strong> be named <em>Components</em>.</li>
<li>Create the <em>Views/Shared/Components/PriorityList</em> folder. This folder name must match the name of the view component class, or the name of the class minus the suffix (if we followed convention and used the <em>ViewComponent</em> suffix in the class name). If you used the <code class="docutils literal"><span class="pre">ViewComponent</span></code> attribute, the class name would need to match the attribute designation.</li>
<li>Create a <em>Views/Shared/Components/PriorityList/Default.cshtml</em> Razor view.</li>
</ol>
<div class="highlight-html"><div class="highlight"><pre><span></span>@model IEnumerable<span class="p">&lt;</span><span class="nt">ViewComponentSample.Models.TodoItem</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Priority Items<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    @foreach (var todo in Model)
    {
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>@todo.Name<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    }
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The Razor view takes a list of <code class="docutils literal"><span class="pre">TodoItem</span></code> and displays them. If the view component <code class="docutils literal"><span class="pre">InvokeAsync</span></code> method doesn&#8217;t pass the name of the view (as in our sample), <em>Default</em> is used for the view name by convention. Later in the tutorial, I&#8217;ll show you how to pass the name of the view. To override the default styling for a specific controller, add a view to the controller specific view folder (for example <em>Views/Todo/Components/PriorityList/Default.cshtml)</em>.</p>
<p>If the view component was controller specific, you could add it to the controller specific folder (<em>Views/Todo/Components/PriorityList/Default.cshtml</em>)</p>
<ol class="arabic simple" start="4">
<li>Add a <code class="docutils literal"><span class="pre">div</span></code> containing a call to the priority list component to the bottom of the <em>Views/Todo/index.cshtml</em> file:</li>
</ol>
<div class="highlight-html"><div class="highlight"><pre><span></span>    }
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="p">&gt;</span>
    @await Component.InvokeAsync(&quot;PriorityList&quot;, 2, false)
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The markup <code class="docutils literal"><span class="pre">&#64;Component.InvokeAsync</span></code> shows the syntax for calling view components. The first argument is the name of the component we want to invoke or call. Subsequent parameters are passed to the component. <code class="docutils literal"><span class="pre">InvokeAsync</span></code> can take an arbitrary number of arguments.</p>
<p>The following image shows the priority items:</p>
<img alt="../../_images/pi.png" src="../../_images/pi.png" />
<p>You can also call the view component directly from the controller:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span>  <span class="k">public</span> <span class="n">IActionResult</span> <span class="nf">IndexVC</span><span class="p">()</span>
  <span class="p">{</span>
      <span class="k">return</span> <span class="nf">ViewComponent</span><span class="p">(</span><span class="s">&quot;PriorityList&quot;</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
  <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="specifying-a-view-name">
<h3>Specifying a view name<a class="headerlink" href="#specifying-a-view-name" title="Permalink to this headline">Â¶</a></h3>
<p>A complex view component might need to specify a non-default view under some conditions. The following code shows how to specify the &#8220;PVC&#8221; view  from the <code class="docutils literal"><span class="pre">InvokeAsync</span></code> method. Update the <code class="docutils literal"><span class="pre">InvokeAsync</span></code> method in the <code class="docutils literal"><span class="pre">PriorityListViewComponent</span></code> class.</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">IViewComponentResult</span><span class="p">&gt;</span> <span class="n">InvokeAsync</span><span class="p">(</span>
    <span class="kt">int</span> <span class="n">maxPriority</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">isDone</span><span class="p">)</span>
<span class="p">{</span>
<span class="hll">    <span class="kt">string</span> <span class="n">MyView</span> <span class="p">=</span> <span class="s">&quot;Default&quot;</span><span class="p">;</span>
</span><span class="hll">    <span class="c1">// If asking for all completed tasks, render with the &quot;PVC&quot; view.</span>
</span><span class="hll">    <span class="k">if</span> <span class="p">(</span><span class="n">maxPriority</span> <span class="p">&gt;</span> <span class="m">3</span> <span class="p">&amp;&amp;</span> <span class="n">isDone</span> <span class="p">==</span> <span class="k">true</span><span class="p">)</span>
</span><span class="hll">    <span class="p">{</span>
</span><span class="hll">        <span class="n">MyView</span> <span class="p">=</span> <span class="s">&quot;PVC&quot;</span><span class="p">;</span>
</span><span class="hll">    <span class="p">}</span>
</span>    <span class="kt">var</span> <span class="n">items</span> <span class="p">=</span> <span class="k">await</span> <span class="n">GetItemsAsync</span><span class="p">(</span><span class="n">maxPriority</span><span class="p">,</span> <span class="n">isDone</span><span class="p">);</span>
    <span class="k">return</span> <span class="nf">View</span><span class="p">(</span><span class="n">MyView</span><span class="p">,</span> <span class="n">items</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Copy the <em>Views/Shared/Components/PriorityList/Default.cshtml</em> file to a view named <em>Views/Shared/Components/PriorityList/PVC.cshtml</em>. Add a heading to indicate the PVC view is being used.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span>@model IEnumerable<span class="p">&lt;</span><span class="nt">ViewComponentSample.Models.TodoItem</span><span class="p">&gt;</span>

<span class="hll"><span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span> PVC Named Priority Component View<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span><span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span>@ViewBag.PriorityMessage<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    @foreach (var todo in Model)
    {
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>@todo.Name<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    }
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Update <em>Views/TodoList/Index.cshtml</em></p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
    @await Component.InvokeAsync(&quot;PriorityList&quot;, 4, true)
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Run the app and verify PVC view.</p>
<img alt="../../_images/pvc.png" src="../../_images/pvc.png" />
<p>If the PVC view is not rendered, verify you are calling the view component with a priority of 4 or higher.</p>
</div>
<div class="section" id="examine-the-view-path">
<h3>Examine the view path<a class="headerlink" href="#examine-the-view-path" title="Permalink to this headline">Â¶</a></h3>
<ol class="arabic">
<li><p class="first">Change the priority parameter to three or less so the priority view is not returned.</p>
</li>
<li><p class="first">Temporarily rename the <em>Views/Todo/Components/PriorityList/Default.cshtml</em> to <em>Temp.cshtml</em>.</p>
</li>
<li><p class="first">Test the app, you&#8217;ll get the following error:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">An</span> <span class="n">unhandled</span> <span class="n">exception</span> <span class="n">occurred</span> <span class="k">while</span> <span class="n">processing</span> <span class="n">the</span> <span class="n">request</span><span class="o">.</span>

<span class="n">InvalidOperationException</span><span class="p">:</span> <span class="n">The</span> <span class="n">view</span> <span class="s1">&#39;Components/PriorityList/Default&#39;</span>
   <span class="n">was</span> <span class="ow">not</span> <span class="n">found</span><span class="o">.</span> <span class="n">The</span> <span class="n">following</span> <span class="n">locations</span> <span class="n">were</span> <span class="n">searched</span><span class="p">:</span>
   <span class="o">/</span><span class="n">Views</span><span class="o">/</span><span class="n">ToDo</span><span class="o">/</span><span class="n">Components</span><span class="o">/</span><span class="n">PriorityList</span><span class="o">/</span><span class="n">Default</span><span class="o">.</span><span class="n">cshtml</span>
   <span class="o">/</span><span class="n">Views</span><span class="o">/</span><span class="n">Shared</span><span class="o">/</span><span class="n">Components</span><span class="o">/</span><span class="n">PriorityList</span><span class="o">/</span><span class="n">Default</span><span class="o">.</span><span class="n">cshtml</span><span class="o">.</span>
<span class="n">Microsoft</span><span class="o">.</span><span class="n">AspNetCore</span><span class="o">.</span><span class="n">Mvc</span><span class="o">.</span><span class="n">ViewEngines</span><span class="o">.</span><span class="n">ViewEngineResult</span><span class="o">.</span><span class="n">EnsureSuccessful</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ol>
<ol class="arabic simple" start="4">
<li>Copy  <em>Views/Shared/Components/PriorityList/Default.cshtml to *Views/Todo/Components/PriorityList/Default.cshtml</em>.</li>
<li>Add some markup to the <em>Todo</em> view component view to indicate the view is from the <em>Todo</em> folder.</li>
<li>Test the <strong>non-shared</strong> component view.</li>
</ol>
<img alt="../../_images/shared.png" src="../../_images/shared.png" />
</div>
<div class="section" id="avoiding-magic-strings">
<h3>Avoiding magic strings<a class="headerlink" href="#avoiding-magic-strings" title="Permalink to this headline">Â¶</a></h3>
<p>If you want compile time safety you can replace the hard coded view component name with the class name. Create the view component without the &#8220;ViewComponent&#8221; suffix:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">Microsoft.AspNet.Mvc</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.Data.Entity</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">ViewComponentSample.Models</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ViewComponentSample.ViewComponents</span>
<span class="p">{</span>
<span class="hll">    <span class="k">public</span> <span class="k">class</span> <span class="nc">PriorityList</span> <span class="p">:</span> <span class="n">ViewComponent</span>
</span>    <span class="p">{</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">ToDoContext</span> <span class="n">db</span><span class="p">;</span>

<span class="hll">        <span class="k">public</span> <span class="nf">PriorityList</span><span class="p">(</span><span class="n">ToDoContext</span> <span class="n">context</span><span class="p">)</span>
</span>        <span class="p">{</span>
            <span class="n">db</span> <span class="p">=</span> <span class="n">context</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">IViewComponentResult</span><span class="p">&gt;</span> <span class="n">InvokeAsync</span><span class="p">(</span>
        <span class="kt">int</span> <span class="n">maxPriority</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">isDone</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">items</span> <span class="p">=</span> <span class="k">await</span> <span class="n">GetItemsAsync</span><span class="p">(</span><span class="n">maxPriority</span><span class="p">,</span> <span class="n">isDone</span><span class="p">);</span>
            <span class="k">return</span> <span class="nf">View</span><span class="p">(</span><span class="n">items</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">private</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="n">TodoItem</span><span class="p">&gt;&gt;</span> <span class="n">GetItemsAsync</span><span class="p">(</span><span class="kt">int</span> <span class="n">maxPriority</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">isDone</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">db</span><span class="p">.</span><span class="n">ToDo</span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">IsDone</span> <span class="p">==</span> <span class="n">isDone</span> <span class="p">&amp;&amp;</span>
                                 <span class="n">x</span><span class="p">.</span><span class="n">Priority</span> <span class="p">&lt;=</span> <span class="n">maxPriority</span><span class="p">).</span><span class="n">ToListAsync</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Add a <code class="docutils literal"><span class="pre">using</span></code> statement to your Razor view file and use the <code class="docutils literal"><span class="pre">nameof</span></code> operator:</p>
<div class="highlight-html"><div class="highlight"><pre><span></span>@using ViewComponentSample.Models
@using ViewComponentSample.ViewComponents
@model IEnumerable<span class="p">&lt;</span><span class="nt">TodoItem</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>ToDo nameof<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="c">&lt;!-- Markup removed for brevity.  --&gt;</span>
    }
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
    @await Component.InvokeAsync(nameof(PriorityList), 4, true)
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="additional-resources">
<h2><a class="toc-backref" href="#id5">Additional Resources</a><a class="headerlink" href="#additional-resources" title="Permalink to this headline">Â¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="dependency-injection.html"><span class="doc">Injecting Services Into Views</span></a></li>
<li><a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Mvc/ViewComponent/index.html">ViewComponent</a></li>
</ul>
</div>
</div>



  
  <!-- Helpfulness -->
  <div id="helpful-position"></div>
  <div id="helpful" class="helpfulness-container" style="display:none;">
    <div class="helpfulness">
      <div class="helpfulness-form">
        <h2>Is this page helpful?</h2>
        <a id="helpfulness-btn-yes" href="javascript:;" class="common-btn first">Yes</a>
        <a id="helpfulness-btn-no" href="javascript:;" class="common-btn">No</a>
      </div>
      <div class="helpfulness-form-no" style="display:none;">
        <h2>Is this page helpful?</h2>
        Sorry this wasn't helpful.
        <input type="text" id="txt-helpfulness" placeholder="Please let us know why this wasn't helpful">
        <span id="helpfulness-characters-left">characters remaining</span>
        <a id="helpfulness-btn-submit" href="javascript:;" class="common-btn">Submit</a>
        <a id="helpfulness-btn-skip" href="javascript:;" class="common-btn secondary">Skip this</a>
      </div>
      <a href="javascript:;" class="helpfulness-close">âœ–</a>
      <div class="messages processing" style="display:none;">
        Sending feedback...
      </div>
      <div class="messages success" style="display:none;">
        Thank you for your feedback!
      </div>
      <div class="messages helpfulness-error" style="display:none;">
        Error during submission!
      </div>
    </div>
  </div>
  

  <!-- wedc -->
  <noscript>
    <img alt="" width="1" height="1" src="https://c.microsoft.com/trans_pixel.aspx"/>
  </noscript>

  
    <!-- disqus -->
    <button id="showComments" type="button" class="btn btn-neutral"><i class="fa fa-comment"></i> Show comments</button>
    <div id="disqus_thread"></div>
    <hr/>
  
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="custom-view-engine.html" class="btn btn-neutral float-right" title="ðŸ”§ Creating a Custom View Engine" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dependency-injection.html" class="btn btn-neutral" title="Injecting Services Into Views" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Microsoft.
      Last updated on Jun 21, 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  Documentation licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>.


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/helpfulness.js?v=6"></script>
      <script type="text/javascript" src="../../_static/disqus.js?v=6"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>