

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Migrating from ASP.NET 5 RC1 to ASP.NET Core &mdash; ASP.NET  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/custom.css?v=6" type="text/css" />
  

  
    <link rel="top" title="ASP.NET  documentation" href="../index.html"/>
        <link rel="up" title="Migration" href="index.html"/>
        <link rel="next" title="Contribute" href="../contribute/index.html"/>
        <link rel="prev" title="Migrating HTTP Modules to Middleware" href="http-modules.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> ASP.NET
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.asp.net/projects/api">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conceptual-overview/index.html">Conceptual Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fundamentals/index.html">Fundamentals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mvc/index.html">MVC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/index.html">Working with Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client-side/index.html">Client-Side Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mobile/index.html">Mobile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publishing/index.html">Publishing and Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosting/index.html">Guidance for Hosting Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance/index.html">Performance</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Migration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="mvc.html">Migrating From ASP.NET MVC to ASP.NET Core MVC</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Migrating Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="identity.html">Migrating Authentication and Identity</a></li>
<li class="toctree-l2"><a class="reference internal" href="webapi.html">Migrating from ASP.NET Web API</a></li>
<li class="toctree-l2"><a class="reference internal" href="http-modules.html">Migrating HTTP Modules to Middleware</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Migrating from ASP.NET 5 RC1 to ASP.NET Core</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/index.html">Contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">ASP.NET</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Migration</a> &raquo;</li>
      
    <li>Migrating from ASP.NET 5 RC1 to ASP.NET Core</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/migration/rc1-to-rc2.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
  <div class="section" id="migrating-from-asp-net-5-rc1-to-asp-net-core">
<h1>Migrating from ASP.NET 5 RC1 to ASP.NET Core<a class="headerlink" href="#migrating-from-asp-net-5-rc1-to-asp-net-core" title="Permalink to this headline">¶</a></h1>
<p>By <a class="reference external" href="http://github.com/rachelappel">Rachel Appel</a></p>
<div class="contents local topic" id="sections">
<p class="topic-title first">Sections:</p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id1">Overview</a></li>
<li><a class="reference internal" href="#specify-the-net-core-sdk-version" id="id2">Specify the .NET Core SDK version</a></li>
<li><a class="reference internal" href="#namespace-and-package-id-changes" id="id3">Namespace and package ID changes</a></li>
<li><a class="reference internal" href="#creating-your-web-application-host" id="id4">Creating your web application host</a></li>
<li><a class="reference internal" href="#hosting-configuration" id="id5">Hosting Configuration</a></li>
<li><a class="reference internal" href="#hosting-service-changes" id="id6">Hosting Service changes</a></li>
<li><a class="reference internal" href="#working-with-iis" id="id7">Working with IIS</a></li>
<li><a class="reference internal" href="#mvc" id="id8">MVC</a></li>
<li><a class="reference internal" href="#configuration" id="id9">Configuration</a></li>
<li><a class="reference internal" href="#logging" id="id10">Logging</a></li>
<li><a class="reference internal" href="#identity" id="id11">Identity</a></li>
<li><a class="reference internal" href="#updating-launch-settings-in-visual-studio" id="id12">Updating Launch Settings in Visual Studio</a></li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id1">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This migration guide covers migrating an ASP.NET 5 RC1 application to ASP.NET Core.</p>
<p>ASP.NET 5 RC1 apps were based on the .NET Execution Environment (DNX) and made use of DNX specific features. ASP.NET Core RC2 is based on .NET Core, so you must first migrate your application to the new .NET Core project model. See <a class="reference external" href="http://dotnet.github.io/docs/core-concepts/dnx-migration.html">migrating from DNX to .NET Core CLI</a> for more information.</p>
<p>For information regarding a complete list of breaking changes in RC2 for ASP.NET Core, see the <a class="reference external" href="https://github.com/aspnet/announcements/issues?q=is%3Aopen+is%3Aissue+milestone%3A1.0.0-rc2">ASP.NET Core Announcements page</a></p>
<p>For information on migrating Entity Framework 7 to Entity Framework Core, see the <a class="reference external" href="https://docs.efproject.net/en/latest/miscellaneous/rc1-rc2-upgrade.html">EF Migration document</a></p>
</div>
<div class="section" id="specify-the-net-core-sdk-version">
<h2><a class="toc-backref" href="#id2">Specify the .NET Core SDK version</a><a class="headerlink" href="#specify-the-net-core-sdk-version" title="Permalink to this headline">¶</a></h2>
<p>You must update the SDK version in <code class="docutils literal"><span class="pre">global.json</span></code>, as this file is used to configure the version of the .NET Core SDK to use during development.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;projects&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;src&quot;</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span> <span class="p">],</span>
  <span class="nt">&quot;sdk&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0-preview1-002702&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="namespace-and-package-id-changes">
<h2><a class="toc-backref" href="#id3">Namespace and package ID changes</a><a class="headerlink" href="#namespace-and-package-id-changes" title="Permalink to this headline">¶</a></h2>
<p>ASP.NET 5 was renamed to ASP.NET Core 1.0. Also, MVC and Identity are now part of ASP.NET Core. ASP.NET MVC 6 is now ASP.NET Core MVC. ASP.NET Identity 3 is now ASP.NET Core Identity.</p>
<p>All Microsoft.AspNet.* packages and namespaces are renamed to Microsoft.AspNetCore.*.
The EntityFramework.* packages and namespaces are changing to Microsoft.EntityFrameworkCore.*.
All ASP.NET Core package versions are now 1.0.0-*.
Microsoft.Data.Entity.* is now Microsoft.EntityFrameworkCore.*</p>
</div>
<div class="section" id="creating-your-web-application-host">
<h2><a class="toc-backref" href="#id4">Creating your web application host</a><a class="headerlink" href="#creating-your-web-application-host" title="Permalink to this headline">¶</a></h2>
<p>Since ASP.NET Core apps are just console apps, you must define an entry point for your application in <code class="docutils literal"><span class="pre">Program.Main()</span></code> that sets up a web host. Then tell the host to start listening. Below is an example of the startup code for the built-in <cite>Web Application</cite> template in Visual Studio.</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">class</span> <span class="nc">Program</span>
<span class="p">{</span>
  <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
  <span class="p">{</span>
      <span class="kt">var</span> <span class="n">host</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebHostBuilder</span><span class="p">()</span>
          <span class="p">.</span><span class="n">UseKestrel</span><span class="p">()</span>
          <span class="p">.</span><span class="n">UseContentRoot</span><span class="p">(</span><span class="n">Directory</span><span class="p">.</span><span class="n">GetCurrentDirectory</span><span class="p">())</span>
          <span class="p">.</span><span class="n">UseIISIntegration</span><span class="p">()</span>
          <span class="p">.</span><span class="n">UseStartup</span><span class="p">&lt;</span><span class="n">Startup</span><span class="p">&gt;()</span>
          <span class="p">.</span><span class="n">Build</span><span class="p">();</span>

      <span class="n">host</span><span class="p">.</span><span class="n">Run</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The application base path is now called the content root.</p>
<p>The web root of your application is no longer specified in your project.json file. It is instead defined when setting up the web host and defaults to wwwroot. Call the <code class="docutils literal"><span class="pre">UseWebRoot</span></code> method to specify a web root folder. Alternatively you can enable specifying the web root folder in configuration by calling the <code class="docutils literal"><span class="pre">UseConfiguration</span></code> method. Similarly the server URLs that your application listens on can be specified using the <code class="docutils literal"><span class="pre">UseUrls</span></code> method or through configuration.</p>
<p>Additionally, you must turn on server garbage collection in <code class="docutils literal"><span class="pre">project.json</span></code> or, <code class="docutils literal"><span class="pre">app.config</span></code> when running ASP.NET projects on the full .NET framework.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;runtimeOptions&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;configProperties&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;System.GC.Server&quot;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The default server URL and port are <code class="docutils literal"><span class="pre">localhost:5000</span></code>. You can find more information about Garbage Collection configuration at: <a class="reference external" href="https://github.com/aspnet/Announcements/issues/175">https://github.com/aspnet/Announcements/issues/175</a></p>
<p>All classes prefixed with WebApplication have been renamed to WebHost. This includes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="52%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">RC1</th>
<th class="head">RC2</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>IWebApplicationBuilder</td>
<td>IWebHostBuilder</td>
</tr>
<tr class="row-odd"><td>WebApplicationBuilder</td>
<td>WebHostBuilder</td>
</tr>
<tr class="row-even"><td>IWebApplication</td>
<td>IWebHost</td>
</tr>
<tr class="row-odd"><td>WebApplication</td>
<td>WebHost</td>
</tr>
<tr class="row-even"><td>WebApplicationOptions</td>
<td>WebHostOptions</td>
</tr>
<tr class="row-odd"><td>WebApplicationDefaults</td>
<td>WebHostDefaults</td>
</tr>
<tr class="row-even"><td>WebApplicationService</td>
<td>WebHostService</td>
</tr>
<tr class="row-odd"><td>WebApplicationConfiguration</td>
<td>WebHostConfiguration</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal"><span class="pre">commands</span></code> section of <code class="docutils literal"><span class="pre">project.json</span></code> has been removed completely. Use <code class="docutils literal"><span class="pre">dotnet</span> <span class="pre">run</span></code> or <code class="docutils literal"><span class="pre">dotnet</span> <span class="pre">&lt;dllname&gt;</span></code> instead.</p>
</div>
<div class="section" id="hosting-configuration">
<h2><a class="toc-backref" href="#id5">Hosting Configuration</a><a class="headerlink" href="#hosting-configuration" title="Permalink to this headline">¶</a></h2>
<p>You enable configuration for your web application host by calling the <code class="docutils literal"><span class="pre">UseConfiguration()</span></code> method on <code class="docutils literal"><span class="pre">WebHostBuilder</span></code> and passing a configuration instance. The following configuration values can be specified:</p>
<ul class="simple">
<li>application</li>
<li>startupAssembly</li>
<li>detailedErrors</li>
<li>server</li>
<li>webroot</li>
<li>captureStartupErrors</li>
<li>server.urls</li>
<li>contentRoot</li>
</ul>
<p>To configure hosting using environmental variables, you must add them as a configuration source, and optionally specify a prefix. In RC2, you can use whatever prefix you want. You should add it explicitly by calling:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">new</span> <span class="n">ConfigurationBuilder</span><span class="p">.</span><span class="n">AddEnvironmentVariables</span><span class="p">(</span><span class="s">&quot;ANY_PREFIX_YOU_WANT_&quot;</span><span class="p">).</span><span class="n">Build</span><span class="p">();</span>
</pre></div>
</div>
<p>However, there is an exception. You must set the environment key using ASPNETCORE_ENVIRONMENT. This is picked up by default by the WebHostBuilder, unlike the other variables. We still support ASPNET_ENV and Hosting:Environment in RC2, but the user will see a message indicating these values are deprecated.</p>
</div>
<div class="section" id="hosting-service-changes">
<h2><a class="toc-backref" href="#id6">Hosting Service changes</a><a class="headerlink" href="#hosting-service-changes" title="Permalink to this headline">¶</a></h2>
<p>You must modify code in the <code class="docutils literal"><span class="pre">Startup</span></code> class that uses <code class="docutils literal"><span class="pre">IApplicationEnvironment</span></code> to use <code class="docutils literal"><span class="pre">IHostingEnvironment</span></code>:</p>
<p>Change:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nf">Startup</span><span class="p">(</span><span class="n">IApplicationEnvironment</span> <span class="n">applicationEnvironment</span><span class="p">)</span>
<span class="p">{</span>
   <span class="kt">var</span> <span class="n">builder</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ConfigurationBuilder</span><span class="p">()</span>
     <span class="p">.</span><span class="n">SetBasePath</span><span class="p">(</span><span class="n">applicationEnvironment</span><span class="p">.</span><span class="n">ApplicationBasePath</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nf">Startup</span><span class="p">(</span><span class="n">IHostingEnvironment</span> <span class="n">hostingEnvironment</span><span class="p">)</span>
<span class="p">{</span>
   <span class="kt">var</span> <span class="n">builder</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ConfigurationBuilder</span><span class="p">()</span>
    <span class="p">.</span><span class="n">SetBasePath</span><span class="p">(</span><span class="n">hostingEnvironment</span><span class="p">.</span><span class="n">ContentRootPath</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="working-with-iis">
<h2><a class="toc-backref" href="#id7">Working with IIS</a><a class="headerlink" href="#working-with-iis" title="Permalink to this headline">¶</a></h2>
<p>The package ID <code class="docutils literal"><span class="pre">Microsoft.AspNetCore.IISPlatformHandler</span></code> is now <code class="docutils literal"><span class="pre">Microsoft.AspNetCore.Server.IISIntegration</span></code>.</p>
<p>HttpPlatformHandler was replaced by ASP.NET Core Module. The <code class="docutils literal"><span class="pre">web.config</span></code> created by the Publish IIS tool now configures IIS to use ASP.NET Core Module instead of HttpPlatformHandler to reverse-proxy requests to Kestrel.</p>
<p>The ASP.NET Core Module must be configured in <code class="docutils literal"><span class="pre">web.config</span></code>:</p>
<div class="highlight-Xml"><div class="highlight"><pre><span></span><span class="nt">&lt;configuration&gt;</span>
  <span class="nt">&lt;system.webServer&gt;</span>
    <span class="nt">&lt;handlers&gt;</span>
      <span class="nt">&lt;add</span> <span class="na">name=</span><span class="s">&quot;aspNetCore&quot;</span> <span class="na">path=</span><span class="s">&quot;*&quot;</span> <span class="na">verb=</span><span class="s">&quot;*&quot;</span>
              <span class="na">modules=</span><span class="s">&quot;AspNetCoreModule&quot;</span> <span class="na">resourceType=</span><span class="s">&quot;Unspecified&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/handlers&gt;</span>
    <span class="nt">&lt;aspNetCore</span> <span class="na">processPath=</span><span class="s">&quot;%LAUNCHER_PATH%&quot;</span> <span class="na">arguments=</span><span class="s">&quot;%LAUNCHER_ARGS%&quot;</span>
        <span class="na">stdoutLogEnabled=</span><span class="s">&quot;false&quot;</span> <span class="na">stdoutLogFile=</span><span class="s">&quot;.\logs\stdout&quot;</span>
        <span class="na">forwardWindowsAuthToken=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/system.webServer&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</pre></div>
</div>
<p>The Publish IIS tool can generate the correct <code class="docutils literal"><span class="pre">web.config</span></code> for you when you publish. See <a class="reference internal" href="../publishing/iis.html"><span class="doc">Publishing to IIS</span></a> for more details.</p>
<p>IIS integration middleware is now setup using <code class="docutils literal"><span class="pre">WebHostBuilder</span></code> in <code class="docutils literal"><span class="pre">Program.Main()</span></code>, and is no longer called in the <code class="docutils literal"><span class="pre">Configure()</span></code> method of the <code class="docutils literal"><span class="pre">Startup</span></code> class.</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
<span class="p">{</span>
  <span class="kt">var</span> <span class="n">host</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebHostBuilder</span><span class="p">().</span><span class="n">UseIISIntegration</span><span class="p">().</span><span class="n">Build</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="web-deploy-changes">
<h3>Web Deploy changes<a class="headerlink" href="#web-deploy-changes" title="Permalink to this headline">¶</a></h3>
<p>Delete <code class="docutils literal"><span class="pre">RC1StarterWeb</span> <span class="pre">-</span> <span class="pre">Web</span> <span class="pre">Deploy-publish.ps1</span></code>. This is a script generated by VS for web deploy. There is a version for RC1 projects (dnx based) and a different script for RC2 projects (dotnet based) which are incompatible with each other. As such, when migrating to RC2, you need to delete the old script and let VS generate a new one to ensure web deploy works for the converted RC2 project.</p>
</div>
<div class="section" id="applicationhost-config">
<h3>Applicationhost.config<a class="headerlink" href="#applicationhost-config" title="Permalink to this headline">¶</a></h3>
<p>If <code class="docutils literal"><span class="pre">applicationhost.config</span></code> was created with RC1 or early RC2 it will point to a wrong application folder. The <code class="docutils literal"><span class="pre">applicationhost.config</span></code> file will read <code class="docutils literal"><span class="pre">wwwroot</span></code> as the application folder and this is where IIS will look for <code class="docutils literal"><span class="pre">web.config</span></code> file. However, since the <code class="docutils literal"><span class="pre">web.config</span></code> file now goes in the <code class="docutils literal"><span class="pre">approot</span></code>, IIS won&#8217;t find the file and the user may not be able to start the appliation with IIS.</p>
</div>
</div>
<div class="section" id="mvc">
<h2><a class="toc-backref" href="#id8">MVC</a><a class="headerlink" href="#mvc" title="Permalink to this headline">¶</a></h2>
<p>To compile views, set the <code class="docutils literal"><span class="pre">preserveCompilationContext</span></code> option in <code class="docutils literal"><span class="pre">project.json</span></code> to preserve the compilation context, as shown here:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="nt">&quot;buildOptions&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="nt">&quot;emitEntryPoint&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;preserveCompilationContext&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">},</span>
</pre></div>
</div>
<p>You no longer need to reference the Tag Helper package <code class="docutils literal"><span class="pre">Microsoft.AspNetCore.Mvc.TagHelpers</span></code>, which was renamed to <code class="docutils literal"><span class="pre">Microsoft.AspNetCore.Mvc.TagHelpers</span></code> in RC2. The package is now referenced by MVC by default.</p>
<div class="section" id="controller-and-action-results-renamed">
<h3>Controller and action results renamed<a class="headerlink" href="#controller-and-action-results-renamed" title="Permalink to this headline">¶</a></h3>
<p>The following methods on the <code class="docutils literal"><span class="pre">Controller</span></code> base class have been renamed.</p>
<table border="1" class="docutils">
<colgroup>
<col width="65%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">RC1</th>
<th class="head">RC2</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>HttpUnauthorized</td>
<td>Unauthorized</td>
</tr>
<tr class="row-odd"><td>HttpNotFound (and its overloads)</td>
<td>NotFound</td>
</tr>
<tr class="row-even"><td>HttpBadRequest (and its overloads)</td>
<td>BadRequest</td>
</tr>
</tbody>
</table>
<p>The following action result types have also been renamed.</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">RC1</th>
<th class="head">RC2</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Microsoft.AspNetCore.Mvc.HttpUnauthorizedResult</td>
<td>Microsoft.AspNetCore.Mvc.UnauthorizedResult</td>
</tr>
<tr class="row-odd"><td>Microsoft.AspNetCore.Mvc.HttpOkResult</td>
<td>Microsoft.AspNetCore.Mvc.OkResult</td>
</tr>
<tr class="row-even"><td>Microsoft.AspNetCore.Mvc.HttpOkObjectResult</td>
<td>Microsoft.AspNetCore.Mvc.OkObjectResult</td>
</tr>
<tr class="row-odd"><td>Microsoft.AspNetCore.Mvc.HttpNotFoundResult</td>
<td>Microsoft.AspNetCore.Mvc.NotFoundResult</td>
</tr>
<tr class="row-even"><td>Microsoft.AspNetCore.Mvc.HttpNotFoundObjectResult</td>
<td>Microsoft.AspNetCore.Mvc.NotFoundObjectResult</td>
</tr>
<tr class="row-odd"><td>Microsoft.AspNetCore.Mvc.HttpStatusCodeResult</td>
<td>Microsoft.AspNetCore.Mvc.StatusCodeResult</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="changes-in-views">
<h3>Changes in views<a class="headerlink" href="#changes-in-views" title="Permalink to this headline">¶</a></h3>
<p>Views now support relative paths.</p>
<p>The Validation Summary Tag Helper has changed.</p>
<p>RC1:</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">asp-validation-summary</span><span class="o">=</span><span class="s">&quot;ValidationSummary.All&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-danger&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>RC2:</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">asp-validation-summary</span><span class="o">=</span><span class="s">&quot;All&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-danger&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="viewcomponents-changes">
<h3>ViewComponents changes<a class="headerlink" href="#viewcomponents-changes" title="Permalink to this headline">¶</a></h3>
<p>The sync APIs have been removed.</p>
<p>To reduce ambiguity in ViewComponent method selection, we&#8217;ve modified the selection to only allow exactly one <code class="docutils literal"><span class="pre">Invoke()</span></code> or <code class="docutils literal"><span class="pre">InvokeAsync()</span></code> per ViewComponent.
<code class="docutils literal"><span class="pre">Component.Render()</span></code>, <code class="docutils literal"><span class="pre">Component.RenderAsync()</span></code>, and <code class="docutils literal"><span class="pre">Component.Invoke()</span></code> have been removed.</p>
<p><code class="docutils literal"><span class="pre">InvokeAsync()</span></code> now takes an anonynmous object instead of separate parameters. To use the view component, call &#64;Component.InvokeAsync(&#8220;Name of view component&#8221;, &lt;parameters&gt;) from a view. The parameters will be passed to the <code class="docutils literal"><span class="pre">InvokeAsync()</span></code> method. The following example demonstrates the <code class="docutils literal"><span class="pre">InvokeAsync()</span></code> method call with two parameters:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="c1">// RC1 signature</span>
<span class="n">@Component</span><span class="p">.</span><span class="n">InvokeAsync</span><span class="p">(</span><span class="s">&quot;Test&quot;</span><span class="p">,</span> <span class="s">&quot;MyName&quot;</span><span class="p">,</span> <span class="m">15</span><span class="p">)</span>

<span class="c1">// RC2 signatures</span>
<span class="n">@Component</span><span class="p">.</span><span class="n">InvokeAsync</span><span class="p">(</span><span class="s">&quot;Test&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="p">{</span> <span class="n">name</span> <span class="p">=</span> <span class="s">&quot;MyName&quot;</span><span class="p">,</span> <span class="n">age</span> <span class="p">=</span> <span class="m">15</span> <span class="p">})</span>

<span class="n">@Component</span><span class="p">.</span><span class="n">InvokeAsync</span><span class="p">(</span><span class="s">&quot;Test&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="p">{</span> <span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">]</span> <span class="p">=</span> <span class="s">&quot;MyName&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;age&quot;</span><span class="p">]</span> <span class="p">=</span> <span class="m">15</span> <span class="p">})</span>

<span class="n">@Component</span><span class="p">.</span><span class="n">InvokeAsync</span><span class="p">&lt;</span><span class="n">TestViewComponent</span><span class="p">&gt;(</span><span class="k">new</span> <span class="p">{</span> <span class="n">name</span> <span class="p">=</span> <span class="s">&quot;MyName&quot;</span><span class="p">,</span> <span class="n">age</span> <span class="p">=</span> <span class="m">15</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="updated-controller-discovery-rules">
<h3>Updated controller discovery rules<a class="headerlink" href="#updated-controller-discovery-rules" title="Permalink to this headline">¶</a></h3>
<p>There are changes that simplify controller discovery:</p>
<p>There is a new <code class="docutils literal"><span class="pre">Controller</span></code> attribute that can be used to mark a class and their descendants as controllers.
Classes whose name doesn&#8217;t end in <code class="docutils literal"><span class="pre">Controller</span></code> and derive from a base class that ends in <code class="docutils literal"><span class="pre">Controller</span></code> are no longer considered controllers. In this scenario the <code class="docutils literal"><span class="pre">[Controller]</span></code> attribute must be applied to the <code class="docutils literal"><span class="pre">Controller</span></code> class itself or to the base class.</p>
<p>We now consider a type to be a controller if all of the following rules apply:</p>
<ul class="simple">
<li>The type is a public, concrete, non open generic class.</li>
<li>[NonController] is not applied to any type of the hierarchy.</li>
<li>The type name ends with <code class="docutils literal"><span class="pre">Controller</span></code>, or if the <code class="docutils literal"><span class="pre">[Controller]</span></code> attribute is applied to the type or to one of its ancestors.</li>
<li>It&#8217;s important to note that if <code class="docutils literal"><span class="pre">[NonController]</span></code> is applied anywhere in the type hierarchy the discovery conventions will never consider that type or its descendants to be a controller. <code class="docutils literal"><span class="pre">[NonController]</span></code> takes precedence over <code class="docutils literal"><span class="pre">[Controller]</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="configuration">
<h2><a class="toc-backref" href="#id9">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">IConfigurationSource</span></code> has been introduced to represent the settings/configuration which is used to <code class="docutils literal"><span class="pre">Build()</span></code> an <code class="docutils literal"><span class="pre">IConfigurationProvider</span></code>. It is no longer possible to access the provider instances from <code class="docutils literal"><span class="pre">IConfigurationBuilder</span></code> only the sources. This is intentional, but may cause loss of functionality as you can longer do things like explicitly call <code class="docutils literal"><span class="pre">Load</span></code> on the provider instances.</p>
<p><code class="docutils literal"><span class="pre">FileConfigurationProvider</span></code> base class has been introduced as a common root for JSON/XML/INI providers. This allows the ability to specify an <code class="docutils literal"><span class="pre">IFileProvider</span></code> on the source which will be used to read the file instead of explicitly using <code class="docutils literal"><span class="pre">File.Open()</span></code>. The side effect of this change is that absolute paths are no longer supported. The file path must be relative to the base path of the <code class="docutils literal"><span class="pre">IConfigurationBuilder</span></code>&#8216;s basepath or the <code class="docutils literal"><span class="pre">IFileProvider</span></code>, if specified.</p>
<div class="section" id="json-configuration-syntax-change">
<h3>JSON configuration syntax change<a class="headerlink" href="#json-configuration-syntax-change" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">ConfigurationRoot.ReloadOnChanged()</span></code> is no longer available, it is added explicitly via <code class="docutils literal"><span class="pre">ConfigurationBuilder.AddJsonFile()</span></code>.</p>
</div>
</div>
<div class="section" id="logging">
<h2><a class="toc-backref" href="#id10">Logging</a><a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h2>
<p>Logging extensions have been simplified and clarified. <code class="docutils literal"><span class="pre">Verbose</span></code> has been renamed to <code class="docutils literal"><span class="pre">Trace</span></code> and has had its severity reduced to below <code class="docutils literal"><span class="pre">Debug</span></code>. As a comparison before and after the change, the values of <code class="docutils literal"><span class="pre">LogLevel</span></code> are listed here with the most severe level at the top:</p>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Old Levels</th>
<th class="head">New Levels</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Critical</td>
<td>Critical</td>
</tr>
<tr class="row-odd"><td>Error</td>
<td>Error</td>
</tr>
<tr class="row-even"><td>Warning</td>
<td>Warning</td>
</tr>
<tr class="row-odd"><td>Information</td>
<td>Information</td>
</tr>
<tr class="row-even"><td>Verbose</td>
<td>Debug</td>
</tr>
<tr class="row-odd"><td>Debug</td>
<td>Trace</td>
</tr>
</tbody>
</table>
<p><code class="docutils literal"><span class="pre">ILoggerFactory</span></code> no longer contains <code class="docutils literal"><span class="pre">AddConsole</span></code>.</p>
</div>
<div class="section" id="identity">
<h2><a class="toc-backref" href="#id11">Identity</a><a class="headerlink" href="#identity" title="Permalink to this headline">¶</a></h2>
<p>The signatures for the following methods or properties have changed:</p>
<table border="1" class="docutils">
<colgroup>
<col width="59%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">RC1</th>
<th class="head">RC2</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ExternalLoginInfo.ExternalPrincipal</td>
<td>ExternalLoginInfo.Principal</td>
</tr>
<tr class="row-odd"><td>User.IsSignedIn()</td>
<td>SignInManager.IsSignedIn(User)</td>
</tr>
<tr class="row-even"><td>await UserManager.FindByIdAsync(HttpContext.User.GetUserId())</td>
<td>UserManager.GetUserAsync(HttpContext.User)</td>
</tr>
<tr class="row-odd"><td>User.GetUserId()</td>
<td>UserManager.GetUserId(User)</td>
</tr>
</tbody>
</table>
<p>To use the Identity API in views, add the following directives to the view:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="n">@using</span> <span class="n">Microsoft</span><span class="p">.</span><span class="n">AspNetCore</span><span class="p">.</span><span class="n">Identity</span>
<span class="n">@inject</span> <span class="n">SignInManager</span> <span class="n">SignInManager</span>
<span class="n">@inject</span> <span class="n">UserManager</span> <span class="n">UserManager</span>
</pre></div>
</div>
</div>
<div class="section" id="updating-launch-settings-in-visual-studio">
<h2><a class="toc-backref" href="#id12">Updating Launch Settings in Visual Studio</a><a class="headerlink" href="#updating-launch-settings-in-visual-studio" title="Permalink to this headline">¶</a></h2>
<p>Update <code class="docutils literal"><span class="pre">launchSettings.json</span></code> to remove web target and add the following:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="s">&quot;WebApplication1&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="s">&quot;commandName&quot;</span><span class="p">:</span> <span class="s">&quot;Project&quot;</span><span class="p">,</span>
   <span class="s">&quot;launchBrowser&quot;</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span>
   <span class="s">&quot;launchUrl&quot;</span><span class="p">:</span> <span class="s">&quot;http://localhost:5000&quot;</span><span class="p">,</span>
   <span class="s">&quot;environmentVariables&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="s">&quot;ASPNETCORE_ENVIRONMENT&quot;</span><span class="p">:</span> <span class="s">&quot;Development&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>



  
  <!-- Helpfulness -->
  <div id="helpful-position"></div>
  <div id="helpful" class="helpfulness-container" style="display:none;">
    <div class="helpfulness">
      <div class="helpfulness-form">
        <h2>Is this page helpful?</h2>
        <a id="helpfulness-btn-yes" href="javascript:;" class="common-btn first">Yes</a>
        <a id="helpfulness-btn-no" href="javascript:;" class="common-btn">No</a>
      </div>
      <div class="helpfulness-form-no" style="display:none;">
        <h2>Is this page helpful?</h2>
        Sorry this wasn't helpful.
        <input type="text" id="txt-helpfulness" placeholder="Please let us know why this wasn't helpful">
        <span id="helpfulness-characters-left">characters remaining</span>
        <a id="helpfulness-btn-submit" href="javascript:;" class="common-btn">Submit</a>
        <a id="helpfulness-btn-skip" href="javascript:;" class="common-btn secondary">Skip this</a>
      </div>
      <a href="javascript:;" class="helpfulness-close">✖</a>
      <div class="messages processing" style="display:none;">
        Sending feedback...
      </div>
      <div class="messages success" style="display:none;">
        Thank you for your feedback!
      </div>
      <div class="messages helpfulness-error" style="display:none;">
        Error during submission!
      </div>
    </div>
  </div>
  

  <!-- wedc -->
  <noscript>
    <img alt="" width="1" height="1" src="https://c.microsoft.com/trans_pixel.aspx"/>
  </noscript>

  
    <!-- disqus -->
    <button id="showComments" type="button" class="btn btn-neutral"><i class="fa fa-comment"></i> Show comments</button>
    <div id="disqus_thread"></div>
    <hr/>
  
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../contribute/index.html" class="btn btn-neutral float-right" title="Contribute" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="http-modules.html" class="btn btn-neutral" title="Migrating HTTP Modules to Middleware" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Microsoft.
      Last updated on Jun 21, 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  Documentation licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>.


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/helpfulness.js?v=6"></script>
      <script type="text/javascript" src="../_static/disqus.js?v=6"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>