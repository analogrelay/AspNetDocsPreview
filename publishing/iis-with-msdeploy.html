

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Publishing to IIS with Web Deploy using Visual Studio &mdash; ASP.NET  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/custom.css?v=6" type="text/css" />
  

  
    <link rel="top" title="ASP.NET  documentation" href="../index.html"/>
        <link rel="up" title="Publishing and Deployment" href="index.html"/>
        <link rel="next" title="How Web Publishing In Visual Studio Works" href="web-publishing-vs.html"/>
        <link rel="prev" title="Publishing to IIS" href="iis.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> ASP.NET
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.asp.net/projects/api">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conceptual-overview/index.html">Conceptual Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fundamentals/index.html">Fundamentals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mvc/index.html">MVC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/index.html">Working with Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client-side/index.html">Client-Side Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mobile/index.html">Mobile</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Publishing and Deployment</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="iis.html">Publishing to IIS</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Publishing to IIS with Web Deploy using Visual Studio</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="web-publishing-vs.html">How Web Publishing In Visual Studio Works</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/publish-to-azure-webapp-using-vs.html">Deploy an ASP.NET Core web app to Azure using Visual Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="azure-continuous-deployment.html">Publishing to an Azure Web App with Continuous Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="azure-windows-vm.html">ðŸ”§ Publishing to a Windows Virtual Machine on Azure</a></li>
<li class="toctree-l2"><a class="reference external" href="https://azure.microsoft.com/documentation/articles/vs-azure-tools-docker-hosting-web-apps-in-docker/">Publish to a Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="linuxproduction.html">Publish to a Linux Production Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to-customize.html">ðŸ”§ How to Customize Publishing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../hosting/index.html">Guidance for Hosting Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance/index.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration/index.html">Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/index.html">Contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">ASP.NET</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Publishing and Deployment</a> &raquo;</li>
      
    <li>Publishing to IIS with Web Deploy using Visual Studio</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/publishing/iis-with-msdeploy.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
  <div class="section" id="publishing-to-iis-with-web-deploy-using-visual-studio">
<h1>Publishing to IIS with Web Deploy using Visual Studio<a class="headerlink" href="#publishing-to-iis-with-web-deploy-using-visual-studio" title="Permalink to this headline">Â¶</a></h1>
<p>By <a class="reference external" href="https://github.com/sayedihashimi">Sayed Ibrahim Hashimi</a></p>
<p>Publishing an ASP.NET Core project to an IIS server with Web Deploy requires a few additional steps in comparison to an ASP.NET 4 project. We are working on simplifying the experience for the next version. Until then you can use these instructions to get started with publishing an ASP.NET Core web application using Web Deploy to any IIS host.</p>
<p>To publish an ASP.NET Core application to a remote IIS server the following steps are required.</p>
<ol class="arabic simple">
<li>Configure your remote IIS server to support ASP.NET Core</li>
<li>Create a publish profile</li>
<li>Customize the profile to support Web Deploy publish</li>
</ol>
<p>In this document we will walk through each step.</p>
<div class="section" id="preparing-your-web-server-for-asp-net-core">
<h2>Preparing your web server for ASP.NET Core<a class="headerlink" href="#preparing-your-web-server-for-asp-net-core" title="Permalink to this headline">Â¶</a></h2>
<p>The first step is to ensure that your remote server is configured for ASP.NET Core. At a high level youâ€™ll need.</p>
<ol class="arabic simple">
<li>An IIS server with IIS 7.5+</li>
<li>Install HttpPlatformHandler</li>
<li>Install Web Deploy v3.6</li>
</ol>
<p>The HttpPlatformHandler is a new component that connects IIS with your ASP.NET Core application. You can get that from the following download links.</p>
<ul class="simple">
<li><a class="reference external" href="http://go.microsoft.com/fwlink/?LinkID=690721">64 bit HttpPlatformHandler</a></li>
<li><a class="reference external" href="http://go.microsoft.com/fwlink/?LinkId=690722">32 bit HttpPlatformHandler</a></li>
</ul>
<p>In addition to installing the HttpPlatformHandler, youâ€™ll need to install the latest version of Web Deploy (version 3.6). To install Web Deploy 3.6 you can use the <a class="reference external" href="https://www.microsoft.com/web/downloads/platform.aspx">the Web Platform Installer</a>. (WebPI) or <a class="reference external" href="https://www.microsoft.com/en-us/download/details.aspx?id=43717">directly from the download center</a>. The preferred method is to use WebPI. WebPI offers a standalone setup as well as a configuration for hosting providers.</p>
</div>
<div class="section" id="configure-data-protection">
<h2>Configure Data Protection<a class="headerlink" href="#configure-data-protection" title="Permalink to this headline">Â¶</a></h2>
<p>To persist Data Protection keys you must create registry hives for each application pool to store the keys. You should use the <a class="reference external" href="https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1">Provisioning PowerShell script</a> for each application pool you will be hosting ASP.NET Core applications under.</p>
<p>For web farm scenarios developers can configure their applications to use a UNC path to store the data protection key ring. By default this does not encrypt the key ring. You can deploy an x509 certificate to each machine and use that to encrypt the keyring. See the <a class="reference internal" href="../security/data-protection/configuration/overview.html#data-protection-configuring"><span class="std std-ref">configuration APIs</span></a> for more details.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Data Protection is used by various ASP.NET middlewares, including those used in authentication. Even if you do not specifically call any Data Protection APIs from your own code you should configure Data Protection with the deployment script or in your own code. If you do not configure data protection when using IIS by default the keys will be held in memory and discarded when your application closes or restarts. This will then, for example, invalidate any cookies written by the cookie authentication and users will have to login again.</p>
</div>
<p>You can find more info on configuring your IIS server for ASP.NET Core at <a class="reference internal" href="iis.html"><span class="doc">Publishing to IIS</span></a>. Now letâ€™s move on to the Visual Studio experience.</p>
</div>
<div class="section" id="publishing-with-visual-studio">
<h2>Publishing with Visual Studio<a class="headerlink" href="#publishing-with-visual-studio" title="Permalink to this headline">Â¶</a></h2>
<p>After you have configured your web server, the next thing to do is to create a publish profile in Visual Studio. The easiest way to get started with publishing an ASP.NET Core application to a standard IIS host is to use a publish profile. If your hosting provider has support for creating a publish profile, download that and then import it into the Visual Studio publish dialog with the Import button. You can see that dialog shown below.</p>
<img alt="../_images/pub-dialog.png" src="../_images/pub-dialog.png" />
<p>After importing the publish profile, there is one additional step that needs to be taken before being able to publish to a standard IIS host. In the publish PowerShell script generated (under PropertiesPublishProfiles) update the publish module version number from <code class="docutils literal"><span class="pre">1.0.1</span></code> to <code class="docutils literal"><span class="pre">1.0.2-beta2</span></code>. After changing <code class="docutils literal"><span class="pre">1.0.1</span></code> to <code class="docutils literal"><span class="pre">1.0.2-beta2</span></code> you can use the Visual Studio publish dialog to publish and preview changes.</p>
</div>
</div>



  
  <!-- Helpfulness -->
  <div id="helpful-position"></div>
  <div id="helpful" class="helpfulness-container" style="display:none;">
    <div class="helpfulness">
      <div class="helpfulness-form">
        <h2>Is this page helpful?</h2>
        <a id="helpfulness-btn-yes" href="javascript:;" class="common-btn first">Yes</a>
        <a id="helpfulness-btn-no" href="javascript:;" class="common-btn">No</a>
      </div>
      <div class="helpfulness-form-no" style="display:none;">
        <h2>Is this page helpful?</h2>
        Sorry this wasn't helpful.
        <input type="text" id="txt-helpfulness" placeholder="Please let us know why this wasn't helpful">
        <span id="helpfulness-characters-left">characters remaining</span>
        <a id="helpfulness-btn-submit" href="javascript:;" class="common-btn">Submit</a>
        <a id="helpfulness-btn-skip" href="javascript:;" class="common-btn secondary">Skip this</a>
      </div>
      <a href="javascript:;" class="helpfulness-close">âœ–</a>
      <div class="messages processing" style="display:none;">
        Sending feedback...
      </div>
      <div class="messages success" style="display:none;">
        Thank you for your feedback!
      </div>
      <div class="messages helpfulness-error" style="display:none;">
        Error during submission!
      </div>
    </div>
  </div>
  

  <!-- wedc -->
  <noscript>
    <img alt="" width="1" height="1" src="https://c.microsoft.com/trans_pixel.aspx"/>
  </noscript>

  
    <!-- disqus -->
    <button id="showComments" type="button" class="btn btn-neutral"><i class="fa fa-comment"></i> Show comments</button>
    <div id="disqus_thread"></div>
    <hr/>
  
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="web-publishing-vs.html" class="btn btn-neutral float-right" title="How Web Publishing In Visual Studio Works" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="iis.html" class="btn btn-neutral" title="Publishing to IIS" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Microsoft.
      Last updated on Jun 21, 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  Documentation licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>.


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/helpfulness.js?v=6"></script>
      <script type="text/javascript" src="../_static/disqus.js?v=6"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>