

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Globalization and localization &mdash; ASP.NET  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/custom.css?v=6" type="text/css" />
  

  
    <link rel="top" title="ASP.NET  documentation" href="../index.html"/>
        <link rel="up" title="Fundamentals" href="index.html"/>
        <link rel="next" title="Configuration" href="configuration.html"/>
        <link rel="prev" title="Error Handling" href="error-handling.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> ASP.NET
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.asp.net/projects/api">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conceptual-overview/index.html">Conceptual Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Fundamentals</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="startup.html">Application Startup</a></li>
<li class="toctree-l2"><a class="reference internal" href="middleware.html">Middleware</a></li>
<li class="toctree-l2"><a class="reference internal" href="static-files.html">Working with Static Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing.html">Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="diagnostics.html">Diagnostics</a></li>
<li class="toctree-l2"><a class="reference internal" href="error-handling.html">Error Handling</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Globalization and localization</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="file-providers.html">ðŸ”§ File Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="dependency-injection.html">Dependency Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="environments.html">Working with Multiple Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="app-state.html">Managing Application State</a></li>
<li class="toctree-l2"><a class="reference internal" href="servers.html">Servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="request-features.html">Request Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="owin.html">OWIN</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mvc/index.html">MVC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/index.html">Working with Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client-side/index.html">Client-Side Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mobile/index.html">Mobile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publishing/index.html">Publishing and Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosting/index.html">Guidance for Hosting Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance/index.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration/index.html">Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/index.html">Contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">ASP.NET</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Fundamentals</a> &raquo;</li>
      
    <li>Globalization and localization</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/fundamentals/localization.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
  <div class="section" id="globalization-and-localization">
<h1>Globalization and localization<a class="headerlink" href="#globalization-and-localization" title="Permalink to this headline">Â¶</a></h1>
<p><a class="reference external" href="https://twitter.com/RickAndMSFT">Rick Anderson</a>, <a class="reference external" href="https://twitter.com/damien_bod">Damien Bowden</a>, <a class="reference external" href="https://twitter.com/bartmax">Bart Calixto</a>, <a class="reference external" href="https://twitter.com/NadeemAfana">Nadeem Afana</a></p>
<p>Creating a multilingual website with ASP.NET Core will allow your site to reach a wider audience. ASP.NET Core provides services and middleware for localizing into different languages and cultures.</p>
<p>Internationalization involves <a class="reference external" href="https://msdn.microsoft.com/en-us/library/aa292081(v=vs.71).aspx">Globalization</a> and <a class="reference external" href="https://msdn.microsoft.com/en-us/library/aa292137(v=vs.71).aspx">Localization</a>. Globalization is the process of designing apps that support different cultures. Globalization adds support for input, display, and output of a defined set of language scripts that relate to specific geographic areas.</p>
<p>Localization is the process of adapting a globalized app, which you have already processed for localizability, to a particular culture/locale.  For more information see <strong>Globalization and localization terms</strong> near the end of this document.</p>
<p>App localization involves the following:</p>
<ol class="arabic simple">
<li>Make the app&#8217;s content localizable</li>
<li>Provide localized resources for the languages and cultures you support</li>
<li>Implement a strategy to select the language/culture for each request</li>
</ol>
<div class="contents local topic" id="sections">
<p class="topic-title first">Sections:</p>
<ul class="simple">
<li><a class="reference internal" href="#make-the-app-s-content-localizable" id="id2">Make the app&#8217;s content localizable</a></li>
<li><a class="reference internal" href="#view-localization" id="id3">View localization</a></li>
<li><a class="reference internal" href="#dataannotations-localization" id="id4">DataAnnotations localization</a></li>
<li><a class="reference internal" href="#provide-localized-resources-for-the-languages-and-cultures-you-support" id="id5">Provide localized resources for the languages and cultures you support</a></li>
<li><a class="reference internal" href="#working-with-resource-files" id="id6">Working with resource files</a></li>
<li><a class="reference internal" href="#implement-a-strategy-to-select-the-language-culture-for-each-request" id="id7">Implement a strategy to select the language/culture for each request</a></li>
<li><a class="reference internal" href="#resource-file-naming" id="id8">Resource file naming</a></li>
<li><a class="reference internal" href="#globalization-and-localization-terms" id="id9">Globalization and localization terms</a></li>
<li><a class="reference internal" href="#additional-resources" id="id10">Additional Resources</a></li>
</ul>
</div>
<div class="section" id="make-the-app-s-content-localizable">
<h2><a class="toc-backref" href="#id2">Make the app&#8217;s content localizable</a><a class="headerlink" href="#make-the-app-s-content-localizable" title="Permalink to this headline">Â¶</a></h2>
<p>Introduced in ASP.NET Core, <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/Extensions/Localization/IStringLocalizer/index.html">IStringLocalizer</a> and <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/Extensions/Localization/IStringLocalizer-T/index.html">IStringLocalizer&lt;T&gt;</a> were architected to improve productivity when developing localized apps. <code class="docutils literal"><span class="pre">IStringLocalizer</span></code> uses the <a class="reference external" href="https://msdn.microsoft.com/en-us/library/system.resources.resourcemanager(v=vs.110).aspx">ResourceManager</a> and <a class="reference external" href="https://msdn.microsoft.com/en-us/library/system.resources.resourcereader(v=vs.110).aspx">ResourceReader</a> to provide culture-specific resources at run time. The simple interface has an indexer and an <code class="docutils literal"><span class="pre">IEnumerable</span></code> for returning localized strings. <code class="docutils literal"><span class="pre">IStringLocalizer</span></code> doesn&#8217;t require you to store the default language strings in a resource file. You can develop an app targeted for localization and not need to create resource files early in development. The code below shows how to wrap the string &#8220;About Title&#8221; for localization.</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">Microsoft.AspNet.Mvc</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.Extensions.Localization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Localization.StarterWeb.Controllers</span>
<span class="p">{</span>
<span class="na">    [Route(&quot;api/[controller]</span><span class="s">&quot;)]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">AboutController</span> <span class="p">:</span> <span class="n">Controller</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">IStringLocalizer</span><span class="p">&lt;</span><span class="n">AboutController</span><span class="p">&gt;</span> <span class="n">_localizer</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">AboutController</span><span class="p">(</span><span class="n">IStringLocalizer</span><span class="p">&lt;</span><span class="n">AboutController</span><span class="p">&gt;</span> <span class="n">localizer</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_localizer</span> <span class="p">=</span> <span class="n">localizer</span><span class="p">;</span>
        <span class="p">}</span>

<span class="na">        [HttpGet]</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="nf">Get</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">_localizer</span><span class="p">[</span><span class="s">&quot;About Title&quot;</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the code above, the <code class="docutils literal"><span class="pre">IStringLocalizer&lt;T&gt;</span></code> implementation comes from <a class="reference internal" href="dependency-injection.html"><span class="doc">Dependency Injection</span></a>. If the localized value of &#8220;About Title&#8221; is not found, then the indexer key is returned, that is, the string &#8220;About Title&#8221;. You can leave the default language literal strings in the app and wrap them in the localizer, so that you can focus on developing the app. You develop your app with your default language and prepare it for the localization step without first creating a default resource file. Alternatively, you can use the traditional approach and provide a key to retrieve the default language string. For many developers the new workflow of not having a default language <em>.resx</em> file and simply wrapping the string literals can reduce the overhead of localizing an app. Other developers will prefer the traditional work flow as it can make it easier to work with longer string literals and make it easier to update localized strings.</p>
<p>Use the <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Mvc/Localization/IHtmlLocalizer-TResource/index.html">IHtmlLocalizer&lt;T&gt;</a> implementation for resources that contain HTML. <code class="docutils literal"><span class="pre">IHtmlLocalizer</span></code> HTML encodes arguments that are formatted in the resource string, but not the resource string. In the sample highlighted below, only the value of <code class="docutils literal"><span class="pre">name</span></code> parameter is HTML encoded.</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.AspNet.Http</span><span class="p">;</span>
<span class="hll"><span class="k">using</span> <span class="nn">Microsoft.AspNet.Localization</span><span class="p">;</span>
</span><span class="k">using</span> <span class="nn">Microsoft.AspNet.Mvc</span><span class="p">;</span>
<span class="hll"><span class="k">using</span> <span class="nn">Microsoft.AspNet.Mvc.Localization</span><span class="p">;</span>
</span>
<span class="k">namespace</span> <span class="nn">Localization.StarterWeb.Controllers</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">BookController</span> <span class="p">:</span> <span class="n">Controller</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">IHtmlLocalizer</span><span class="p">&lt;</span><span class="n">BookController</span><span class="p">&gt;</span> <span class="n">_localizer</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">BookController</span><span class="p">(</span><span class="n">IHtmlLocalizer</span><span class="p">&lt;</span><span class="n">BookController</span><span class="p">&gt;</span> <span class="n">localizer</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_localizer</span> <span class="p">=</span> <span class="n">localizer</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="n">IActionResult</span> <span class="nf">Hello</span><span class="p">(</span><span class="kt">string</span> <span class="n">name</span><span class="p">)</span>
        <span class="p">{</span>
<span class="hll">            <span class="n">ViewData</span><span class="p">[</span><span class="s">&quot;Message&quot;</span><span class="p">]</span> <span class="p">=</span> <span class="n">_localizer</span><span class="p">[</span><span class="s">&quot;&lt;b&gt;Hello&lt;/b&gt;&lt;i&gt; {0}&lt;/i&gt;&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">];</span>
</span>
            <span class="k">return</span> <span class="nf">View</span><span class="p">();</span>
        <span class="p">}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body">You generally want to only localize text and not HTML.</td>
</tr>
</tbody>
</table>
<p>At the lowest level, you can get <code class="docutils literal"><span class="pre">IStringLocalizerFactory</span></code> out of <a class="reference internal" href="dependency-injection.html"><span class="doc">Dependency Injection</span></a>:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span> <span class="k">public</span> <span class="k">class</span> <span class="nc">TestController</span> <span class="p">:</span> <span class="n">Controller</span>
 <span class="p">{</span>
     <span class="k">private</span> <span class="k">readonly</span> <span class="n">IStringLocalizer</span> <span class="n">_localizer</span><span class="p">;</span>
     <span class="k">private</span> <span class="k">readonly</span> <span class="n">IStringLocalizer</span> <span class="n">_localizer2</span><span class="p">;</span>

<span class="hll">     <span class="k">public</span> <span class="nf">TestController</span><span class="p">(</span><span class="n">IStringLocalizerFactory</span> <span class="n">factory</span><span class="p">)</span>
</span><span class="hll">     <span class="p">{</span>
</span><span class="hll">         <span class="n">_localizer</span> <span class="p">=</span> <span class="n">factory</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">SharedResource</span><span class="p">));</span>
</span><span class="hll">         <span class="n">_localizer2</span> <span class="p">=</span> <span class="n">factory</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="s">&quot;SharedResource&quot;</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span> <span class="k">null</span><span class="p">);</span>
</span><span class="hll">     <span class="p">}</span>       
</span><span class="hll">
</span>     <span class="k">public</span> <span class="n">IActionResult</span> <span class="nf">About</span><span class="p">()</span>
     <span class="p">{</span>
         <span class="n">ViewData</span><span class="p">[</span><span class="s">&quot;Message&quot;</span><span class="p">]</span> <span class="p">=</span> <span class="n">_localizer</span><span class="p">[</span><span class="s">&quot;Your application description page.&quot;</span><span class="p">]</span> 
             <span class="p">+</span> <span class="s">&quot; loc 2: &quot;</span> <span class="p">+</span> <span class="n">_localizer2</span><span class="p">[</span><span class="s">&quot;Your application description page.&quot;</span><span class="p">];</span>

         <span class="k">return</span> <span class="nf">View</span><span class="p">();</span>
     <span class="p">}</span>        
</pre></div>
</div>
<p>The code above demonstrates each of the two factory create methods.</p>
<p>You can partition your localized strings by controller, area, or have just one container. In the sample app, a dummy class named <code class="docutils literal"><span class="pre">SharedResource</span></code> is used for shared resources.</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="c1">// Dummy class to group shared resources</span>

<span class="k">namespace</span> <span class="nn">Localization.StarterWeb</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SharedResource</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Some developers use the <code class="docutils literal"><span class="pre">Startup</span></code> class to contain global or shared strings.  In the sample below, the <code class="docutils literal"><span class="pre">InfoController</span></code> and the <code class="docutils literal"><span class="pre">SharedResource</span></code> localizers are used:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span> <span class="k">public</span> <span class="k">class</span> <span class="nc">InfoController</span> <span class="p">:</span> <span class="n">Controller</span>
 <span class="p">{</span>
     <span class="k">private</span> <span class="k">readonly</span> <span class="n">IStringLocalizer</span><span class="p">&lt;</span><span class="n">InfoController</span><span class="p">&gt;</span> <span class="n">_localizer</span><span class="p">;</span>
     <span class="k">private</span> <span class="k">readonly</span> <span class="n">IStringLocalizer</span><span class="p">&lt;</span><span class="n">SharedResource</span><span class="p">&gt;</span> <span class="n">_sharedLocalizer</span><span class="p">;</span>

     <span class="k">public</span> <span class="nf">InfoController</span><span class="p">(</span><span class="n">IStringLocalizer</span><span class="p">&lt;</span><span class="n">InfoController</span><span class="p">&gt;</span> <span class="n">localizer</span><span class="p">,</span>
                    <span class="n">IStringLocalizer</span><span class="p">&lt;</span><span class="n">SharedResource</span><span class="p">&gt;</span> <span class="n">sharedLocalizer</span><span class="p">)</span>
     <span class="p">{</span>
         <span class="n">_localizer</span> <span class="p">=</span> <span class="n">localizer</span><span class="p">;</span>
         <span class="n">_sharedLocalizer</span> <span class="p">=</span> <span class="n">sharedLocalizer</span><span class="p">;</span>
     <span class="p">}</span>

     <span class="k">public</span> <span class="kt">string</span> <span class="nf">TestLoc</span><span class="p">()</span>
     <span class="p">{</span>
         <span class="kt">string</span> <span class="n">msg</span> <span class="p">=</span> <span class="s">&quot;Shared resx: &quot;</span> <span class="p">+</span> <span class="n">_sharedLocalizer</span><span class="p">[</span><span class="s">&quot;Hello!&quot;</span><span class="p">]</span> <span class="p">+</span>
                      <span class="s">&quot; Info resx &quot;</span> <span class="p">+</span> <span class="n">_localizer</span><span class="p">[</span><span class="s">&quot;Hello!&quot;</span><span class="p">];</span>
         <span class="k">return</span> <span class="n">msg</span><span class="p">;</span>
     <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="view-localization">
<h2><a class="toc-backref" href="#id3">View localization</a><a class="headerlink" href="#view-localization" title="Permalink to this headline">Â¶</a></h2>
<p>The <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Mvc/Localization/IViewLocalizer/index.html">IViewLocalizer</a> service provides localized strings for a <a class="reference external" href="http://docs.asp.net/projects/mvc/en/latest/views/index.html">view</a>. The <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Mvc/Localization/ViewLocalizer/index.html">ViewLocalizer</a> class implements this interface and finds the resource location from the view file path. The following code shows how to use the default implementation of <code class="docutils literal"><span class="pre">IViewLocalizer</span></code>:</p>
<div class="highlight-HTML"><div class="highlight"><pre><span></span>@using Microsoft.AspNet.Mvc.Localization

@inject IViewLocalizer Localizer

@{
    ViewData[&quot;Title&quot;] = Localizer[&quot;About&quot;];
}
<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>@ViewData[&quot;Title&quot;].<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>@ViewData[&quot;Message&quot;]<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>@Localizer[&quot;Use this area to provide additional information.&quot;]<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The default implementation of <code class="docutils literal"><span class="pre">IViewLocalizer</span></code> finds the resource file based on the view&#8217;s file name. There is no option to use a global shared resource file. <code class="docutils literal"><span class="pre">ViewLocalizer</span></code> implements the localizer using <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Mvc/Localization/IHtmlLocalizer/index.html">IHtmlLocalizer</a>, so Razor doesn&#8217;t HTML encode the localized string. You can parameterize resource strings and <code class="docutils literal"><span class="pre">IViewLocalizer</span></code> will HTML encode the parameters, but not the resource string. Consider the following Razor markup:</p>
<div class="highlight-HTML"><div class="highlight"><pre><span></span>@Localizer[&quot;<span class="p">&lt;</span><span class="nt">i</span><span class="p">&gt;</span>Hello<span class="p">&lt;/</span><span class="nt">i</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>{0}!<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>&quot;, UserManager.GetUserName(User)]
</pre></div>
</div>
<p>A French resource file could contain the following:</p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&lt;i&gt;Hello&lt;/i&gt; &lt;b&gt;{0}!&lt;/b&gt;</td>
<td>&lt;i&gt;Bonjour&lt;/i&gt; &lt;b&gt;{0}!&lt;/b&gt;</td>
</tr>
</tbody>
</table>
<p>The rendered view would contain the HTML markup from the resource file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body">You generally want to only localize text and not HTML.</td>
</tr>
</tbody>
</table>
<p>To use a shared resource file in a view, inject <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Mvc/Localization/IHtmlLocalizer-TResource/index.html">IHtmlLocalizer&lt;T&gt;</a>:</p>
<div class="highlight-HTML"><div class="highlight"><pre><span></span>@using Microsoft.AspNet.Mvc.Localization
@using Localization.StarterWeb.Services

@inject IViewLocalizer Localizer
<span class="hll">@inject IHtmlLocalizer<span class="p">&lt;</span><span class="nt">SharedResource</span><span class="p">&gt;</span> SharedLocalizer
</span>
@{
    ViewData[&quot;Title&quot;] = Localizer[&quot;About&quot;];
}
<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>@ViewData[&quot;Title&quot;].<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>

<span class="hll"><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>@SharedLocalizer[&quot;Hello!&quot;]<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></pre></div>
</div>
</div>
<div class="section" id="dataannotations-localization">
<h2><a class="toc-backref" href="#id4">DataAnnotations localization</a><a class="headerlink" href="#dataannotations-localization" title="Permalink to this headline">Â¶</a></h2>
<p>DataAnnotations error messages are localized with <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/Extensions/Localization/IStringLocalizer-T/index.html">IStringLocalizer&lt;T&gt;</a>. Using the option <code class="docutils literal"><span class="pre">ResourcesPath</span> <span class="pre">=</span> <span class="pre">&quot;Resources&quot;</span></code>, the error messages in <code class="docutils literal"><span class="pre">RegisterViewModel</span></code> can be stored in either of the following paths:</p>
<ul class="simple">
<li>Resources/ViewModels.Account.RegisterViewModel.fr.resx</li>
<li>Resources/ViewModels/Account/RegisterViewModel.fr.resx</li>
</ul>
<div class="highlight-c#"><div class="highlight"><pre><span></span> <span class="k">public</span> <span class="k">class</span> <span class="nc">RegisterViewModel</span>
 <span class="p">{</span>
<span class="na">     [Required(ErrorMessage = &quot;The Email field is required.&quot;)]</span>
<span class="na">     [EmailAddress(ErrorMessage = &quot;The Email field is not a valid e-mail address.&quot;)]</span>
<span class="na">     [Display(Name = &quot;Email&quot;)]</span>
     <span class="k">public</span> <span class="kt">string</span> <span class="n">Email</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

<span class="na">     [Required(ErrorMessage = &quot;The Password field is required.&quot;)]</span>
<span class="na">     [StringLength(8, ErrorMessage = &quot;The {0} must be at least {2} characters long.&quot;, MinimumLength = 6)]</span>
<span class="na">     [DataType(DataType.Password)]</span>
<span class="na">     [Display(Name = &quot;Password&quot;)]</span>
     <span class="k">public</span> <span class="kt">string</span> <span class="n">Password</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

<span class="na">     [DataType(DataType.Password)]</span>
<span class="na">     [Display(Name = &quot;Confirm password&quot;)]</span>
<span class="na">     [Compare(&quot;Password&quot;, ErrorMessage = &quot;The password and confirmation password do not match.&quot;)]</span>
     <span class="k">public</span> <span class="kt">string</span> <span class="n">ConfirmPassword</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
 <span class="p">}</span>
</pre></div>
</div>
<p>The runtime doesn&#8217;t look up localized strings for non-validation attributes. In the code above, &#8220;Email&#8221; (from <code class="docutils literal"><span class="pre">[Display(Name</span> <span class="pre">=</span> <span class="pre">&quot;Email&quot;)]</span></code>) will not be localized.</p>
</div>
<div class="section" id="provide-localized-resources-for-the-languages-and-cultures-you-support">
<h2><a class="toc-backref" href="#id5">Provide localized resources for the languages and cultures you support</a><a class="headerlink" href="#provide-localized-resources-for-the-languages-and-cultures-you-support" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="supportedcultures-and-supporteduicultures">
<h3>SupportedCultures and SupportedUICultures<a class="headerlink" href="#supportedcultures-and-supporteduicultures" title="Permalink to this headline">Â¶</a></h3>
<p>ASP.NET Core allows you to specify two culture values, <code class="docutils literal"><span class="pre">SupportedCultures</span></code> and <code class="docutils literal"><span class="pre">SupportedUICultures</span></code>. The <a class="reference external" href="https://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo(v=vs.110).aspx">CultureInfo</a> object for <code class="docutils literal"><span class="pre">SupportedCultures</span></code> determines the results of culture-dependent functions, such as date, time, number, and currency formatting. <code class="docutils literal"><span class="pre">SupportedCultures</span></code> also determines the sorting order of text, casing conventions, and string comparisons. See <a class="reference external" href="https://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentculture%28v=vs.110%29.aspx">CultureInfo.CurrentCulture</a> for more info on how the server gets the Culture. The <code class="docutils literal"><span class="pre">SupportedUICultures</span></code> determines which translates strings (from <em>.resx</em> files) are looked up by the <a class="reference external" href="https://msdn.microsoft.com/en-us/library/system.resources.resourcemanager(v=vs.110).aspx">ResourceManager</a>. The <code class="docutils literal"><span class="pre">ResourceManager</span></code> simply looks up culture-specific strings that is determined by <code class="docutils literal"><span class="pre">CurrentUICulture</span></code>. Every thread in .NET has <code class="docutils literal"><span class="pre">CurrentCulture</span></code> and <code class="docutils literal"><span class="pre">CurrentUICulture</span></code> objects. ASP.NET Core inspects these values when rendering culture-dependent functions. For example, if the current thread&#8217;s culture is set to &#8220;en-US&#8221; (English, United States), <code class="docutils literal"><span class="pre">DateTime.Now.ToLongDateString()</span></code> displays &#8220;Thursday, February 18, 2016&#8221;, but if <code class="docutils literal"><span class="pre">CurrentCulture</span></code> is set to &#8220;es-ES&#8221; (Spanish, Spain) the output will be &#8220;jueves, 18 de febrero de 2016&#8221;.</p>
</div>
</div>
<div class="section" id="working-with-resource-files">
<h2><a class="toc-backref" href="#id6">Working with resource files</a><a class="headerlink" href="#working-with-resource-files" title="Permalink to this headline">Â¶</a></h2>
<p>A resource file is a useful mechanism for separating localizable strings from code. Translated strings for the non-default language are isolated <em>.resx</em> resource files. For example, you might want to create Spanish resource file named <em>Welcome.es.resx</em> containing translated strings. &#8220;es&#8221; is the language code for Spanish. To create this resource file in Visual Studio:</p>
<ol class="arabic simple">
<li>In <strong>Solution Explorer</strong>, right click on the folder which will contain the resource file &gt; <strong>Add</strong> &gt; <strong>New Item</strong>.</li>
</ol>
<img alt="../_images/newi.png" src="../_images/newi.png" />
<ol class="arabic simple" start="2">
<li>In the <strong>Search installed templates</strong> box, enter &#8220;resource&#8221; and name the file.</li>
</ol>
<img alt="../_images/res.png" src="../_images/res.png" />
<ol class="arabic simple" start="3">
<li>Enter the key value (native string) in the <strong>Name</strong> column and the translated string in the <strong>Value</strong> column.</li>
</ol>
<img alt="../_images/hola.png" src="../_images/hola.png" />
<p>Visual Studio shows the <em>Welcome.es.resx</em> file.</p>
<img alt="../_images/se.png" src="../_images/se.png" />
<div class="section" id="generating-resource-files-with-visual-studio">
<h3>Generating resource files with Visual Studio<a class="headerlink" href="#generating-resource-files-with-visual-studio" title="Permalink to this headline">Â¶</a></h3>
<p>If you create a resource file in Visual Studio without a culture in the file name (for example, <em>Welcome.resx</em>), Visual Studio will create a C# class with a property for each string. That&#8217;s usually not what you want with ASP.NET Core; you typically don&#8217;t have a default <em>.resx</em> resource file (A <em>.resx</em> file without the culture name). We suggest you create the <em>.resx</em> file with a culture name (for example <em>Welcome.fr.resx</em>). When you create a <em>.resx</em> file with a culture name, Visual Studio will not generate the class file. We anticipate that many developers will <strong>not</strong> create a default language resource file.</p>
</div>
<div class="section" id="adding-other-cultures">
<h3>Adding Other Cultures<a class="headerlink" href="#adding-other-cultures" title="Permalink to this headline">Â¶</a></h3>
<p>Each language and culture combination (other than the default language) requires a unique resource file. You can create resource files for different cultures and locales by creating new resource files in which the ISO language codes are part of the file name (for example, <strong>en-us</strong>, <strong>fr-ca</strong>, and <strong>en-gb</strong>). These ISO codes are placed between the file name and the .resx file name extension, as in <em>Welcome.es-MX.resx</em> (Spanish/Mexico). To specify a culturally neutral language, you would eliminate the country code, such as <em>Welcome.fr.resx</em> for the French language.</p>
</div>
</div>
<div class="section" id="implement-a-strategy-to-select-the-language-culture-for-each-request">
<h2><a class="toc-backref" href="#id7">Implement a strategy to select the language/culture for each request</a><a class="headerlink" href="#implement-a-strategy-to-select-the-language-culture-for-each-request" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="configuring-localization">
<h3>Configuring localization<a class="headerlink" href="#configuring-localization" title="Permalink to this headline">Â¶</a></h3>
<p>Localization is configured in the <code class="docutils literal"><span class="pre">ConfigureServices</span></code> method:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span>  <span class="k">public</span> <span class="k">void</span> <span class="nf">ConfigureServices</span><span class="p">(</span><span class="n">IServiceCollection</span> <span class="n">services</span><span class="p">)</span>
  <span class="p">{</span>

<span class="hll">      <span class="n">services</span><span class="p">.</span><span class="n">AddLocalization</span><span class="p">(</span><span class="n">options</span> <span class="p">=&gt;</span> <span class="n">options</span><span class="p">.</span><span class="n">ResourcesPath</span> <span class="p">=</span> <span class="s">&quot;Resources&quot;</span><span class="p">);</span>
</span>
      <span class="n">services</span><span class="p">.</span><span class="n">AddMvc</span><span class="p">()</span>
<span class="hll">        <span class="p">.</span><span class="n">AddViewLocalization</span><span class="p">(</span><span class="n">LanguageViewLocationExpanderFormat</span><span class="p">.</span><span class="n">Suffix</span><span class="p">)</span>
</span><span class="hll">        <span class="p">.</span><span class="n">AddDataAnnotationsLocalization</span><span class="p">();</span>
</span></pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">AddLocalization</span></code> Adds the localization services to the services container. The code above also sets the resources path to &#8220;Resources&#8221;.</li>
<li><code class="docutils literal"><span class="pre">AddViewLocalization</span></code> Adds support for localized view files. In this sample view localization is based on the view file suffix. For example &#8220;fr&#8221; in the <em>Index.fr.cshtml</em> file.</li>
<li><code class="docutils literal"><span class="pre">AddDataAnnotationsLocalization</span></code> Adds support for localized <code class="docutils literal"><span class="pre">DataAnnotations</span></code> validation messages through <code class="docutils literal"><span class="pre">IStringLocalizer</span></code> abstractions.</li>
</ul>
</div>
<div class="section" id="localization-middleware">
<h3>Localization middleware<a class="headerlink" href="#localization-middleware" title="Permalink to this headline">Â¶</a></h3>
<p>The current culture on a request is set in the localization <a class="reference internal" href="middleware.html"><span class="doc">Middleware</span></a>. The localization middleware is enabled in the <code class="docutils literal"><span class="pre">Configure</span></code> method of <em>Startup.cs</em> file.</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span>  <span class="k">public</span> <span class="k">void</span> <span class="nf">Configure</span><span class="p">(</span><span class="n">IApplicationBuilder</span> <span class="n">app</span><span class="p">,</span> <span class="n">IHostingEnvironment</span> <span class="n">env</span><span class="p">,</span> <span class="n">ILoggerFactory</span> <span class="n">loggerFactory</span><span class="p">)</span>

      <span class="kt">var</span> <span class="n">supportedCultures</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span>
      <span class="p">{</span>
          <span class="k">new</span> <span class="nf">CultureInfo</span><span class="p">(</span><span class="s">&quot;en-US&quot;</span><span class="p">),</span>
          <span class="k">new</span> <span class="nf">CultureInfo</span><span class="p">(</span><span class="s">&quot;en-AU&quot;</span><span class="p">),</span>
          <span class="k">new</span> <span class="nf">CultureInfo</span><span class="p">(</span><span class="s">&quot;en-GB&quot;</span><span class="p">),</span>
          <span class="k">new</span> <span class="nf">CultureInfo</span><span class="p">(</span><span class="s">&quot;en&quot;</span><span class="p">),</span>
          <span class="k">new</span> <span class="nf">CultureInfo</span><span class="p">(</span><span class="s">&quot;es-ES&quot;</span><span class="p">),</span>
          <span class="k">new</span> <span class="nf">CultureInfo</span><span class="p">(</span><span class="s">&quot;es-MX&quot;</span><span class="p">),</span>
          <span class="k">new</span> <span class="nf">CultureInfo</span><span class="p">(</span><span class="s">&quot;es&quot;</span><span class="p">),</span>
          <span class="k">new</span> <span class="nf">CultureInfo</span><span class="p">(</span><span class="s">&quot;fr-FR&quot;</span><span class="p">),</span>
          <span class="k">new</span> <span class="nf">CultureInfo</span><span class="p">(</span><span class="s">&quot;fr&quot;</span><span class="p">),</span>
      <span class="p">};</span>

      <span class="n">app</span><span class="p">.</span><span class="n">UseRequestLocalization</span><span class="p">(</span><span class="k">new</span> <span class="n">RequestLocalizationOptions</span>
      <span class="p">{</span>
          <span class="n">DefaultRequestCulture</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RequestCulture</span><span class="p">(</span><span class="s">&quot;en-US&quot;</span><span class="p">),</span>
          <span class="c1">// Formatting numbers, dates, etc.</span>
          <span class="n">SupportedCultures</span> <span class="p">=</span> <span class="n">supportedCultures</span><span class="p">,</span>
          <span class="c1">// UI strings that we have localized.</span>
          <span class="n">SupportedUICultures</span> <span class="p">=</span> <span class="n">supportedCultures</span>
      <span class="p">});</span>

      <span class="c1">// Remaining code omitted for brevity.</span>
</pre></div>
</div>
<p><a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Builder/ApplicationBuilderExtensions/index.html">UseRequestLocalization</a> initializes a <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Localization/RequestLocalizationMiddleware/index.html">RequestLocalizationMiddleware</a> object. On every request the list of <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Localization/RequestCultureProvider/index.html">RequestCultureProvider</a> in the <a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Localization/RequestLocalizationOptions/index.html">RequestLocalizationOptions</a> is enumerated and the first provider that can successfully determine the request culture is used. The default providers come from the <code class="docutils literal"><span class="pre">RequestLocalizationOptions</span></code> class:</p>
<ol class="arabic simple">
<li><a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Localization/QueryStringRequestCultureProvider/index.html">QueryStringRequestCultureProvider</a></li>
<li><a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Localization/CookieRequestCultureProvider/index.html">CookieRequestCultureProvider</a></li>
<li><a class="reference external" href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Localization/AcceptLanguageHeaderRequestCultureProvider/index.html">AcceptLanguageHeaderRequestCultureProvider</a></li>
</ol>
<p>The default list goes from most specific to least specific. Later in the article we&#8217;ll see how you can change the order and even add a custom culture provider. If none of the providers can determine the request culture, the <code class="docutils literal"><span class="pre">DefaultRequestCulture</span></code> is used.</p>
</div>
<div class="section" id="querystringrequestcultureprovider">
<h3>QueryStringRequestCultureProvider<a class="headerlink" href="#querystringrequestcultureprovider" title="Permalink to this headline">Â¶</a></h3>
<p>Some apps will use a query string to set the <a class="reference external" href="https://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx#Current">culture and UI culture</a>. For apps that use the cookie or Accept-Language header approach, adding a query string to the URL is useful for debugging and testing code. By default, the <code class="docutils literal"><span class="pre">QueryStringRequestCultureProvider</span></code> is registered as the first localization provider in the <code class="docutils literal"><span class="pre">RequestCultureProvider</span></code> list. You pass the query string parameters <code class="docutils literal"><span class="pre">culture</span></code> and <code class="docutils literal"><span class="pre">ui-culture</span></code>. The following example sets the specific culture (language and region) to Spanish/Mexico:</p>
<blockquote>
<div>http://localhost:5000/?culture=es-MX&amp;ui-culture=es-MX</div></blockquote>
<p>If you only pass in one of the two (<code class="docutils literal"><span class="pre">culture</span></code> or <code class="docutils literal"><span class="pre">ui-culture</span></code>), the query string provider will set both values using the one you passed in. For example, setting just the culture will set both the <code class="docutils literal"><span class="pre">Culture</span></code> and the <code class="docutils literal"><span class="pre">UICulture</span></code>:</p>
<blockquote>
<div>http://localhost:5000/?culture=es-MX</div></blockquote>
</div>
<div class="section" id="cookierequestcultureprovider">
<h3>CookieRequestCultureProvider<a class="headerlink" href="#cookierequestcultureprovider" title="Permalink to this headline">Â¶</a></h3>
<p>Production apps will often provide a mechanism to set the culture with the ASP.NET Core culture cookie. Use the <a class="reference external" href="http://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Localization/CookieRequestCultureProvider/index.html#Microsoft.AspNetCore.Localization.CookieRequestCultureProvider.MakeCookieValue" title="(in ASP.NET API Reference v)"><code class="xref dn dn-method docutils literal"><span class="pre">MakeCookieValue</span></code></a>  method to create a cookie.</p>
<p>The <a class="reference external" href="http://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Localization/CookieRequestCultureProvider/index.html#Microsoft.AspNetCore.Localization.CookieRequestCultureProvider" title="(in ASP.NET API Reference v)"><code class="xref dn dn-cls docutils literal"><span class="pre">CookieRequestCultureProvider</span></code></a> <a class="reference external" href="http://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Localization/CookieRequestCultureProvider/index.html#Microsoft.AspNetCore.Localization.CookieRequestCultureProvider.DefaultCookieName" title="(in ASP.NET API Reference v)"><code class="xref dn dn-field docutils literal"><span class="pre">DefaultCookieName</span></code></a>  returns the default cookie name used to track the userâ€™s preferred culture information. The default cookie  name is &#8221;.AspNetCore.Culture&#8221;.</p>
<p>The cookie format is <code class="docutils literal"><span class="pre">c=%LANGCODE%|uic=%LANGCODE%</span></code>, where <code class="docutils literal"><span class="pre">c</span></code> is <code class="docutils literal"><span class="pre">Culture</span></code> and <code class="docutils literal"><span class="pre">uic</span></code> is <code class="docutils literal"><span class="pre">UICulture</span></code>, for example:</p>
<p>c=&#8217;en-UK&#8217;|uic=&#8217;en-US&#8217;</p>
<p>If you only specify one of culture info and UI culture, the specified culture will be used for both culture info and UI culture.</p>
</div>
<div class="section" id="the-accept-language-http-header">
<h3>The Accept-Language HTTP header<a class="headerlink" href="#the-accept-language-http-header" title="Permalink to this headline">Â¶</a></h3>
<p>The <a class="reference external" href="https://www.w3.org/International/questions/qa-accept-lang-locales">Accept-Language header</a> is settable in most browsers and was originally intended to specify the user&#8217;s language. This setting indicates what the browser has been set to send or has inherited from the underlying operating system. The Accept-Language HTTP header from a browser request is not an infallible way to detect the user&#8217;s preferred language (see <a class="reference external" href="https://www.w3.org/International/questions/qa-lang-priorities.en.php">Setting language preferences in a browser</a>). A production app should include a way for a user to customize their choice of culture.</p>
</div>
<div class="section" id="setting-the-accept-language-http-header-in-ie">
<h3>Setting the Accept-Language HTTP header in IE<a class="headerlink" href="#setting-the-accept-language-http-header-in-ie" title="Permalink to this headline">Â¶</a></h3>
<ol class="arabic simple">
<li>From the gear icon, tap <strong>Internet Options</strong>.</li>
<li>Tap <strong>Languages</strong>.</li>
</ol>
<img alt="../_images/lang.png" src="../_images/lang.png" />
<ol class="arabic simple" start="3">
<li>Tap <strong>Set Language Preferences</strong>.</li>
<li>Tap <strong>Add a language</strong>.</li>
<li>Add the language.</li>
<li>Tap the language, then tap <strong>Move Up</strong>.</li>
</ol>
</div>
<div class="section" id="using-a-custom-provider">
<h3>Using a custom provider<a class="headerlink" href="#using-a-custom-provider" title="Permalink to this headline">Â¶</a></h3>
<p>Suppose you want to let your customers store their language and culture in your databases. You could write a provider to look up these values for the user. The following code shows how to add a custom provider:</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="n">services</span><span class="p">.</span><span class="n">Configure</span><span class="p">&lt;</span><span class="n">RequestLocalizationOptions</span><span class="p">&gt;(</span><span class="n">options</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">supportedCultures</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span>
    <span class="p">{</span>
        <span class="k">new</span> <span class="nf">CultureInfo</span><span class="p">(</span><span class="s">&quot;en-US&quot;</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">CultureInfo</span><span class="p">(</span><span class="s">&quot;fr&quot;</span><span class="p">)</span>
    <span class="p">};</span>

    <span class="n">options</span><span class="p">.</span><span class="n">DefaultRequestCulture</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RequestCulture</span><span class="p">(</span><span class="n">culture</span><span class="p">:</span> <span class="s">&quot;en-US&quot;</span><span class="p">,</span> <span class="n">uiCulture</span><span class="p">:</span> <span class="s">&quot;en-US&quot;</span><span class="p">);</span>
    <span class="n">options</span><span class="p">.</span><span class="n">SupportedCultures</span> <span class="p">=</span> <span class="n">supportedCultures</span><span class="p">;</span>
    <span class="n">options</span><span class="p">.</span><span class="n">SupportedUICultures</span> <span class="p">=</span> <span class="n">supportedCultures</span><span class="p">;</span>

    <span class="n">options</span><span class="p">.</span><span class="n">RequestCultureProviders</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="k">new</span> <span class="n">CustomRequestCultureProvider</span><span class="p">(</span><span class="k">async</span> <span class="n">context</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
       <span class="c1">// My custom request culture logic</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nf">ProviderCultureResult</span><span class="p">(</span><span class="s">&quot;en&quot;</span><span class="p">);</span>
    <span class="p">}));</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Use <code class="docutils literal"><span class="pre">RequestLocalizationOptions</span></code> to add or remove localization providers.</p>
</div>
</div>
<div class="section" id="resource-file-naming">
<h2><a class="toc-backref" href="#id8">Resource file naming</a><a class="headerlink" href="#resource-file-naming" title="Permalink to this headline">Â¶</a></h2>
<p>Resources are named for the type of their class minus the default namespace (which is also the name of the assembly). For example, a French resource in the <code class="docutils literal"><span class="pre">LocalizationWebsite.Web</span></code> project for the class <code class="docutils literal"><span class="pre">LocalizationWebsite.Web.Startup</span></code> would be named <em>Startup.fr.resx</em>. The class <code class="docutils literal"><span class="pre">LocalizationWebsite.Web.Controllers.HomeController</span></code> would be <em>Controllers.HomeController.fr.resx</em>. If for some reason your targeted class is not in the base namespace you will need the full type name. For example, in the sample project a type <code class="docutils literal"><span class="pre">ExtraNamespace.Tools</span></code> would be <em>ExtraNamespace.Tools.fr.resx</em>.</p>
<p>In the sample project, the <code class="docutils literal"><span class="pre">ConfigureServices</span></code> method sets the <code class="docutils literal"><span class="pre">ResourcesPath</span></code> to &#8220;Resources&#8221;, so the project relative path for the home controller&#8217;s French resource file is <em>Resources/Controllers.HomeController.fr.resx</em>. Alternatively, you can use folders to organize resource files. For the home controller, the path would be <em>Resources/Controllers/HomeController.fr.resx</em>. If you don&#8217;t use the <code class="docutils literal"><span class="pre">ResourcesPath</span></code> option, the <em>.resx</em> file would go in the project base directory. The resource file for <code class="docutils literal"><span class="pre">HomeController</span></code> would be named <em>Controllers.HomeController.fr.resx</em>. The choice of using the dot or path naming convention depends on how you want to organize your resource files.</p>
<table border="1" class="docutils">
<colgroup>
<col width="70%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Resource name</th>
<th class="head">Dot or path naming</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>Resources/Controllers.HomeController.fr.resx</em></td>
<td>Dot</td>
</tr>
<tr class="row-odd"><td><em>Resources/Controllers/HomeController.fr.resx</em></td>
<td>Path</td>
</tr>
</tbody>
</table>
<p>Resource files using <code class="docutils literal"><span class="pre">&#64;inject</span> <span class="pre">IViewLocalizer</span></code> in Razor views follow a similar pattern. The resource file for a view can be named using either dot naming or path naming. Razor view resource files mimic the path of their associated view file. Assuming we set the <code class="docutils literal"><span class="pre">ResourcesPath</span></code> to &#8220;Resources&#8221;, the French resource file associated with the <em>Views/Book/About.cshtml</em> view could be either of the following:</p>
<ul class="simple">
<li>Resources/Views/Home/About.fr.resx</li>
<li>Resources/Views.Home.About.fr.resx</li>
</ul>
<p>If you don&#8217;t use the <code class="docutils literal"><span class="pre">ResourcesPath</span></code> option, the <em>.resx</em> file for a view would be located in the same folder as the view.</p>
<p>If you remove the &#8221;.fr&#8221; culture designator AND you have the culture set to French (via cookie or other mechanism), the default resource file is read and strings are localized. The Resource manager designates a default or fallback resource, when nothing meets your requested culture you&#8217;re served the *.resx file without a culture designator. If you want to just return the key when missing a resource for the requested culture you must not have a default resource file.</p>
<div class="section" id="setting-the-culture-programmatically">
<h3>Setting the culture programmatically<a class="headerlink" href="#setting-the-culture-programmatically" title="Permalink to this headline">Â¶</a></h3>
<p>This sample <strong>Localization.StarterWeb</strong> project on <a class="reference external" href="https://github.com/aspnet/entropy">GitHub</a> contains UI to set the <code class="docutils literal"><span class="pre">Culture</span></code>. The <em>Views/Shared/_SelectLanguagePartial.cshtml</em> file allows you to select the culture from the list of supported cultures:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>@using Microsoft.AspNet.Builder
@using Microsoft.AspNet.Http.Features
@using Microsoft.AspNet.Localization
@using Microsoft.AspNet.Mvc.Localization
@using Microsoft.Extensions.Options

@inject IViewLocalizer Localizer
@inject IOptions&lt;RequestLocalizationOptions&gt; LocOptions

@{
    var requestCulture = Context.Features.Get&lt;IRequestCultureFeature&gt;();
    var cultureItems = LocOptions.Value.SupportedUICultures
        .Select(c =&gt; new SelectListItem { Value = c.Name, Text = c.DisplayName })
        .ToList();
}

&lt;div title=&quot;@Localizer[&quot;Request culture provider:&quot;] @requestCulture?.Provider?.GetType().Name&quot;&gt;
    &lt;form id=&quot;selectLanguage&quot; asp-controller=&quot;Home&quot; 
          asp-action=&quot;SetLanguage&quot; asp-route-returnUrl=&quot;@Context.Request.Path&quot; 
          method=&quot;post&quot; class=&quot;form-horizontal&quot; role=&quot;form&quot;&gt;
        @Localizer[&quot;Language:&quot;] &lt;select name=&quot;culture&quot;
          asp-for=&quot;@requestCulture.RequestCulture.UICulture.Name&quot; asp-items=&quot;cultureItems&quot;&gt;
        &lt;/select&gt;
    &lt;/form&gt;
&lt;/div&gt;
</pre></div>
</div>
<p>The <em>Views/Shared/_SelectLanguagePartial.cshtml</em> file is added to the <code class="docutils literal"><span class="pre">footer</span></code> section of the layout file so it will be available to all views:</p>
<div class="highlight-HTML"><div class="highlight"><pre><span></span>  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container body-content&quot;</span><span class="p">&gt;</span>
      @RenderBody()
      <span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">footer</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-md-6&quot;</span><span class="p">&gt;</span>
                  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="ni">&amp;copy;</span> 2015 - Localization.StarterWeb<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-md-6 text-right&quot;</span><span class="p">&gt;</span>
                  @await Html.PartialAsync(&quot;_SelectLanguagePartial&quot;)
              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">footer</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">SetLanguage</span></code> method sets the culture cookie.</p>
<div class="highlight-c#"><div class="highlight"><pre><span></span><span class="na">  [HttpPost]</span>
  <span class="k">public</span> <span class="n">IActionResult</span> <span class="nf">SetLanguage</span><span class="p">(</span><span class="kt">string</span> <span class="n">culture</span><span class="p">,</span> <span class="kt">string</span> <span class="n">returnUrl</span><span class="p">)</span>
  <span class="p">{</span>
      <span class="n">Response</span><span class="p">.</span><span class="n">Cookies</span><span class="p">.</span><span class="n">Append</span><span class="p">(</span>
          <span class="n">CookieRequestCultureProvider</span><span class="p">.</span><span class="n">DefaultCookieName</span><span class="p">,</span>
          <span class="n">CookieRequestCultureProvider</span><span class="p">.</span><span class="n">MakeCookieValue</span><span class="p">(</span><span class="k">new</span> <span class="n">RequestCulture</span><span class="p">(</span><span class="n">culture</span><span class="p">)),</span>
          <span class="k">new</span> <span class="n">CookieOptions</span> <span class="p">{</span> <span class="n">Expires</span> <span class="p">=</span> <span class="n">DateTimeOffset</span><span class="p">.</span><span class="n">UtcNow</span><span class="p">.</span><span class="n">AddYears</span><span class="p">(</span><span class="m">1</span><span class="p">)</span> <span class="p">}</span>
      <span class="p">);</span>

      <span class="k">return</span> <span class="nf">LocalRedirect</span><span class="p">(</span><span class="n">returnUrl</span><span class="p">);</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>You can&#8217;t simply plug in the <em>_SelectLanguagePartial.cshtml</em> to sample code for this project. The <strong>Localization.StarterWeb</strong> project on <a class="reference external" href="https://github.com/aspnet/entropy">GitHub</a> has code to flow the
<code class="docutils literal"><span class="pre">RequestLocalizationOptions</span></code> to a Razor partial through the <a class="reference internal" href="dependency-injection.html"><span class="doc">Dependency Injection</span></a> container.</p>
</div>
</div>
<div class="section" id="globalization-and-localization-terms">
<h2><a class="toc-backref" href="#id9">Globalization and localization terms</a><a class="headerlink" href="#globalization-and-localization-terms" title="Permalink to this headline">Â¶</a></h2>
<p>The process of localizing your app also requires a basic understanding of relevant character sets commonly used in modern software development and an understanding of the issues associated with them. Although all computers store text as numbers (codes), different systems store the same text using different numbers. The localization process refers to translating the app user interface (UI) for a specific culture/locale.</p>
<p><a class="reference external" href="https://msdn.microsoft.com/en-us/library/aa292135(v=vs.71).aspx">Localizability</a> is an intermediate process for verifying that a globalized app is ready for localization.</p>
<p>The <a class="reference external" href="https://www.ietf.org/rfc/rfc4646.txt">RFC 4646</a> format for the culture name is &#8220;&lt;languagecode2&gt;-&lt;country/regioncode2&gt;&#8221;, where &lt;languagecode2&gt; is the language code and &lt;country/regioncode2&gt; is the subculture code. For example, <code class="docutils literal"><span class="pre">es-CL</span></code> for Spanish (Chile), <code class="docutils literal"><span class="pre">en-US</span></code> for English (United States), and <code class="docutils literal"><span class="pre">en-AU</span></code> for English (Australia). <a class="reference external" href="https://www.ietf.org/rfc/rfc4646.txt">RFC 4646</a> is a combination of an ISO 639 two-letter lowercase culture code associated with a language and an ISO 3166 two-letter uppercase subculture code associated with a country or region.  See <a class="reference external" href="https://msdn.microsoft.com/en-us/library/ee825488(v=cs.20).aspx">Language Culture Name</a>.</p>
<p>Internationalization is often abbreviated to &#8220;I18N&#8221;. The abbreviation takes the first and last letters and the number of letters between them, so 18 stands for the number of letters between the first &#8220;I&#8221; and the last &#8220;N&#8221;. The same applies to Globalization (G11N), and Localization (L10N).</p>
<p>Terms:</p>
<ul class="simple">
<li>Globalization (G11N): The process of making an app support different languages and regions.</li>
<li>Localization (L10N): The process of customizing an app for a given language and region.</li>
<li>Internationalization (I18N): Describes both globalization and localization.</li>
<li>Culture: It is a language and, optionally, a region.</li>
<li>Neutral culture: A culture that has a specified language, but not a region. (for example &#8220;en&#8221;, &#8220;es&#8221;)</li>
<li>Specific culture: A culture that has a specified language and region. (for example &#8220;en-US&#8221;, &#8220;en-GB&#8221;, &#8220;es-CL&#8221;)</li>
<li>Locale: A locale is the same as a culture.</li>
</ul>
</div>
<div class="section" id="additional-resources">
<h2><a class="toc-backref" href="#id10">Additional Resources</a><a class="headerlink" href="#additional-resources" title="Permalink to this headline">Â¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/aspnet/entropy">Localization.StarterWeb project</a> used in the article.</li>
<li><a class="reference external" href="https://msdn.microsoft.com/en-us/library/xbx3z216(v=vs.110).aspx#VSResFiles">Resource Files in Visual Studio</a></li>
<li><a class="reference external" href="https://msdn.microsoft.com/en-us/library/xbx3z216(v=vs.110).aspx#ResourcesFiles">Resources in .resx Files</a></li>
</ul>
</div>
</div>



  
  <!-- Helpfulness -->
  <div id="helpful-position"></div>
  <div id="helpful" class="helpfulness-container" style="display:none;">
    <div class="helpfulness">
      <div class="helpfulness-form">
        <h2>Is this page helpful?</h2>
        <a id="helpfulness-btn-yes" href="javascript:;" class="common-btn first">Yes</a>
        <a id="helpfulness-btn-no" href="javascript:;" class="common-btn">No</a>
      </div>
      <div class="helpfulness-form-no" style="display:none;">
        <h2>Is this page helpful?</h2>
        Sorry this wasn't helpful.
        <input type="text" id="txt-helpfulness" placeholder="Please let us know why this wasn't helpful">
        <span id="helpfulness-characters-left">characters remaining</span>
        <a id="helpfulness-btn-submit" href="javascript:;" class="common-btn">Submit</a>
        <a id="helpfulness-btn-skip" href="javascript:;" class="common-btn secondary">Skip this</a>
      </div>
      <a href="javascript:;" class="helpfulness-close">âœ–</a>
      <div class="messages processing" style="display:none;">
        Sending feedback...
      </div>
      <div class="messages success" style="display:none;">
        Thank you for your feedback!
      </div>
      <div class="messages helpfulness-error" style="display:none;">
        Error during submission!
      </div>
    </div>
  </div>
  

  <!-- wedc -->
  <noscript>
    <img alt="" width="1" height="1" src="https://c.microsoft.com/trans_pixel.aspx"/>
  </noscript>

  
    <!-- disqus -->
    <button id="showComments" type="button" class="btn btn-neutral"><i class="fa fa-comment"></i> Show comments</button>
    <div id="disqus_thread"></div>
    <hr/>
  
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="configuration.html" class="btn btn-neutral float-right" title="Configuration" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="error-handling.html" class="btn btn-neutral" title="Error Handling" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Microsoft.
      Last updated on Jun 21, 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  Documentation licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>.


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/helpfulness.js?v=6"></script>
      <script type="text/javascript" src="../_static/disqus.js?v=6"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>